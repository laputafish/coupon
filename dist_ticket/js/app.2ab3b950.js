(function(e){function t(t){for(var n,s,r=t[0],l=t[1],c=t[2],d=0,m=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,s=1;s<a.length;s++){var l=a[s];0!==o[l]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},o={app:0},i=[];function s(e){return r.p+"js/"+({about:"about"}[e]||e)+"."+{about:"70c72891"}[e]+".js"}function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(e){var t=[],a=o[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=n);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=s(e);var c=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(d);var a=o[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",c.name="ChunkLoadError",c.type=n,c.request=i,a[1](c)}o[e]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"007d":function(e,t,a){"use strict";var n=a("e07d"),o=a.n(n);o.a},"0335":function(e,t,a){"use strict";var n=a("cead"),o=a.n(n);o.a},"0416":function(e,t,a){"use strict";var n=a("196b"),o=a.n(n);o.a},"0565":function(e,t,a){"use strict";var n=a("b92d"),o=a.n(n);o.a},"0593":function(e,t,a){},"0597":function(e,t,a){"use strict";var n=a("2071"),o=a.n(n);o.a},"06c1":function(e,t,a){"use strict";var n=a("5d4f"),o=a.n(n);o.a},"0747":function(e,t,a){"use strict";var n=a("ca34"),o=a.n(n);o.a},"07ff":function(e,t,a){},"0882":function(e,t,a){"use strict";var n=a("07ff"),o=a.n(n);o.a},"09d6":function(e,t,a){"use strict";var n=a("845c"),o=a.n(n);o.a},"0a94":function(e,t,a){"use strict";var n=a("aed4"),o=a.n(n);o.a},"0b8f":function(e,t,a){},"0de4":function(e,t,a){"use strict";var n=a("a5ee"),o=a.n(n);o.a},"0eff":function(e,t,a){},"111a":function(e,t,a){},"11a5":function(e,t,a){},1476:function(e,t,a){"use strict";var n=a("c878"),o=a.n(n);o.a},"196b":function(e,t,a){},"19b7":function(e,t,a){},"1d7c":function(e,t,a){},"1f5b":function(e,t,a){"use strict";var n=a("598d"),o=a.n(n);o.a},"1fb5":function(e,t,a){"use strict";var n=a("2cd6"),o=a.n(n);o.a},2071:function(e,t,a){},"217e":function(e,t,a){"use strict";var n=a("7f6d"),o=a.n(n);o.a},2247:function(e,t,a){},"252c":function(e,t,a){"use strict";var n=a("fe6c"),o=a.n(n);o.a},"2cd6":function(e,t,a){},"2d2d":function(e,t,a){},"2f56":function(e,t,a){"use strict";var n=a("468b"),o=a.n(n);o.a},"2f99":function(e,t,a){"use strict";var n=a("43e4"),o=a.n(n);o.a},"302c":function(e,t,a){},3132:function(e,t,a){},3673:function(e){e.exports=JSON.parse('{"general":{"home":"Home","number":"#","brand_text":"Digital Ticket","version":"2.0.0","description":"Description","expiry_date":"Expiry Date","action":"Action","dashboard":"Dashboard","new":"New","edit":"Edit","name":"Name","email":"Email","alias":"Alias","tel_no":"Tel No.","fax_no":"Fax No.","web_url":"Web Url","status":"Status","key":"Key","contact":"Contact","telNo":"Tel No.","faxNo":"Fax No.","webUrl":"Web Url","information":"Information","confirmation":"Confirmation","unspecified":"Unspecified","remark":"Remark","created_at":"Created at","title":"Title","type":"Type","views":"Views","qr_barcode":"QR/Barcode","redeemed_on":"Redeemed On","location_code":"Location Code","confirmation_code":"Confirmation Code","redemption_count":"Redemption Count","password":"Password","qrcode":"QR Code"},"status":{"pending":"Pending","completed":"Completed","preparing":"Preparing","ready_to_send":"Ready to Send","sending":"Sending"},"buttons":{"save":"Save","save_and_back":"Save & Back","back":"Back","ok":"OK","cancel":"Cancel","close":"Close","logout":"Logout","deleteAll":"Delete All","export":"Export","continue":"Continue","upload":"Upload","download":"Download"},"message":"hello i18n !!","messages":{"sign_up_success_and_check_email":"Signed up successfully. Please check your email.","verification_code_is_invalid_or_expired":"Verification code is invalid or expired!","email_not_registered_yet":"Email was not registered yet!","verification_link_is_sent_please_check_your_email":"Verification link is sent. Please check your email.","verification_successful":"Verification Successfully!","successfully_deleted":"Successfully Deleted!","see_all_messages":"See All Messages","overwrite_existing_content":"Overwrite existing content?","unauthorized":"Access Denied!","please_check_email_to_reset_password":"Please check email to reset your password.","areYouSure":"Are you sure?","error_during_loading":"Error occurred during data loading!","saved_successfully":"Saved Successfully.","temporary_key_expired":"Tempoarary Key Expired!","fields_not_matched_please_delete_all_first":"Fields not matched. All exisiting codes will be removed. Are you sure?","link_copied_to_clipboard":"The link is copied to clipboard.","download_link_copied_to_clipboard":"The download link is copied to clipboard.","token_copied_to_clipboard":"The token is copied to clipboard.","not_specified":"Not Specified","some_errors_occurred_during_export":"Some errors occurred during export!","goto_login_page":"Goto login page","voucher_template_copied_successfully":"Voucher template copied successfully.","email_template_copied_successfully":"Email template copied successfully.","type_delete_to_force_deletion":"Type \'DELETE\' to force deletion.","this_agent_has_related_vouchers":"This agent has related voucher(s).","all_codes_are_removed":"All codes are removed!","all_participants_are_removed":"All participants are removed!","template_missing":"Template Missing!","email_template_missing":"Email template Missing!","error_occurred_maybe_invalid_format":"Error occurred. Maybe Invalid Format!","deleted_successfully":"Deleted Successfully.","code_exists_append_same_column_are_you_sure":"Code(s) exists. They may be removed completely if columns are different. Are you sure?","reset_status":"After status is reset, the time of sending will be lost. Are you sure?","code_status_has_been_updated":"Code status updated successfully.","existingContentWillBeCleared":"Existing content will be removed. Are you sure?","type__to_proceed":"Type \\"{word}\\" to proceed"},"menu":{"dashboard":"Dashboard","dashboard1":"Dashboard1","dashboard2":"Dashboard2","dashboard3":"Dashboard3","widgets":"Widgets","layout_options":"Layout Options","top_navigation":"Top Navigation","top_navigation_sidebar":"Top Navigation - Sidebar","boxed":"Boxed","fixed_sidebar":"Fixed Sidebar","fixed_navbar":"Fixed Navbar","fixed_footer":"Fixed Footer","collapsed_sidebar":"Collapsed Sidebar","charts":"Charts","charts_js":"Charts JS","flot":"Flots","inline":"Inline","ui_elements":"UI Elements","general":"General","icons":"Icons","buttons":"Buttons","sliders":"Sliders","modals_alerts":"Modals & Alerts","navbar_tabs":"Navbar & Tabs","timeline":"Timeline","ribbons":"Ribbons","vouchers":"Vouchers","agents":"Agents","home":"Home","contact":"Contact"},"agents":{"agent":"Agent","smtp_servers":"SMTP Servers","voucher_count":"Vouchers"},"vouchers":{"image_code":"Image Code","qr_code":"QR Code","email_sent_total":"Email Sent/Total","creation_date":"Created At","activation_date":"Activation Date","expiry_date":"Expiry Date","code_list":"Code List","email_list":"Email List","agent":"Agent","voucher":"Voucher","code":"Code","codes":"Codes","participants":"Participants","sent_on":"Sent On","qr_code_composition":"QR Code Composition","qr_code_size":"QR Code Size","available_after_saving":"Available after Saving","copyTemplateFrom":"Copy Template From ...","no_of_codes":"No. of Codes","codeTabLabel":"Coupon Codes","images":"Images","title":"Title","sub_title":"Sub-title","coupons":"Coupon(s)","questionnaire_template":"Questionnaire Template","custom_link":"Custom Link"},"login":{"digital_coupon":"Digital Coupon","management_platform":"Management Platform","login":"Login","register":"Register","email_address":"Email Address","email":"Email","password":"Password","passwordConfirmation":"Password (Confirmation)","remember_me":"Remember Me","forgotYourPassword":"Forgot Your Password?","gotoLoginPage":"Goto login page","sendVerificationCode":"Send verification code","resendVerificationCode":"Resend verification code","accountVerification":"Account Verification","_brandNotes_":"Management of Coupon code and QR Code Generation"},"auth":{"logout":"Logout","verifying":"Verifying ... ","forgot_password":"Forgot Password","verificationCompleted":"Verification Completed!","resendEmail":"Resend Email","resetPassword":"Reset Password"},"user":{"profile":"Profile"}}')},3818:function(e,t,a){},"3c5b":function(e,t,a){},"3c5e":function(e,t,a){"use strict";var n=a("302c"),o=a.n(n);o.a},4080:function(e,t,a){"use strict";var n=a("728c"),o=a.n(n);o.a},4100:function(e,t,a){},"430e":function(e,t,a){},"43e4":function(e,t,a){},"45d3":function(e,t,a){"use strict";var n=a("f058"),o=a.n(n);o.a},"468b":function(e,t,a){},"4b62":function(e,t,a){"use strict";var n=a("7dec"),o=a.n(n);o.a},"4c18":function(e,t,a){"use strict";var n=a("5dd0"),o=a.n(n);o.a},"4d7a":function(e,t,a){"use strict";var n=a("11a5"),o=a.n(n);o.a},"521c":function(e,t,a){"use strict";var n=a("ba6b"),o=a.n(n);o.a},"526d":function(e,t,a){"use strict";var n=a("aba7"),o=a.n(n);o.a},"560f":function(e,t,a){},5623:function(e,t){},"562b":function(e,t,a){"use strict";var n=a("d157"),o=a.n(n);o.a},"56e6":function(e){e.exports=JSON.parse("{}")},"598d":function(e,t,a){},"59c5":function(e,t,a){},"5a63":function(e,t,a){},"5c0b":function(e,t,a){"use strict";var n=a("9c0c"),o=a.n(n);o.a},"5c5c":function(e,t,a){"use strict";var n=a("e908"),o=a.n(n);o.a},"5d4f":function(e,t,a){},"5dd0":function(e,t,a){},"5e84":function(e,t,a){"use strict";var n=a("0eff"),o=a.n(n);o.a},"5e87":function(e,t,a){"use strict";var n=a("3c5b"),o=a.n(n);o.a},"60d7":function(e,t,a){"use strict";var n=a("430e"),o=a.n(n);o.a},"634e":function(e,t,a){},6704:function(e,t,a){"use strict";var n=a("2d2d"),o=a.n(n);o.a},"68bb":function(e,t,a){"use strict";var n=a("6b42"),o=a.n(n);o.a},6928:function(e,t,a){"use strict";var n=a("ca35"),o=a.n(n);o.a},"6b42":function(e,t,a){},"6f1c":function(e,t,a){"use strict";var n=a("99dc"),o=a.n(n);o.a},"6fff":function(e,t,a){"use strict";var n=a("5a63"),o=a.n(n);o.a},"70e3":function(e,t,a){},"727d":function(e,t,a){"use strict";var n=a("d7bc"),o=a.n(n);o.a},"728c":function(e,t,a){},"74cc":function(e,t,a){},7666:function(e,t,a){},"78a7":function(e,t,a){"use strict";var n=a("8ee7"),o=a.n(n);o.a},"7d4c":function(e,t,a){"use strict";var n=a("9474"),o=a.n(n);o.a},"7de7":function(e,t,a){"use strict";var n=a("c3f9"),o=a.n(n);o.a},"7dec":function(e,t,a){},"7f2e":function(e,t,a){},"7f6d":function(e,t,a){},"845c":function(e,t,a){},8842:function(e,t,a){"use strict";var n=a("e484"),o=a.n(n);o.a},"8ee3":function(e,t,a){"use strict";var n=a("ab15"),o=a.n(n);o.a},"8ee7":function(e,t,a){},"91fa":function(e,t,a){},9208:function(e,t,a){},"92f6":function(e,t,a){"use strict";var n=a("74cc"),o=a.n(n);o.a},9474:function(e,t,a){},9775:function(e,t,a){"use strict";var n=a("19b7"),o=a.n(n);o.a},"97ef":function(e,t,a){},"99dc":function(e,t,a){},"9a18":function(e,t,a){"use strict";var n=a("2247"),o=a.n(n);o.a},"9b2d":function(e,t,a){"use strict";var n=a("3132"),o=a.n(n);o.a},"9c0c":function(e,t,a){},"9efc":function(e,t,a){"use strict";var n=a("111a"),o=a.n(n);o.a},"9f40":function(e,t,a){"use strict";var n=a("560f"),o=a.n(n);o.a},a361:function(e,t,a){},a5b7:function(e,t,a){"use strict";var n=a("e401"),o=a.n(n);o.a},a5ee:function(e,t,a){},a682:function(e,t,a){},a6b7:function(e,t,a){"use strict";var n=a("e93b"),o=a.n(n);o.a},a7ba:function(e,t,a){var n={"./cn.json":"56e6","./en.json":"3673","./hk.json":"ccaf"};function o(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id="a7ba"},aadb:function(e,t,a){"use strict";var n=a("ff2a"),o=a.n(n);o.a},ab15:function(e,t,a){},ab22:function(e,t,a){"use strict";var n=a("59c5"),o=a.n(n);o.a},aba5:function(e,t,a){},aba7:function(e,t,a){},aed4:function(e,t,a){},af67:function(e,t,a){"use strict";var n=a("7666"),o=a.n(n);o.a},b1ab:function(e,t,a){"use strict";var n=a("3818"),o=a.n(n);o.a},b6ec:function(e,t,a){"use strict";var n=a("0b8f"),o=a.n(n);o.a},b86d:function(e,t,a){"use strict";var n=a("91fa"),o=a.n(n);o.a},b92d:function(e,t,a){},b959:function(e,t,a){},ba6b:function(e,t,a){},bcaf:function(e,t,a){"use strict";var n=a("c563"),o=a.n(n);o.a},bd89:function(e,t,a){"use strict";var n=a("4100"),o=a.n(n);o.a},bf7a:function(e,t,a){"use strict";var n=a("a361"),o=a.n(n);o.a},bfc3:function(e,t,a){},c3f9:function(e,t,a){},c563:function(e,t,a){},c878:function(e,t,a){},ca34:function(e,t,a){},ca35:function(e,t,a){},ccaf:function(e){e.exports=JSON.parse('{"messages":"訊息"}')},cd09:function(e,t,a){"use strict";var n=a("97ef"),o=a.n(n);o.a},cd49:function(e,t,a){"use strict";a.r(t);var n,o,i,s=a("5530"),r=(a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("a026")),l=a("5f5b"),c=a("b1e0"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"app",attrs:{id:"app"}},[a("router-view")],1)},m=[],p={mounted:function(){var e=this;e.$i18n.locale="en"}},f=p,g=(a("5c0b"),a("2877")),v=Object(g["a"])(f,u,m,!1,null,null,null),h=v.exports,b=a("ecee"),C=a("b702"),_=a("c074"),y=a("ad3d"),w=(a("d3b7"),a("8c4f")),x=a("2f62"),T=a("ade3"),k="FETCH_AGENTS",S="CLEAR_AGENTS",O="FETCH_SMTP_SERVERS",j={agents:[],agentsLoaded:!1,smtpServers:[]},I={agents:function(e){return e.agents},agentsLoaded:function(e){return e.agentsLoaded},smtpServers:function(e){return e.smtpServers}},E={setAgents:function(e,t){e.agents=t,e.agentsLoaded=!0},clearAgents:function(e,t){e.agents=[],e.agentsLoaded=!1},setSmtpServers:function(e,t){e.smtpServers=t}},F=(n={},Object(T["a"])(n,S,(function(e){var t=e.commit;e.rootGetters,e.dispatch;return new Promise((function(e,a){t("clearAgents"),e([])}))})),Object(T["a"])(n,O,(function(e,t){var a=e.commit,n=e.dispatch;return Promise((function(e,o){var i={urlCommand:"/agents/"+t.agentId+"/smtp_servers"};n("AUTH_GET",i).then((function(t){a("setSmtpServers",t),e(t)}),(function(e){o(e)}))}))})),Object(T["a"])(n,k,(function(e){var t=e.commit,a=e.rootGetters,n=e.dispatch;return new Promise((function(e,o){var i={urlCommand:"/agents",options:{params:{teamId:a.team.id}}};n("AUTH_GET",i).then((function(a){t("setAgents",a),e(a)}),(function(e){o(e)}))}))})),n),P={state:j,getters:I,mutations:E,actions:F},A=a("53ca"),D="USER_GET",H="COMMON_GET",N="COMMON_POST",R="COMMON_PUT",V="COMMON_DELETE",M="AUTH_GET",L="AUTH_POST",U="AUTH_PUT",q="AUTH_DELETE",B="AUTH_REFRESH",G="AUTH_UPLOAD_IMAGE",K="REFRESH_AUTH_GET",z="REFRESH_AUTH_POST",J="REFRESH_AUTH_PUT",Q=(a("a15b"),a("ac1f"),a("25f0"),a("5319"),a("1276"),a("498a"),function(){var e=new Date,t=e.getUTCMonth()+1,a=e.getUTCDate(),n=e.getUTCFullYear(),o=t<10?"0"+t.toString():t.toString(),i=a<10?"0"+a.toString():a.toString(),s=n.toString();return s+"-"+o+"-"+i}),W=function(e,t){return e+t.toLowerCase().replace(" ","_").replace(/[^a-z0-9_]/gi,"")},Y=function(e,t,a){"undefined"===typeof t&&(t="|"),"undefined"===typeof a&&(a=":");for(var n=e.split(t),o=[],i=0;i<n.length;i++){var s=n[i].split(a);o.push(s)}return o},X=function(e,t){if(e){var a=1;e.offset&&e.limit&&(a=Math.floor(e.offset/e.limit)+1),"undefined"===typeof t&&(t={}),t=Object(s["a"])(Object(s["a"])({},t),{},{params:Object(s["a"])(Object(s["a"])({},e),{},{page:a})})}return t},Z=function(e){for(var t=[],a=0;a<e.length;a++)""!==e[a]&&t.push(e[a].trim());return t.length>0?t.join(" "):""},ee=function(e,t,a){"undefined"===typeof t&&(t=e.$t("messages.unexpected_errors")),"undefined"===typeof a&&(a={okText:e.$t("buttons.ok"),cancelText:e.$t("buttons.cancel"),animation:"bounce"}),e.$dialog.alert({title:e.$t("general.warning"),body:t.toString()},a).then((function(){alert("alert")}))},te=function(e,t,a,n,o){"undefined"===typeof n&&(n=e.$t("messages.areYouSure")),"undefined"===typeof o&&(o={okText:e.$t("buttons.ok"),cancelText:e.$t("buttons.cancel"),animation:"bounce"}),e.$dialog.confirm({title:e.$t("general.confirmation"),body:n},o).then((function(){"function"===typeof t&&t(a)}))},ae={getKeyPairArray:Y,str2token:W,getToday:Q,addPagination:X,showWarning:ee,showConfirmDialog:te,array2str:Z},ne={},oe={},ie={},se=(o={},Object(T["a"])(o,q,(function(e,t){var a=e.rootGetters,n=e.dispatch,o=a.accessToken;return"object"!==Object(A["a"])(t)&&(t={urlCommand:t}),t.options||(t.options={}),t.options.headers={Authorization:"bearer "+o},n("COMMON_DELETE",t)})),Object(T["a"])(o,V,(function(e,t){var a=e.rootGetters;return new Promise((function(e,n){var o,i={};o="object"===Object(A["a"])(t)?t.urlCommand:t,t.options&&(i=t.options);var s=a.constants.apiUrl+o;r["default"].axios.delete(s,i).then((function(t){t.data.status?e(t.data.result):n(new Error(t.data.result))})).catch((function(e){n(e.response.data.result)}))}))})),Object(T["a"])(o,K,(function(e,t){var a=e.dispatch;return new Promise((function(e,n){a("AUTH_REFRESH").then((function(){"object"!==Object(A["a"])(t)&&(t={urlCommand:t}),t.options||(t.options={}),a("AUTH_GET",t).then((function(t){e(t)})).catch((function(e){n(e)}))}))}))})),Object(T["a"])(o,M,(function(e,t){var a=e.dispatch,n=e.rootGetters;return new Promise((function(e,o){var i=n.accessToken;"object"!==Object(A["a"])(t)&&(t={urlCommand:t}),t.options||(t.options={}),t.options.headers={Authorization:"bearer "+i},a("COMMON_GET",t).then((function(t){e(t)})).catch((function(e){o(e)}))}))})),Object(T["a"])(o,H,(function(e,t){var a=e.rootGetters;return new Promise((function(e,n){var o,i={};if("object"===Object(A["a"])(t)){if(o=t.urlCommand,t.urlCommand=null,t.options&&(i=Object(s["a"])({},t.options)),t.query){var l=ae.addPagination(t.query);i.params||(i.params={}),i.params=Object(s["a"])(Object(s["a"])({},i.params),l.params)}}else o=t;var c=a.apiUrl+o;r["default"].axios.get(c,i).then((function(t){t.data.status?e(t.data.result):n(t.data.result)})).catch((function(e){n(e)}))}))})),Object(T["a"])(o,B,(function(e,t){var a=e.rootGetters,n=(e.commit,e.dispatch);return new Promise((function(e,t){var o=a.constants.apiUrl+"/auth/refresh";if(a.accessToken){var i={headers:{Authorization:"bearer "+a.accessToken}};r["default"].axios.post(o,{},i).then((function(t){var a=t.data.result.access_token;n("SET_TOKEN",a).then((function(){e(a)}))})).catch((function(e){t(e.response.data)}))}else t(new Error("no access token"))}))})),Object(T["a"])(o,z,(function(e,t){var a=e.dispatch;return new Promise((function(e,n){a("AUTH_REFRESH").then((function(){"object"!==Object(A["a"])(t)&&(t={urlCommand:t}),t.options||(t.options={}),a("AUTH_POST",t).then((function(t){e(t)})).catch((function(e){n(e)}))}))}))})),Object(T["a"])(o,L,(function(e,t){var a=e.dispatch,n=e.rootGetters;return new Promise((function(e,o){"object"!==Object(A["a"])(t)&&(t={urlCommand:t}),t.options||(t.options={}),t.options.headers={Authorization:"bearer "+n.accessToken},a("COMMON_POST",t).then((function(t){e(t)})).catch((function(e){console.log("AUTH_POST error: ",e),o(e)}))}))})),Object(T["a"])(o,L+"0",(function(e,t){var a=e.dispatch,n=e.rootGetters;return new Promise((function(e,o){"object"!==Object(A["a"])(t)&&(t={urlCommand:t}),t.options||(t.options={}),t.options.headers={Authorization:"bearer "+n.accessToken},a("COMMON_POST",t).then((function(t){e(t)})).catch((function(e){console.log("AUTH_POST error: ",e),o(e)}))}))})),Object(T["a"])(o,G,(function(e,t){var a=e.rootGetters;return new Promise((function(e,n){var o=a.apiUrl+"/media/upload_image",i=t,s={headers:{Authorization:"bearer "+a.accessToken}};r["default"].axios.post(o,i,s).then((function(t){e(t.data)}),(function(e){n(e)}))}))})),Object(T["a"])(o,N,(function(e,t){var a=e.rootGetters;return new Promise((function(e,n){var o,i,s={};"object"===Object(A["a"])(t)?(o=t.urlCommand,i=t.data):o=t,t.options&&(s=t.options);var l=a.constants.apiUrl+o;r["default"].axios.post(l,i,s).then((function(t){t.data.status?e(t.data.result):n(t.data.result)})).catch((function(e){e.response.data&&e.response.data.result&&n(e.response.data.result),n(e.response.data)}))}))})),Object(T["a"])(o,D,(function(e,t){var a=e.rootGetters;return new Promise((function(e,n){var o,i,s={};"object"===Object(A["a"])(t)?(o=t.urlCommand,i=t.data):o=t,t.options&&(s=t.options);var l=a.constants.appHost+o;r["default"].axios.get(l,i,s).then((function(t){t.data.status?e(t.data.result):n(t.data.result)})).catch((function(e){e.response.data&&e.response.data.result&&n(e.response.data.result),n(e.response.data)}))}))})),Object(T["a"])(o,J,(function(e,t){var a=e.dispatch;return new Promise((function(e,n){a("AUTH_REFRESH").then((function(){"object"!==Object(A["a"])(t)&&(t={urlCommand:t}),t.options||(t.options={}),a("AUTH_PUT",t).then((function(t){e(t)})).catch((function(e){n(e)}))}))}))})),Object(T["a"])(o,U,(function(e,t){var a=e.rootGetters,n=e.dispatch;return new Promise((function(e,o){"object"!==Object(A["a"])(t)&&(t={urlCommand:t}),t.options||(t.options={}),t.options.headers={Authorization:"bearer "+a.accessToken},n("COMMON_PUT",t).then((function(t){e(t)})).catch((function(e){o(e)}))}))})),Object(T["a"])(o,R,(function(e,t){var a=e.rootGetters;return new Promise((function(e,n){var o,i,s={};"object"===Object(A["a"])(t)?(o=t.urlCommand,i=t.data):o=t,t.options&&(s=t.options);var l=a.constants.apiUrl+o;r["default"].axios.put(l,i,s).then((function(t){t.data.status?e(t.data.result):n(new Error(t.data.result))})).catch((function(e){n(e.response)}))}))})),o),re={state:ne,getters:oe,mutations:ie,actions:se},le=(a("96cf"),a("1da1")),ce="FETCH_CONSTANTS",de={constants:{apiUrl:"",appHost:""}},ue={constants:function(e){return e.constants},apiUrl:function(e){return e.constants?e.constants.apiUrl:""},appHost:function(e){return e.constants?e.constants.appHost:""}},me={setConstants:function(e,t){e.constants=t}},pe=Object(T["a"])({},ce,(function(e){return Object(le["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,n={apiUrl:"https://ticket.yoov.com/apiv2",appHost:"https://ticket.yoov.com"},a("setConstants",n);case 3:case"end":return t.stop()}}),t)})))()})),fe={state:de,getters:ue,mutations:me,actions:pe},ge="FETCH_INPUT_OBJS_INFO",ve={inputObjsInfo:null,DEFAULT_PAGE_CONFIGS:{name:"",inputType:"system-page",question:"",required:!0,note1:"",note2:"",options:["background-color:white;color:black;font-size:14px;max-width:640px;padding-top:60px;"]},inputObjTypes:[{icon:"fas fa-home",newIcon:"home",text:"",label:"Page",type:"system-page",isInput:!0,fixed:!0},{icon:"fas fa-image",newIcon:"image",text:"",label:"Image",type:"output-image",isInput:!1},{icon:"",newIcon:"",text:"ABC",label:"Remark",type:"output-remark",isInput:!1},{icon:"fas fa-bolt",newIcon:"bolt",text:"",label:"Submit Btn",type:"output-submit",isInput:!1},{icon:"fas fa-i-cursor",newIcon:"i-cursor",text:"",label:"1-line Text",type:"simple-text",isInput:!0,default:{caption:"備註",question:"備註"}},{icon:"",newIcon:"",text:"123",label:"Number",type:"number",isInput:!0},{icon:"fas fa-envelope",newIcon:"envelope",text:"",label:"Email",type:"email",isInput:!0,default:{caption:"電郵",question:"電郵地址"}},{icon:"fas fa-align-justify",newIcon:"align-justify",text:"",label:"n-line Text",type:"text",isInput:!0,default:{caption:"備註多行",question:"備註 (多行)"}},{icon:"fas fa-user",newIcon:"user",text:"",label:"Name",type:"name",isInput:!0,default:{caption:"名字,姓氏",question:"姓名",note1:"名字",note2:"姓氏"}},{icon:"fas fa-venus-mars",newIcon:"venus-mars",text:"",label:"Gender",type:"gender",isInput:!0,default:{caption:"性別",question:"性別",options:["男","女"]}},{icon:"fas fa-phone",newIcon:"phone",text:"",label:"Phone",type:"phone",isInput:!0,default:{caption:"手機號碼",question:"手機號碼"}},{icon:"fas fa-check-square",newIcon:"check-square",text:"",label:"Choice",type:"single-choice",isInput:!0,default:{caption:"選擇項目",question:"選擇項目"}},{icon:"fas fa-tasks",newIcon:"tasks",text:"",label:"Multi-Choice",type:"multiple-choice",isInput:!0,default:{caption:"多選項目",question:"多選項目"}}],attributeInfos:{width:{caption:"Width",styleName:"width",optionGroup:"elementGroup"},bgColor:{caption:"Background Color",styleName:"background-color",optionGroup:"elementGroup"},maxWidth:{caption:"Max. Width",styleName:"max-width",optionGroup:"elementGroup"},height:{caption:"Height",styleName:"height",optionGroup:"elementGroup"},alignment:{caption:"Alignment",styleName:"text-align",optionGroup:"containerGroup"},pageFontSize:{caption:"Font Size",styleName:"font-size",optionGroup:"elementGroup"},fontSize:{caption:"Font Size",styleName:"font-size",optionGroup:"containerGroup"},textColor:{caption:"Text Color",styleName:"color",optionGroup:"elementGroup"},paddingTop:{caption:"Padding (Top)",styleName:"padding-top",optionGroup:"elementGroup"},paddingBottom:{caption:"Padding (Bottom)",styleName:"padding-bottom",optionGroup:"elementGroup"},paddingLeft:{caption:"Padding (Left)",styleName:"padding-left",optionGroup:"elementGroup"},paddingRight:{caption:"Padding (Right)",styleName:"padding-right",optionGroup:"elementGroup"},color:{caption:"Color",styleName:"background-color",optionGroup:"elementGroup"},selectedChoiceColor:{caption:"Selected Choice Color",styleName:"selected-choice-color",optionGroup:"elementGroup"},selectedChoiceTextColor:{caption:"Selected Choice Text Color",styleName:"selected-choice-text-color",optionGroup:"elementGroup"},inputRegionMaxWidth:{caption:"Input Region Max Width",styleName:"input-region-max-width",optionGroup:"elementGroup"},containerPaddingTop:{caption:"Padding (Top)",styleName:"padding-top",optionGroup:"containerGroup"},containerPaddingBottom:{caption:"Padding (Bottom)",styleName:"padding-bottom",optionGroup:"containerGroup"},containerPaddingLeft:{caption:"Padding (Left)",styleName:"padding-left",optionGroup:"containerGroup"},containerPaddingRight:{caption:"Padding (Right)",styleName:"padding-right",optionGroup:"containerGroup"},containerBackgroundColor:{caption:"Background Color",styleName:"background-color",optionGroup:"containerGroup"}},objAttributeGroups:{"system-page":[{caption:"",attributeKeys:["maxWidth","bgColor","pageFontSize","textColor","paddingTop","selectedChoiceColor","selectedChoiceTextColor","inputRegionMaxWidth"]}],"output-image":[{caption:"Attributes",attributeKeys:["width","height","alignment"]},{caption:"Container Attributes",attributeKeys:["containerPaddingTop","containerPaddingBottom","containerPaddingLeft","containerPaddingRight","containerBackgroundColor"]}],"output-remark":[{caption:"Attributes",attributeKeys:["width","height","alignment","fontSize","textColor"]},{caption:"Container Attributes",attributeKeys:["containerPaddingTop","containerPaddingBottom","containerPaddingLeft","containerPaddingRight","containerBackgroundColor"]}],"output-submit":[{caption:"Attributes",attributeKeys:["width","height","alignment","fontSize","textColor","paddingTop","paddingBottom","paddingLeft","paddingRight","color"]},{caption:"Container Attributes",attributeKeys:["containerPaddingTop","containerPaddingBottom","containerPaddingLeft","containerPaddingRight","containerBackgroundColor"]}]},inputObjsInfoLoaded:!1},he={DEFAULT_PAGE_CONFIGS:function(e){return e.inputObjsInfo?e.inputObjsInfo.defaultPageConfigs:null},DEFAULT_FORM_CONFIGS:function(e){return e.inputObjsInfo?{inputObjs:[e.inputObjsInfo.defaultPageConfigs]}:null},inputObjTypes:function(e){return e.inputObjsInfo?e.inputObjsInfo.inputObjTypes:[]},attributeInfos:function(e){return e.inputObjsInfo?e.inputObjsInfo.attributeInfos:[]},objAttributeGroups:function(e){return e.inputObjsInfo?e.inputObjsInfo.objAttributeGroups:[]},iconList:function(e){return e.inputObjsInfo?e.iconList:[]},inputObjsInfoLoaded:function(e){return e.inputObjsInfoLoaded}},be={DEFAULT_PAGE_CONFIGS:function(e){return e.DEFAULT_PAGE_CONFIGS},DEFAULT_FORM_CONFIGS:function(e){return{inputObjs:[e.DEFAULT_PAGE_CONFIGS]}},inputObjTypes:function(e){return e.inputObjTypes},attributeInfos:function(e){return e.attributeInfos},objAttributeGroups:function(e){return e.objAttributeGroups},iconList:function(e){for(var t=[],a=0;a<e.inputObjTypes.length;a++){var n=e.inputObjTypes[a];t[n.type]={icon:n.icon,text:n.text}}return t},inputObjsInfoLoaded:function(e){return e.inputObjsInfoLoaded}},Ce={setInputObjsInfo:function(e,t){e.inputObjsInfo=t,e.inputObjsInfoLoaded=!0}},_e=Object(T["a"])({},ge,(function(e){var t=e.commit,a=e.dispatch;return new Promise((function(e,n){var o={urlCommand:"/input_objs_info"};a("AUTH_GET",o).then((function(a){t("setInputObjsInfo",a),e(a)}),(function(e){n(e)}))}))})),ye={state:ve,getters:he,getters2:be,mutations:Ce,actions:_e},we="FETCH_TOKEN",xe="REFRESH_TOKEN",Te="SET_TOKEN",ke="SET_USER",Se="FETCH_USER",Oe="FETCH_SYSTEM_CONFIGS",$e="FETCH_USER_SETTINGS",je="UPDATE_USER_SETTING",Ie=a("782e"),Ee=a.n(Ie),Fe={accessToken:"",user:null,userSettings:{},team:{id:1},pusher:null,systemConfigs:[],systemConfigsLoaded:!1},Pe={accessToken:function(e){return e.accessToken},user:function(e){return e.user},team:function(e){return e.team},pusher:function(e){return e.pusher},allChannels:function(e){return e.pusher.allChannels()},systemConfigs:function(e){return e.systemConfigs},systemConfigsLoaded:function(e){return e.systemConfigsLoaded},userSettings:function(e){return e.userSettings}},Ae={setUser:function(e,t){e.user=t},setAccessToken:function(e,t){e.accessToken=t;var a=localStorage.getItem("accessToken");t!==a&&localStorage.setItem("accessToken",t)},setSystemConfigs:function(e,t){e.systemConfigs=t,e.systemConfigsLoaded=!0,"websocketsyoov"===t.pusher_key?e.pusher=new Ee.a(t.pusher_key,{cluster:t.pusher_cluster,httpHost:t.pusher_host,httpPort:parseInt(t.push_port)}):e.pusher=new Ee.a(t.pusher_key,{encrypted:!0,cluster:t.pusher_cluster})},setUserSettings:function(e,t){e.userSettings=t},updateUserSetting:function(e,t){e.userSettings[t.keyName]=t.keyValue}},De=(i={},Object(T["a"])(i,we,(function(e){return Object(le["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.abrupt("return",new Promise((function(e){var t=localStorage.getItem("accessToken")||"";a("setAccessToken",t),e(t)})));case 2:case"end":return t.stop()}}),t)})))()})),Object(T["a"])(i,Te,(function(e,t){var a=e.commit,n=e.getters;return new Promise((function(e){n.accessToken!==t?(localStorage.setItem("accessToken",t),a("setAccessToken",t),e(t)):e(t)}))})),Object(T["a"])(i,ke,(function(e,t){var a=e.commit,n=e.getters;return new Promise((function(e){n.user!==t?(a("setUser",t),e(t)):e(t)}))})),Object(T["a"])(i,Se,(function(e){var t=e.commit,a=e.dispatch;return new Promise((function(e,n){a("AUTH_POST","/auth/me").then((function(n){a("FETCH_USER_SETTINGS"),t("setUser",n),e(n)}),(function(e){n(e)}))}))})),Object(T["a"])(i,je,(function(e,t){var a=e.commit,n=e.dispatch,o=e.getters;a("updateUserSetting",t);var i={urlCommand:"/users/settings",data:o.userSettings};n("AUTH_POST",i).then((function(e){}))})),Object(T["a"])(i,$e,(function(e){var t=e.commit,a=e.dispatch,n={urlCommand:"/users/settings"};a("AUTH_GET",n).then((function(e){t("setUserSettings",e)}))})),Object(T["a"])(i,Oe,(function(e){var t=e.commit,a=(e.rootGetters,e.dispatch),n={urlCommand:"/system/configs"};a("AUTH_GET",n).then((function(e){t("setSystemConfigs",e)}))})),Object(T["a"])(i,xe,(function(e){var t=e.commit,a=e.rootGetters,n=e.getters;return new Promise((function(e,o){var i=a.apiUrl+"/auth/refresh";if(""===n.accessToken)e(n.accessToken);else{var s={headers:{Authorization:"Bearer "+n.accessToken,Accept:"application/json"}};r["default"].axios.post(i,{},s).then((function(a){var n=a.data.result,o=n.access_token;localStorage.setItem("accessToken",o),t("setAccessToken",o),e(o)})).catch((function(e){t("setAccessToken",""),o(e.response)}))}}))})),i),He={state:Fe,getters:Pe,mutations:Ae,actions:De};r["default"].use(x["a"]);var Ne,Re,Ve=new x["a"].Store({state:{},mutations:{},actions:{},modules:{agents:P,common:re,constants:fe,inputObjTypes:ye,system:He}}),Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"base-layout",staticStyle:{"padding-top":"56px"}},[a("base-navbar"),a("router-view")],1)},Le=[],Ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"home-page navbar fixed-top navbar-expand-lg navbar-dark bg-dark"},[a("div",{staticClass:"container"},[a("a",{staticClass:"navbar-brand",attrs:{href:"index.html"}},[e._v(" "+e._s(e.$t("login.digital_coupon"))),a("br"),a("span",{staticClass:"brand-notes"},[e._v(" "+e._s(e.$t("login._brandNotes_"))+" ")])]),a("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item",{attrs:{href:"#"},on:{click:function(t){return e.$router.push({name:"about"})}}},[e._v("About")]),a("b-nav-item",{attrs:{href:"#"},on:{click:function(t){return e.$router.push({name:"about"})}}},[e._v("Service")]),a("b-nav-item",{attrs:{href:"#"},on:{click:function(t){return e.$router.push({name:"about"})}}},[e._v("Contact")])],1),e.user?a("b-navbar-nav",[a("b-nav-item-dropdown",{attrs:{text:e.user.name,right:""}},[a("b-dropdown-item",{attrs:{href:"#"},on:{click:function(t){return e.$router.push({name:"vouchers"})}}},[e._v(e._s(e.$t("menu.vouchers")))]),a("b-dropdown-item",{attrs:{href:"#"},on:{click:function(t){return e.$router.push({name:"Profile"})}}},[e._v(e._s(e.$t("user.profile")))]),a("b-dropdown-item",{attrs:{href:"#"},on:{click:function(t){return e.$router.push({name:"Logout"})}}},[e._v(e._s(e.$t("auth.logout")))])],1)],1):a("b-navbar-nav",[a("b-nav-item",{attrs:{href:"#"},on:{click:function(t){return e.$router.push({name:"Login"})}}},[e._v(e._s(e.$t("login.login")))]),a("b-nav-item",{attrs:{href:"#"},on:{click:function(t){return e.$router.push({name:"Register"})}}},[e._v(e._s(e.$t("login.register")))])],1)],1)],1)])},qe=[],Be={computed:{user:function(){var e=this;return e.$store.getters.user}}},Ge=Be,Ke=Object(g["a"])(Ge,Ue,qe,!1,null,null,null),ze=Ke.exports,Je={components:{baseNavbar:ze}},Qe=Je,We=Object(g["a"])(Qe,Me,Le,!1,null,null,null),Ye=We.exports,Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("home-carousel"),e._m(0),e._m(1)],1)},Ze=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("h1",{staticClass:"my-4"},[e._v("Welcome to Modern Business")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-4 mb-4"},[a("div",{staticClass:"card h-100"},[a("h4",{staticClass:"card-header"},[e._v("Card Title")]),a("div",{staticClass:"card-body"},[a("p",{staticClass:"card-text"},[e._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sapiente esse necessitatibus neque.")])]),a("div",{staticClass:"card-footer"},[a("a",{staticClass:"btn btn-primary",attrs:{href:"#"}},[e._v("Learn More")])])])]),a("div",{staticClass:"col-lg-4 mb-4"},[a("div",{staticClass:"card h-100"},[a("h4",{staticClass:"card-header"},[e._v("Card Title")]),a("div",{staticClass:"card-body"},[a("p",{staticClass:"card-text"},[e._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit. Reiciendis ipsam eos, nam perspiciatis natus commodi similique totam consectetur praesentium molestiae atque exercitationem ut consequuntur, sed eveniet, magni nostrum sint fuga.")])]),a("div",{staticClass:"card-footer"},[a("a",{staticClass:"btn btn-primary",attrs:{href:"#"}},[e._v("Learn More")])])])]),a("div",{staticClass:"col-lg-4 mb-4"},[a("div",{staticClass:"card h-100"},[a("h4",{staticClass:"card-header"},[e._v("Card Title")]),a("div",{staticClass:"card-body"},[a("p",{staticClass:"card-text"},[e._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sapiente esse necessitatibus neque.")])]),a("div",{staticClass:"card-footer"},[a("a",{staticClass:"btn btn-primary",attrs:{href:"#"}},[e._v("Learn More")])])])])]),a("h2",[e._v("Portfolio Heading")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-4 col-sm-6 portfolio-item"},[a("div",{staticClass:"card h-100"},[a("a",{attrs:{href:"#"}},[a("img",{staticClass:"card-img-top",attrs:{src:"http://placehold.it/700x400",alt:""}})]),a("div",{staticClass:"card-body"},[a("h4",{staticClass:"card-title"},[a("a",{attrs:{href:"#"}},[e._v("Project One")])]),a("p",{staticClass:"card-text"},[e._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet numquam aspernatur eum quasi sapiente nesciunt? Voluptatibus sit, repellat sequi itaque deserunt, dolores in, nesciunt, illum tempora ex quae? Nihil, dolorem!")])])])]),a("div",{staticClass:"col-lg-4 col-sm-6 portfolio-item"},[a("div",{staticClass:"card h-100"},[a("a",{attrs:{href:"#"}},[a("img",{staticClass:"card-img-top",attrs:{src:"http://placehold.it/700x400",alt:""}})]),a("div",{staticClass:"card-body"},[a("h4",{staticClass:"card-title"},[a("a",{attrs:{href:"#"}},[e._v("Project Two")])]),a("p",{staticClass:"card-text"},[e._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida pellentesque urna varius vitae.")])])])]),a("div",{staticClass:"col-lg-4 col-sm-6 portfolio-item"},[a("div",{staticClass:"card h-100"},[a("a",{attrs:{href:"#"}},[a("img",{staticClass:"card-img-top",attrs:{src:"http://placehold.it/700x400",alt:""}})]),a("div",{staticClass:"card-body"},[a("h4",{staticClass:"card-title"},[a("a",{attrs:{href:"#"}},[e._v("Project Three")])]),a("p",{staticClass:"card-text"},[e._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quos quisquam, error quod sed cumque, odio distinctio velit nostrum temporibus necessitatibus et facere atque iure perspiciatis mollitia recusandae vero vel quam!")])])])]),a("div",{staticClass:"col-lg-4 col-sm-6 portfolio-item"},[a("div",{staticClass:"card h-100"},[a("a",{attrs:{href:"#"}},[a("img",{staticClass:"card-img-top",attrs:{src:"http://placehold.it/700x400",alt:""}})]),a("div",{staticClass:"card-body"},[a("h4",{staticClass:"card-title"},[a("a",{attrs:{href:"#"}},[e._v("Project Four")])]),a("p",{staticClass:"card-text"},[e._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida pellentesque urna varius vitae.")])])])]),a("div",{staticClass:"col-lg-4 col-sm-6 portfolio-item"},[a("div",{staticClass:"card h-100"},[a("a",{attrs:{href:"#"}},[a("img",{staticClass:"card-img-top",attrs:{src:"http://placehold.it/700x400",alt:""}})]),a("div",{staticClass:"card-body"},[a("h4",{staticClass:"card-title"},[a("a",{attrs:{href:"#"}},[e._v("Project Five")])]),a("p",{staticClass:"card-text"},[e._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida pellentesque urna varius vitae.")])])])]),a("div",{staticClass:"col-lg-4 col-sm-6 portfolio-item"},[a("div",{staticClass:"card h-100"},[a("a",{attrs:{href:"#"}},[a("img",{staticClass:"card-img-top",attrs:{src:"http://placehold.it/700x400",alt:""}})]),a("div",{staticClass:"card-body"},[a("h4",{staticClass:"card-title"},[a("a",{attrs:{href:"#"}},[e._v("Project Six")])]),a("p",{staticClass:"card-text"},[e._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit. Itaque earum nostrum suscipit ducimus nihil provident, perferendis rem illo, voluptate atque, sit eius in voluptates, nemo repellat fugiat excepturi! Nemo, esse.")])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("h2",[e._v("Modern Business Features")]),a("p",[e._v("The Modern Business template by Start Bootstrap includes:")]),a("ul",[a("li",[a("strong",[e._v("Bootstrap v4")])]),a("li",[e._v("jQuery")]),a("li",[e._v("Font Awesome")]),a("li",[e._v("Working contact form with validation")]),a("li",[e._v("Unstyled page elements for easy customization")])]),a("p",[e._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit. Corporis, omnis doloremque non cum id reprehenderit, quisquam totam aspernatur tempora minima unde aliquid ea culpa sunt. Reiciendis quia dolorum ducimus unde.")])]),a("div",{staticClass:"col-lg-6"},[a("img",{staticClass:"img-fluid rounded",attrs:{src:"http://placehold.it/700x450",alt:""}})])]),a("hr"),a("div",{staticClass:"row mb-4"},[a("div",{staticClass:"col-md-8"},[a("p",[e._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit. Molestias, expedita, saepe, vero rerum deleniti beatae veniam harum neque nemo praesentium cum alias asperiores commodi.")])]),a("div",{staticClass:"col-md-4"},[a("a",{staticClass:"btn btn-lg btn-secondary btn-block",attrs:{href:"#"}},[e._v("Call to Action")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{staticClass:"py-5 bg-dark"},[a("div",{staticClass:"container"},[a("p",{staticClass:"m-0 text-center text-white"},[e._v("Copyright © Your Website 2019")])])])}],et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("carousel",{attrs:{"per-page":1}},[a("slide",{staticClass:"text-center"},[e._v(" Slide 1 Content ")]),a("slide",{staticClass:"text-center"},[e._v(" Slide 2 Content ")]),a("slide",{staticClass:"text-center"},[e._v(" Slide 3 Content ")])],1)},tt=[],at={},nt=Object(g["a"])(at,et,tt,!1,null,null,null),ot=nt.exports,it={name:"Home",components:{homeCarousel:ot},mounted:function(){alert("Home :: mounted")}},st=it,rt=(a("1476"),Object(g["a"])(st,Xe,Ze,!1,null,null,null)),lt=rt.exports,ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("app-navbar"),a("main-sidebar"),a("div",{staticClass:"content-wrapper"},[a("router-view")],1),a("app-footer"),a("control-sidebar")],1)},dt=[],ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"main-header navbar navbar-expand navbar-white navbar-light",class:{"is-demo":e.isDemo}},[a("h1",{staticClass:"m-0 p-0 text-center text-white position-absolute left-0 top-0 w-100",staticStyle:{left:"-1px"}},[e._v("DEMO")]),a("ul",{staticClass:"navbar-nav mr-auto"},[e._m(0),e._l(e.topMenu,(function(t,n){return a("li",{key:n,staticClass:"nav-item d-none d-sm-inline-block"},[a("router-link",{staticClass:"nav-link",attrs:{to:t.link}},[e._v(e._s(e.$t("menu."+t.labelTag)))])],1)}))],2),a("ul",{staticClass:"navbar-nav"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/logout"}},[a("i",{staticClass:"fas fa-sign-out-alt mr-1"}),e._v(e._s(e.$t("buttons.logout")))])],1)])])},mt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{"data-widget":"pushmenu",href:"#"}},[a("i",{staticClass:"fas fa-bars"})])])}],pt=a("5623"),ft=a.n(pt),gt={},vt=Object(g["a"])(gt,Ne,Re,!1,null,null,null);"function"===typeof ft.a&&ft()(vt);var ht,bt,Ct,_t,yt,wt,xt,Tt,kt,St=vt.exports,Ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-dropdown",{attrs:{id:e.menu.id,variant:"link",dropleft:"","toggle-class":"text-decoration-none d-flex justify-content-start","no-caret":""},scopedSlots:e._u([{key:"button-content",fn:function(){return[a("i",{class:e.menu.iconClass}),""!==e.menu.badgeValue?a("span",{staticClass:"badge navbar-badge",class:e.badgeClass},[e._v(e._s(e.menu.badgeValue))]):e._e()]},proxy:!0}])},[e._l(e.menu.children,(function(t,n){return["header"===t.type?a("span",{key:n,staticClass:"dropdown-item dropdown-header"},[e._v(" "+e._s(t.message)+" ")]):"footer"===t.type?a("a",{key:n,staticClass:"dropdown-item dropdown-footer",attrs:{href:"#"}},[e._v(" "+e._s(t.message))]):"divider"===t.type?a("b-dropdown-divider",{key:n}):"media"===t.type?a("app-navbar-dropdown-menu-item-media",{key:n,attrs:{item:t}}):"link"===t.type?a("a",{key:n,staticClass:"dropdown-item",attrs:{href:t.link}},[a("i",{staticClass:"mr-2",class:t.iconClass}),e._v(e._s(t.message)+" "),a("span",{staticClass:"float-right text-muted text-sm"},[e._v(e._s(t.note))])]):e._e()]}))],2)},$t=[],jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-dropdown-item",[a("div",{staticClass:"media"},[a("img",{class:e.item.imgClass,attrs:{src:e.item.imgSrc,alt:e.item.imgAlt}}),a("div",{staticClass:"media-body"},[a("h3",{staticClass:"dropdown-item-title"},[e._v(" "+e._s(e.item.title)+" "),e.item.rightIcon?a("span",{staticClass:"float-right text-sm",class:e.item.rightIcon.iconVariant},[a("i",{class:e.item.rightIcon.iconClass})]):e._e()]),e._l(e.item.messages,(function(t,n){return a("p",{staticClass:"text-sm",class:t.textVariant},[t.iconClass?a("i",{attrs:{iconClass:t.iconClass}}):e._e(),e._v(" "+e._s(t.text)+" ")])}))],2)])])},It=[],Et={computed:{iconCssClass:function(){var e=this;return"text-"+e.item.iconVariant}},props:{item:{type:Object,default:function(){return{type:"media",imgSrc:"",imgAlt:"",title:"",rightIcon:null,messages:[]}}}}},Ft=Et,Pt=Object(g["a"])(Ft,jt,It,!1,null,null,null),At=Pt.exports,Dt={components:{appNavbarDropdownMenuItemMedia:At},computed:{badgeClass:function(){var e=this;return"badge-"+e.badgeVariant}},props:{menu:{type:Object,default:function(){return{id:"",iconClass:"",badgeVariant:"info",badgeValue:"",children:[]}}}}},Ht=Dt,Nt=Object(g["a"])(Ht,Ot,$t,!1,null,null,null),Rt=Nt.exports,Vt={components:{appNavbarSearchForm:St,appNavbarDropdownMenu:Rt},computed:{isDemo:function(){return"ticket.yoov.com"!==location.hostname}},data:function(){return{topMenu:[],messageMenu:{iconClass:"far fa-comments",badgeVariant:"danger",badgeValue:3,children:[{type:"media",imgSrc:"/img/user1-128x128.jpg",imgAlt:"User Avatar",imgClass:"img-size-50 mr-3 img-circle",title:"Brad Diesel",rightIcon:{iconVariant:"text-danger",iconClass:"fas fa-star"},messages:[{text:"Call me whenever you can...",textVariant:""},{text:"4 Hours ago",iconClass:"far fa-clock mr-1",textVariant:"text-muted"}]},{type:"divider"},{type:"media",imgSrc:"/img/user8-128x128.jpg",imgAlt:"User Avatar",imgClass:"img-size-50 mr-3 img-circle",title:"John Pierce",rightIcon:{iconVariant:"text-muted",iconClass:"fas fa-star"},messages:[{text:"got your message bro",textVariant:""},{text:"4 Hours Ago",iconClass:"fa fa-clock mr-1",textVariant:"text-muted"}]},{type:"divider"},{type:"media",imgSrc:"/img/user3-128x128.jpg",imgAlt:"User Aavatar",imgClass:"img-size-50 mr-3 img-circle",title:"Nora Silverster",rightIcon:{iconVariant:"text-warning",iconClass:"fas fa-star"},messages:[{text:"The subject goes here"},{text:"4 Hours ago",iconClass:"far fa-clock mr-1",textVariant:"text-muted"}]},{type:"divider"},{type:"footer",link:"#",message:"See All Messages"}]},notificationMenu:{iconClass:"fas fa-bell",badgeVaiant:"warning",badgeValue:15,children:[{type:"header",message:"15 Notifications"},{type:"divider"},{type:"link",link:"#",iconClass:"fas fa-envelope",message:"4 new messages",note:"3 mins"},{type:"divider"},{type:"link",link:"#",iconClass:"fas fa-users",message:"8 friend requests",note:"12 hours"},{type:"divider"},{type:"link",link:"#",iconClass:"far fa-comments",message:"3 new reports",note:"2 days"},{type:"divider"},{type:"footer",link:"#",message:"See All Notifications"}]}}},props:{hasSearch:{type:Boolean,default:!1}}},Mt=Vt,Lt=(a("727d"),Object(g["a"])(Mt,ut,mt,!1,null,null,null)),Ut=Lt.exports,qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("aside",{staticClass:"main-sidebar sidebar-dark-primary elevation-4"},[a("sidebar-brand-logo",{attrs:{logoSrc:"/img/brand_logo.png"}}),a("div",{staticClass:"sidebar"},[a("sidebar-user-panel"),a("nav",{staticClass:"mt-2"},[e.loading?a("h4",{staticClass:"mt-5 text-center text-light"},[a("i",{staticClass:"fa fa-spinner fa-spin"})]):a("sidebar-menu",{attrs:{menu:e.mainMenu}})],1)],1)],1)},Bt=[],Gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"brand-link",attrs:{href:"index3.html"}},[a("img",{staticClass:"brand-image  elevation-3",staticStyle:{opacity:".8"},attrs:{src:e.logoSrc,alt:"AdminLTE Logo"}}),a("span",{staticClass:"brand-text font-weight-light"},[e._v(e._s(e.$t("general.brand_text")))])])},Kt=[],zt={props:{logoSrc:{type:String,default:"#"}}},Jt=zt,Qt=Object(g["a"])(Jt,Gt,Kt,!1,null,null,null),Wt=Qt.exports,Yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-panel mt-3 pb-3 mb-3 d-flex flex-row align-items-center line-height-1"},[a("img",{staticClass:"img-circle elevation-2",attrs:{src:e.avatarUrl,alt:"User Image"}}),e.user?a("div",{staticClass:"info"},[a("a",{staticClass:"d-block",attrs:{href:"#"}},[e._v(e._s(e.user.name))]),a("div",{staticClass:"badge badge-primary"},[e._v(e._s(e.user.email))])]):e._e()])},Xt=[],Zt={computed:{user:function(){var e=this;return e.$store.getters.user},avatarUrl:function(){return"/img/user.png"}}},ea=Zt,ta=Object(g["a"])(ea,Yt,Xt,!1,null,null,null),aa=ta.exports,na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"nav nav-pills nav-sidebar flex-column",attrs:{"data-widget":"treeview",role:"menu","data-accordion":"false"}},e._l(e.menu,(function(t){return a("li",{key:t.id,staticClass:"nav-item"},["group"===t.type?[a("sidebar-menu-item-title",{attrs:{item:t}}),"group"===t.type?a("ul",{staticClass:"nav nav-treeview"},e._l(t.children,(function(e){return a("li",{key:e.label_tag,staticClass:"nav-item"},[a("sidebar-menu-item-link",{attrs:{item:e}})],1)})),0):e._e()]:[a("sidebar-menu-item-link",{attrs:{item:t}})]],2)})),0)},oa=[],ia=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"nav-link",attrs:{href:"#"}},[a("i",{staticClass:"nav-icon",class:e.item.icon_class}),a("p",[e._v(" "+e._s(e.$t(e.item.label_tag))+" "),"group"===e.item.type?a("i",{staticClass:"fas fa-angle-left right"}):e._e(),e.item.badge?a("span",{staticClass:"right badge",class:e.getBadgeClass},[e._v(" "+e._s(e.item.badge))]):e._e()])])},sa=[],ra=(a("9911"),{props:{item:{type:Object,default:null}},computed:{getBadgeClass:function(){var e=this;return e.item.badge_class?"badge-"+e.item.badge_class:"badge-primary"},link:function(){var e=this;return"group"===e.item.type?"#":e.item.link}}}),la=ra,ca=Object(g["a"])(la,ia,sa,!1,null,null,null),da=ca.exports,ua=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-link",{ref:"link",staticClass:"nav-link d-flex flex-row line-height-1 align-items-center",attrs:{to:{name:e.targetRoute}}},[a("i",{staticClass:"nav-icon",class:e.item.icon_class}),a("div",{staticClass:"ml-2 d-inline"},[e._v(" "+e._s(e.$t(e.item.label_tag))+" "),"group"===e.item.type?a("i",{staticClass:"fas fa-angle-left right"}):e._e(),e.item.badge?a("span",{staticClass:"right badge",class:e.getBadgeClass},[e._v(" "+e._s(e.item.badge))]):e._e()])])},ma=[],pa={props:{item:{type:Object,default:function(){return{route_name:"",label_tag:"",type:"group",icon_class:""}}}},computed:{targetRoute:function(){var e=this,t="";return e.item&&(t=e.item.route_name?e.item.route_name:e.item.label_tag),t},getBadgeClass:function(){var e=this;return e.item.badge_class?"badge-"+e.item.badge_class:"badge-primary"},link:function(){var e=this;return"group"===e.item.type?"#":e.item.link}}},fa=pa,ga=Object(g["a"])(fa,ua,ma,!1,null,null,null),va=ga.exports,ha={components:{sidebarMenuItemTitle:da,sidebarMenuItemLink:va},props:{menu:{type:Array,default:function(){return[]}}},methods:{badgeClass:function(e){return e?"badge-"+e:"badge-primary"}}},ba=ha,Ca=Object(g["a"])(ba,na,oa,!1,null,null,null),_a=Ca.exports,ya=(a("d81d"),a("13d5"),a("fb6a"),a("a434"),a("a9e3"),a("b680"),a("b64b"),{data:function(){return{futureMpfPercentErrors:[!1,!1],idCardOptions:[{labelTag:"general.hkid",fieldName:"hkid"},{labelTag:"general.passport_no",fieldName:"passport"}]}},computed:{isMobile:function(){return"mobile"===this.$mq},apiUrl:function(){return this.$store.getters.constants.apiUrl}},methods:{showToaster:function(e){var t=this,a="info";switch(e.variant&&(a=e.variant),a){case"warning":t.$toaster.warning(e.message,{timeout:1e5});break;case"info":t.$toaster.warning(e.message);break;case"success":t.$toaster.warning(e.message);break;case"error":t.$toaster.warning(e.message);break}},showSessionExpired:function(e){var t=this;t.$dialog.confirm("Session expired. Please login again. ("+e+")",{okText:t.$t("messages.goto_login_page")}).then((function(){t.$router.push({name:"Logout"})})).catch((function(e){e.close()}))},pad:function(e,t){return e=e.toString(),e.length<t?this.pad("0"+e,t):e},validateScopes:function(){this.$validator.validateScopes()},engOrCht:function(e,t){var a=this;return"en"===a.$i18n.locale?e:t},pluralForm:function(e){switch(e){case"enrolment":return"enrolments";case"remittance":return"remittances";case"termination":return"terminations";default:return e}},list2Items:function(e){var t=e.split(",");return t.map((function(e){return e.trim()}))},date2Weekday:function(e){var t=this,a=-1,n=e.trim();if(""!==n){var o=t.$moment(n);a=o.weekday()}return a},removeStringItem:function(e,t){var a=this,n=e;if(""!==e){var o=a.list2Items(e),i=a.removeArrayItem(o,t);n=i.join(", ")}return n},removeArrayItem:function(e,t){for(var a=e,n=0;n<e.length;n++)if(e[n]===t){e.splice(n,1);break}return a},getPercentSum:function(e){var t=0;if(e&&""!==e){var a=e.split(",");t=a.reduce((function(e,t){var a=t.split(":");return e+parseFloat(a[1])}),0)}return t},formatMoney:function(e,t,a,n){t=isNaN(t=Math.abs(t))?2:t,a=void 0===a?".":a,n=void 0===n?",":n;var o=e<0?"-":"",i=String(parseInt(e=Math.abs(Number(e)||0).toFixed(t))),s=i.length;return s=s>3?s%3:0,o+(s?i.substr(0,s)+n:"")+i.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+n)+(t?a+Math.abs(e-i).toFixed(t).slice(2):"")},bytesToSize:function(e){var t=["Bytes","KB","MB","GB","TB"];if(0===e)return"0 Byte";var a=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,a),2)+" "+t[a]},strToKeyValues:function(e){var t={};if(e=e.trim(),""!==e)for(var a=e.split(";"),n=0;n<a.length;n++){var o=a[n].trim();if(""!==o){var i=o.split(":");i.length>1&&(t[i[0]]=i[1])}}return t},keyValuesToStr:function(e,t){"undefined"===typeof t&&(t=!1);var a="";if(Object.keys(e).length>0)for(var n in e)(""!==e[n]||t)&&(a+=n+":"+e[n]+";");return a},ucfirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}}),wa=ya,xa={mixins:[wa],data:function(){return{loading:!1,mainMenu:[]}},computed:{user:function(){var e=this;return e.$store.getters.user},sampleUrl:function(){var e=this;return e.$store.getters.apiUrl+"/samples/download"}},mounted:function(){var e=this;e.loading=!0,e.$store.dispatch("AUTH_GET","/menu").then((function(t){e.loading=!1,e.mainMenu=t})).catch((function(){e.loading=!1}))},components:{sidebarBrandLogo:Wt,sidebarUserPanel:aa,sidebarMenu:_a}},Ta=xa,ka=Object(g["a"])(Ta,qt,Bt,!1,null,null,null),Sa=ka.exports,Oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("aside",{staticClass:"control-sidebar control-sidebar-dark"})},$a=[],ja={},Ia=Object(g["a"])(ja,Oa,$a,!1,null,null,null),Ea=Ia.exports,Fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{staticClass:"main-footer"},[e._m(0),e._v(" All rights reserved. "),a("div",{staticClass:"float-right d-none d-sm-inline-block"},[a("b",[e._v("Version")]),e._v(" "+e._s(e.$t("general.version"))+" ")])])},Pa=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("strong",[e._v("Copyright © 2020 "),a("a",{attrs:{href:"http://adminlte.io"}},[e._v("YOOV.COM")]),e._v(".")])}],Aa={},Da=Object(g["a"])(Aa,Fa,Pa,!1,null,null,null),Ha=Da.exports,Na={components:{appNavbar:Ut,mainSidebar:Sa,appFooter:Ha,controlSidebar:Ea}},Ra=Na,Va=(a("3c5e"),Object(g["a"])(Ra,ct,dt,!1,null,null,null)),Ma=Va.exports,La=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"content-header"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-sm-6"},[a("h1",{staticClass:"m-0 text-dark"},[e._v(" "+e._s(e.$t("general.dashboard"))+" ")])]),e._m(0)])])]),e._m(1)])},Ua=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-6"},[a("ol",{staticClass:"breadcrumb float-sm-right"},[a("li",{staticClass:"breadcrumb-item"},[a("a",{attrs:{href:"#"}},[e._v("Home")])]),a("li",{staticClass:"breadcrumb-item active"},[e._v("Dashboard v1")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"content"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-3 col-6"},[a("div",{staticClass:"small-box bg-info"},[a("div",{staticClass:"inner"},[a("h3",[e._v("150")]),a("p",[e._v("New Orders")])]),a("div",{staticClass:"icon"},[a("i",{staticClass:"ion ion-bag"})]),a("a",{staticClass:"small-box-footer",attrs:{href:"#"}},[e._v("More info "),a("i",{staticClass:"fas fa-arrow-circle-right"})])])]),a("div",{staticClass:"col-lg-3 col-6"},[a("div",{staticClass:"small-box bg-success"},[a("div",{staticClass:"inner"},[a("h3",[e._v("53"),a("sup",{staticStyle:{"font-size":"20px"}},[e._v("%")])]),a("p",[e._v("Bounce Rate")])]),a("div",{staticClass:"icon"},[a("i",{staticClass:"ion ion-stats-bars"})]),a("a",{staticClass:"small-box-footer",attrs:{href:"#"}},[e._v("More info "),a("i",{staticClass:"fas fa-arrow-circle-right"})])])]),a("div",{staticClass:"col-lg-3 col-6"},[a("div",{staticClass:"small-box bg-warning"},[a("div",{staticClass:"inner"},[a("h3",[e._v("44")]),a("p",[e._v("User Registrations")])]),a("div",{staticClass:"icon"},[a("i",{staticClass:"ion ion-person-add"})]),a("a",{staticClass:"small-box-footer",attrs:{href:"#"}},[e._v("More info "),a("i",{staticClass:"fas fa-arrow-circle-right"})])])]),a("div",{staticClass:"col-lg-3 col-6"},[a("div",{staticClass:"small-box bg-danger"},[a("div",{staticClass:"inner"},[a("h3",[e._v("65")]),a("p",[e._v("Unique Visitors")])]),a("div",{staticClass:"icon"},[a("i",{staticClass:"ion ion-pie-graph"})]),a("a",{staticClass:"small-box-footer",attrs:{href:"#"}},[e._v("More info "),a("i",{staticClass:"fas fa-arrow-circle-right"})])])])]),a("div",{staticClass:"row"},[a("section",{staticClass:"col-lg-7 connectedSortable"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[a("i",{staticClass:"fas fa-chart-pie mr-1"}),e._v(" Sales ")]),a("div",{staticClass:"card-tools"},[a("ul",{staticClass:"nav nav-pills ml-auto"},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{href:"#revenue-chart","data-toggle":"tab"}},[e._v("Area")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#sales-chart","data-toggle":"tab"}},[e._v("Donut")])])])])]),a("div",{staticClass:"card-body"},[a("div",{staticClass:"tab-content p-0"},[a("div",{staticClass:"chart tab-pane active",staticStyle:{position:"relative",height:"300px"},attrs:{id:"revenue-chart"}},[a("canvas",{staticStyle:{height:"300px"},attrs:{id:"revenue-chart-canvas",height:"300"}})]),a("div",{staticClass:"chart tab-pane",staticStyle:{position:"relative",height:"300px"},attrs:{id:"sales-chart"}},[a("canvas",{staticStyle:{height:"300px"},attrs:{id:"sales-chart-canvas",height:"300"}})])])])]),a("div",{staticClass:"card direct-chat direct-chat-primary"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[e._v("Direct Chat")]),a("div",{staticClass:"card-tools"},[a("span",{staticClass:"badge badge-primary",attrs:{"data-toggle":"tooltip",title:"3 New Messages"}},[e._v("3")]),a("button",{staticClass:"btn btn-tool",attrs:{type:"button","data-card-widget":"collapse"}},[a("i",{staticClass:"fas fa-minus"})]),a("button",{staticClass:"btn btn-tool",attrs:{type:"button","data-toggle":"tooltip",title:"Contacts","data-widget":"chat-pane-toggle"}},[a("i",{staticClass:"fas fa-comments"})]),a("button",{staticClass:"btn btn-tool",attrs:{type:"button","data-card-widget":"remove"}},[a("i",{staticClass:"fas fa-times"})])])]),a("div",{staticClass:"card-body"},[a("div",{staticClass:"direct-chat-messages"},[a("div",{staticClass:"direct-chat-msg"},[a("div",{staticClass:"direct-chat-infos clearfix"},[a("span",{staticClass:"direct-chat-name float-left"},[e._v("Alexander Pierce")]),a("span",{staticClass:"direct-chat-timestamp float-right"},[e._v("23 Jan 2:00 pm")])]),a("img",{staticClass:"direct-chat-img",attrs:{src:"dist/img/user1-128x128.jpg",alt:"message user image"}}),a("div",{staticClass:"direct-chat-text"},[e._v(" Is this template really for free? That's unbelievable! ")])]),a("div",{staticClass:"direct-chat-msg right"},[a("div",{staticClass:"direct-chat-infos clearfix"},[a("span",{staticClass:"direct-chat-name float-right"},[e._v("Sarah Bullock")]),a("span",{staticClass:"direct-chat-timestamp float-left"},[e._v("23 Jan 2:05 pm")])]),a("img",{staticClass:"direct-chat-img",attrs:{src:"dist/img/user3-128x128.jpg",alt:"message user image"}}),a("div",{staticClass:"direct-chat-text"},[e._v(" You better believe it! ")])]),a("div",{staticClass:"direct-chat-msg"},[a("div",{staticClass:"direct-chat-infos clearfix"},[a("span",{staticClass:"direct-chat-name float-left"},[e._v("Alexander Pierce")]),a("span",{staticClass:"direct-chat-timestamp float-right"},[e._v("23 Jan 5:37 pm")])]),a("img",{staticClass:"direct-chat-img",attrs:{src:"dist/img/user1-128x128.jpg",alt:"message user image"}}),a("div",{staticClass:"direct-chat-text"},[e._v(" Working with AdminLTE on a great new app! Wanna join? ")])]),a("div",{staticClass:"direct-chat-msg right"},[a("div",{staticClass:"direct-chat-infos clearfix"},[a("span",{staticClass:"direct-chat-name float-right"},[e._v("Sarah Bullock")]),a("span",{staticClass:"direct-chat-timestamp float-left"},[e._v("23 Jan 6:10 pm")])]),a("img",{staticClass:"direct-chat-img",attrs:{src:"dist/img/user3-128x128.jpg",alt:"message user image"}}),a("div",{staticClass:"direct-chat-text"},[e._v(" I would love to. ")])])]),a("div",{staticClass:"direct-chat-contacts"},[a("ul",{staticClass:"contacts-list"},[a("li",[a("a",{attrs:{href:"#"}},[a("img",{staticClass:"contacts-list-img",attrs:{src:"dist/img/user1-128x128.jpg"}}),a("div",{staticClass:"contacts-list-info"},[a("span",{staticClass:"contacts-list-name"},[e._v(" Count Dracula "),a("small",{staticClass:"contacts-list-date float-right"},[e._v("2/28/2015")])]),a("span",{staticClass:"contacts-list-msg"},[e._v("How have you been? I was...")])])])]),a("li",[a("a",{attrs:{href:"#"}},[a("img",{staticClass:"contacts-list-img",attrs:{src:"dist/img/user7-128x128.jpg"}}),a("div",{staticClass:"contacts-list-info"},[a("span",{staticClass:"contacts-list-name"},[e._v(" Sarah Doe "),a("small",{staticClass:"contacts-list-date float-right"},[e._v("2/23/2015")])]),a("span",{staticClass:"contacts-list-msg"},[e._v("I will be waiting for...")])])])]),a("li",[a("a",{attrs:{href:"#"}},[a("img",{staticClass:"contacts-list-img",attrs:{src:"dist/img/user3-128x128.jpg"}}),a("div",{staticClass:"contacts-list-info"},[a("span",{staticClass:"contacts-list-name"},[e._v(" Nadia Jolie "),a("small",{staticClass:"contacts-list-date float-right"},[e._v("2/20/2015")])]),a("span",{staticClass:"contacts-list-msg"},[e._v("I'll call you back at...")])])])]),a("li",[a("a",{attrs:{href:"#"}},[a("img",{staticClass:"contacts-list-img",attrs:{src:"dist/img/user5-128x128.jpg"}}),a("div",{staticClass:"contacts-list-info"},[a("span",{staticClass:"contacts-list-name"},[e._v(" Nora S. Vans "),a("small",{staticClass:"contacts-list-date float-right"},[e._v("2/10/2015")])]),a("span",{staticClass:"contacts-list-msg"},[e._v("Where is your new...")])])])]),a("li",[a("a",{attrs:{href:"#"}},[a("img",{staticClass:"contacts-list-img",attrs:{src:"dist/img/user6-128x128.jpg"}}),a("div",{staticClass:"contacts-list-info"},[a("span",{staticClass:"contacts-list-name"},[e._v(" John K. "),a("small",{staticClass:"contacts-list-date float-right"},[e._v("1/27/2015")])]),a("span",{staticClass:"contacts-list-msg"},[e._v("Can I take a look at...")])])])]),a("li",[a("a",{attrs:{href:"#"}},[a("img",{staticClass:"contacts-list-img",attrs:{src:"dist/img/user8-128x128.jpg"}}),a("div",{staticClass:"contacts-list-info"},[a("span",{staticClass:"contacts-list-name"},[e._v(" Kenneth M. "),a("small",{staticClass:"contacts-list-date float-right"},[e._v("1/4/2015")])]),a("span",{staticClass:"contacts-list-msg"},[e._v("Never mind I found...")])])])])])])]),a("div",{staticClass:"card-footer"},[a("form",{attrs:{action:"#",method:"post"}},[a("div",{staticClass:"input-group"},[a("input",{staticClass:"form-control",attrs:{type:"text",name:"message",placeholder:"Type Message ..."}}),a("span",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[e._v("Send")])])])])])]),a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[a("i",{staticClass:"ion ion-clipboard mr-1"}),e._v(" To Do List ")]),a("div",{staticClass:"card-tools"},[a("ul",{staticClass:"pagination pagination-sm"},[a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[e._v("«")])]),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[e._v("1")])]),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[e._v("2")])]),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[e._v("3")])]),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[e._v("»")])])])])]),a("div",{staticClass:"card-body"},[a("ul",{staticClass:"todo-list",attrs:{"data-widget":"todo-list"}},[a("li",[a("span",{staticClass:"handle"},[a("i",{staticClass:"fas fa-ellipsis-v"}),a("i",{staticClass:"fas fa-ellipsis-v"})]),a("div",{staticClass:"icheck-primary d-inline ml-2"},[a("input",{attrs:{type:"checkbox",value:"",name:"todo1",id:"todoCheck1"}}),a("label",{attrs:{for:"todoCheck1"}})]),a("span",{staticClass:"text"},[e._v("Design a nice theme")]),a("small",{staticClass:"badge badge-danger"},[a("i",{staticClass:"far fa-clock"}),e._v(" 2 mins")]),a("div",{staticClass:"tools"},[a("i",{staticClass:"fas fa-edit"}),a("i",{staticClass:"fas fa-trash-o"})])]),a("li",[a("span",{staticClass:"handle"},[a("i",{staticClass:"fas fa-ellipsis-v"}),a("i",{staticClass:"fas fa-ellipsis-v"})]),a("div",{staticClass:"icheck-primary d-inline ml-2"},[a("input",{attrs:{type:"checkbox",value:"",name:"todo2",id:"todoCheck2",checked:""}}),a("label",{attrs:{for:"todoCheck2"}})]),a("span",{staticClass:"text"},[e._v("Make the theme responsive")]),a("small",{staticClass:"badge badge-info"},[a("i",{staticClass:"far fa-clock"}),e._v(" 4 hours")]),a("div",{staticClass:"tools"},[a("i",{staticClass:"fas fa-edit"}),a("i",{staticClass:"fas fa-trash-o"})])]),a("li",[a("span",{staticClass:"handle"},[a("i",{staticClass:"fas fa-ellipsis-v"}),a("i",{staticClass:"fas fa-ellipsis-v"})]),a("div",{staticClass:"icheck-primary d-inline ml-2"},[a("input",{attrs:{type:"checkbox",value:"",name:"todo3",id:"todoCheck3"}}),a("label",{attrs:{for:"todoCheck3"}})]),a("span",{staticClass:"text"},[e._v("Let theme shine like a star")]),a("small",{staticClass:"badge badge-warning"},[a("i",{staticClass:"far fa-clock"}),e._v(" 1 day")]),a("div",{staticClass:"tools"},[a("i",{staticClass:"fas fa-edit"}),a("i",{staticClass:"fas fa-trash-o"})])]),a("li",[a("span",{staticClass:"handle"},[a("i",{staticClass:"fas fa-ellipsis-v"}),a("i",{staticClass:"fas fa-ellipsis-v"})]),a("div",{staticClass:"icheck-primary d-inline ml-2"},[a("input",{attrs:{type:"checkbox",value:"",name:"todo4",id:"todoCheck4"}}),a("label",{attrs:{for:"todoCheck4"}})]),a("span",{staticClass:"text"},[e._v("Let theme shine like a star")]),a("small",{staticClass:"badge badge-success"},[a("i",{staticClass:"far fa-clock"}),e._v(" 3 days")]),a("div",{staticClass:"tools"},[a("i",{staticClass:"fas fa-edit"}),a("i",{staticClass:"fas fa-trash-o"})])]),a("li",[a("span",{staticClass:"handle"},[a("i",{staticClass:"fas fa-ellipsis-v"}),a("i",{staticClass:"fas fa-ellipsis-v"})]),a("div",{staticClass:"icheck-primary d-inline ml-2"},[a("input",{attrs:{type:"checkbox",value:"",name:"todo5",id:"todoCheck5"}}),a("label",{attrs:{for:"todoCheck5"}})]),a("span",{staticClass:"text"},[e._v("Check your messages and notifications")]),a("small",{staticClass:"badge badge-primary"},[a("i",{staticClass:"far fa-clock"}),e._v(" 1 week")]),a("div",{staticClass:"tools"},[a("i",{staticClass:"fas fa-edit"}),a("i",{staticClass:"fas fa-trash-o"})])]),a("li",[a("span",{staticClass:"handle"},[a("i",{staticClass:"fas fa-ellipsis-v"}),a("i",{staticClass:"fas fa-ellipsis-v"})]),a("div",{staticClass:"icheck-primary d-inline ml-2"},[a("input",{attrs:{type:"checkbox",value:"",name:"todo6",id:"todoCheck6"}}),a("label",{attrs:{for:"todoCheck6"}})]),a("span",{staticClass:"text"},[e._v("Let theme shine like a star")]),a("small",{staticClass:"badge badge-secondary"},[a("i",{staticClass:"far fa-clock"}),e._v(" 1 month")]),a("div",{staticClass:"tools"},[a("i",{staticClass:"fas fa-edit"}),a("i",{staticClass:"fas fa-trash-o"})])])])]),a("div",{staticClass:"card-footer clearfix"},[a("button",{staticClass:"btn btn-info float-right",attrs:{type:"button"}},[a("i",{staticClass:"fas fa-plus"}),e._v(" Add item")])])])]),a("section",{staticClass:"col-lg-5 connectedSortable"},[a("div",{staticClass:"card bg-gradient-primary"},[a("div",{staticClass:"card-header border-0"},[a("h3",{staticClass:"card-title"},[a("i",{staticClass:"fas fa-map-marker-alt mr-1"}),e._v(" Visitors ")]),a("div",{staticClass:"card-tools"},[a("button",{staticClass:"btn btn-primary btn-sm daterange",attrs:{type:"button","data-toggle":"tooltip",title:"Date range"}},[a("i",{staticClass:"far fa-calendar-alt"})]),a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button","data-card-widget":"collapse","data-toggle":"tooltip",title:"Collapse"}},[a("i",{staticClass:"fas fa-minus"})])])]),a("div",{staticClass:"card-body"},[a("div",{staticStyle:{height:"250px",width:"100%"},attrs:{id:"world-map"}})]),a("div",{staticClass:"card-footer bg-transparent"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 text-center"},[a("div",{attrs:{id:"sparkline-1"}}),a("div",{staticClass:"text-white"},[e._v("Visitors")])]),a("div",{staticClass:"col-4 text-center"},[a("div",{attrs:{id:"sparkline-2"}}),a("div",{staticClass:"text-white"},[e._v("Online")])]),a("div",{staticClass:"col-4 text-center"},[a("div",{attrs:{id:"sparkline-3"}}),a("div",{staticClass:"text-white"},[e._v("Sales")])])])])]),a("div",{staticClass:"card bg-gradient-info"},[a("div",{staticClass:"card-header border-0"},[a("h3",{staticClass:"card-title"},[a("i",{staticClass:"fas fa-th mr-1"}),e._v(" Sales Graph ")]),a("div",{staticClass:"card-tools"},[a("button",{staticClass:"btn bg-info btn-sm",attrs:{type:"button","data-card-widget":"collapse"}},[a("i",{staticClass:"fas fa-minus"})]),a("button",{staticClass:"btn bg-info btn-sm",attrs:{type:"button","data-card-widget":"remove"}},[a("i",{staticClass:"fas fa-times"})])])]),a("div",{staticClass:"card-body"},[a("canvas",{staticClass:"chart",staticStyle:{"min-height":"250px",height:"250px","max-height":"250px","max-width":"100%"},attrs:{id:"line-chart"}})]),a("div",{staticClass:"card-footer bg-transparent"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 text-center"},[a("input",{staticClass:"knob",attrs:{type:"text","data-readonly":"true",value:"20","data-width":"60","data-height":"60","data-fgColor":"#39CCCC"}}),a("div",{staticClass:"text-white"},[e._v("Mail-Orders")])]),a("div",{staticClass:"col-4 text-center"},[a("input",{staticClass:"knob",attrs:{type:"text","data-readonly":"true",value:"50","data-width":"60","data-height":"60","data-fgColor":"#39CCCC"}}),a("div",{staticClass:"text-white"},[e._v("Online")])]),a("div",{staticClass:"col-4 text-center"},[a("input",{staticClass:"knob",attrs:{type:"text","data-readonly":"true",value:"30","data-width":"60","data-height":"60","data-fgColor":"#39CCCC"}}),a("div",{staticClass:"text-white"},[e._v("In-Store")])])])])]),a("div",{staticClass:"card bg-gradient-success"},[a("div",{staticClass:"card-header border-0"},[a("h3",{staticClass:"card-title"},[a("i",{staticClass:"far fa-calendar-alt"}),e._v(" Calendar ")]),a("div",{staticClass:"card-tools"},[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-success btn-sm dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown"}},[a("i",{staticClass:"fas fa-bars"})]),a("div",{staticClass:"dropdown-menu float-right",attrs:{role:"menu"}},[a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v("Add new event")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v("Clear events")]),a("div",{staticClass:"dropdown-divider"}),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v("View calendar")])])]),a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button","data-card-widget":"collapse"}},[a("i",{staticClass:"fas fa-minus"})]),a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button","data-card-widget":"remove"}},[a("i",{staticClass:"fas fa-times"})])])]),a("div",{staticClass:"card-body pt-0"},[a("div",{staticStyle:{width:"100%"},attrs:{id:"calendar"}})])])])])])])}],qa={},Ba=Object(g["a"])(qa,La,Ua,!1,null,null,null),Ga=Ba.exports,Ka=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("Widgets")])},za=[],Ja={},Qa=Object(g["a"])(Ja,Ka,za,!1,null,null,null),Wa=Qa.exports,Ya=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("Layout Options")])},Xa=[],Za={},en=Object(g["a"])(Za,Ya,Xa,!1,null,null,null),tn=en.exports,an=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},nn=[],on={},sn=on,rn=Object(g["a"])(sn,an,nn,!1,null,null,null),ln=rn.exports,cn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("UI Elements")])},dn=[],un={},mn=Object(g["a"])(un,cn,dn,!1,null,null,null),pn=mn.exports,fn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("Forms")])},gn=[],vn={},hn=Object(g["a"])(vn,fn,gn,!1,null,null,null),bn=hn.exports,Cn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("Tables")])},_n=[],yn={},wn=Object(g["a"])(yn,Cn,_n,!1,null,null,null),xn=wn.exports,Tn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"mt-5 text-center",staticStyle:{"font-size":"72px"}},[e._v("ERROR")]),e._m(0),a("div",{staticClass:"text-center"},[a("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"Login"}}},[e._v(" Back to Login ")])],1)])},kn=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mt-3"},[a("div",{staticClass:"mx-auto my-3 p-3 text-left text-center",staticStyle:{border:"2px solid red",width:"90%","max-width":"480px"}},[e._v(" Access Denied,"),a("br"),e._v(" Session Expired, or"),a("br"),e._v(" Logout Already."),a("br")])])}],Sn={},On=Sn,$n=Object(g["a"])(On,Tn,kn,!1,null,null,null),jn=$n.exports,In=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("Profile")])},En=[],Fn={},Pn=Object(g["a"])(Fn,In,En,!1,null,null,null),An=Pn.exports,Dn={},Hn=Object(g["a"])(Dn,ht,bt,!1,null,null,null),Nn=Hn.exports,Rn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"auth"}},[a("div",{style:{backgroundImage:"url(/img/wallpapers/w1.jpg)"},attrs:{id:"bkgd"}}),a("auth-navbar"),a("main",{staticClass:"login-form position-fixed w-100 h-100"},[a("div",{staticClass:"container h-100"},[a("div",{staticClass:"row justify-content-center h-100"},[a("div",{staticClass:"col-md-8 h-100 d-flex flex-column justify-content-center"},[a("router-view")],1)])])])],1)},Vn=[],Mn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"auth-navbar navbar navbar-expand-lg navbar-dark navbar-laravel"},[a("div",{staticClass:"container"},[a("a",{staticClass:"navbar-brand p-0",attrs:{href:"#"}},[e._v(" "+e._s(e.$t("login.digital_coupon"))),a("br"),a("span",{staticClass:"brand-notes"},[e._v(" "+e._s(e.$t("login._brandNotes_"))+" ")])]),e._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[a("ul",{staticClass:"navbar-nav ml-auto"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"Login"}}},[e._v(" "+e._s(e.$t("login.login")))])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"Register"}}},[e._v(" "+e._s(e.$t("login.register")))])],1)])])])])},Ln=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],Un=(a("d56e"),{}),qn=Object(g["a"])(Un,Mn,Ln,!1,null,null,null),Bn=qn.exports,Gn={components:{authNavbar:Bn}},Kn=Gn,zn=(a("cf7b"),Object(g["a"])(Kn,Rn,Vn,!1,null,null,null)),Jn=zn.exports,Qn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[e._v(e._s(e.$t(e.titleTag)))]),a("div",{staticClass:"card-body"},[e.messageTag?a("div",{staticClass:"text-center alert alert-danger"},[e._v(" "+e._s(e.$t("messages."+e.messageTag))+" ")]):e._e(),a("form",{attrs:{action:"",method:""},on:{submit:function(t){return t.preventDefault(),e.login()}}},[a("auth-input-row",{attrs:{id:"email_address",labelTag:"login.email_address",rules:"required|email"},model:{value:e.credentials.email,callback:function(t){e.$set(e.credentials,"email",t)},expression:"credentials.email"}}),a("auth-input-row-password",{attrs:{id:"password",labelTag:"login.password",rules:"required"},model:{value:e.credentials.password,callback:function(t){e.$set(e.credentials,"password",t)},expression:"credentials.password"}}),a("div",{staticClass:"col-md-6 offset-md-4"},[a("button",{staticClass:"btn btn-primary min-width-80",attrs:{type:"submit"}},[e.loading?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):e._e(),e._v(" "+e._s(e.$t(e.titleTag))+" ")],1),a("router-link",{staticClass:"btn btn-link",attrs:{to:{name:"ForgotPassword"}}},[e._v(" "+e._s(e.$t("login.forgotYourPassword"))+" ")])],1)],1)])])},Wn=[],Yn=(a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-4 col-form-label text-md-right",attrs:{for:e.id}},[e._v(" "+e._s(e.$t(e.labelTag)))]),a("div",{staticClass:"col-md-6"},[a("validation-provider",{attrs:{rules:e.rules},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("input",{staticClass:"form-control",attrs:{type:"text",id:e.id,name:e.id},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),a("span",{staticClass:"input-error"},[e._v(e._s(n[0]))])]}}])})],1)])}),Xn=[],Zn={name:"AuthInputRow",model:{prop:"value",event:"input"},props:{id:{type:String,default:""},rules:{type:String,default:""},labelTag:{type:String,default:""},value:{type:String,default:""},width:{type:String,default:""},extraAttr:{type:String,default:""}}},eo=Zn,to=(a("521c"),Object(g["a"])(eo,Yn,Xn,!1,null,null,null)),ao=to.exports,no=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-4 col-form-label text-md-right",attrs:{for:e.id}},[e._v(" "+e._s(e.$t(e.labelTag)))]),a("div",{staticClass:"col-md-6"},[a("validation-provider",{attrs:{rules:e.rules,vid:"xxx"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("input",{staticClass:"form-control",attrs:{type:"password",id:e.id,name:e.id},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),a("span",[e._v(e._s(n[0]))])]}}])})],1)])},oo=[],io={name:"AuthInputRow",model:{prop:"value",event:"input"},props:{id:{type:String,default:""},vid:{type:String,default:""},rules:{type:String,default:""},labelTag:{type:String,default:""},value:{type:String,default:""},width:{type:String,default:""},extraAttr:{type:String,default:""}}},so=io,ro=Object(g["a"])(so,no,oo,!1,null,null,null),lo=ro.exports,co={data:function(){return{loading:!1}},computed:{mode:function(){return"production"}},methods:{checkErrorMessage:function(e){var t=this,a="Unknown Error";return e.message?a=e.message:e.messageTag&&(a=t.$t("messages."+e.messageTag)),a},sendResetEmail:function(e){var t=this,a={urlCommand:"/auth/reset_password",data:{email:e,url:window.location.origin+"/reset"}};t.loading=!0,console.log("submit :: COMMON_POST => "+a.urlCommand),t.$store.dispatch("COMMON_POST",a).then((function(e){t.loading=!1,console.log("status is true:: sendResetEmail :: response: ",e),t.success=!0,t.message=t.checkErrorMessage(e)}),(function(e){console.log("error:: sendResetEmail :: response: ",response),t.loading=!1,console.log("sendResetEmail :: error: ",e),t.success=!1,t.message=t.checkErrorMessage(e)}))}}},uo=co,mo={mixins:[uo],components:{authInputRow:ao,authInputRowPassword:lo},data:function(){return{loading:!1,titleTag:"login.login",messageTag:"",credentials:{email:"",password:""}}},mounted:function(){var e=this;console.log("Login.vue :: mounted"),"development"===e.mode&&(e.credentials.email="yoovtest@gmail.com",e.credentials.password="yoovYoov"),"Logout"===e.$route.name?e.logout():e.resetAll()},computed:{agents:function(){return this.$store.getters.agents}},methods:{logout:function(){var e=this,t={urlCommand:"/auth/logout",data:e.credentials};e.$store.dispatch("AUTH_POST",t).then((function(){e.loading=!1,e.resetAll()}),(function(){console.log("Logout :: AUTH_POST .catch"),e.loading=!1,e.resetAll()})),e.$router.replace("/login")},resetAll:function(){var e=this;e.$store.dispatch("SET_TOKEN","").then((function(){})).catch((function(){e.loading=!1})),e.$store.dispatch("SET_USER",null).then((function(){})).catch((function(){e.loading=!1})),e.$store.dispatch("CLEAR_AGENTS").then((function(){})).catch((function(){}))},login:function(){var e=this,t={urlCommand:"/auth/login",data:e.credentials};e.loading=!0,e.$store.dispatch("COMMON_POST",t).then((function(t){e.loading=!1,e.$store.dispatch("SET_TOKEN",t.access_token).then((function(){e.$store.dispatch("FETCH_USER").then((function(){e.gotoNextUrl("/dashboard")}))}),(function(){console.log("#3 setToken fails")})).catch((function(){}))}),(function(t){e.loading=!1,e.messageTag=t.messageTag}))},gotoNextUrl:function(e){var t=this,a=localStorage.getItem("nextUrl");a||(a=e),localStorage.removeItem("nextUrl"),t.$router.push(a)}}},po=mo,fo=Object(g["a"])(po,Qn,Wn,!1,null,null,null),go=fo.exports,vo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card mt-5"},[a("div",{staticClass:"card-header"},[e._v(e._s(e.$t(e.titleTag)))]),a("div",{staticClass:"card-body"},[e.message?a("div",{staticClass:"text-center alert alert-danger"},[e._v(" "+e._s(e.message)+" ")]):e._e(),a("form",{attrs:{action:"",method:""},on:{submit:function(t){return t.preventDefault(),e.onSubmitRegistration()}}},[a("auth-input-row",{attrs:{id:"name",labelTag:"general.name",rules:"required",fieldName:e.$t("general.email")},model:{value:e.registerData.name,callback:function(t){e.$set(e.registerData,"name",t)},expression:"registerData.name"}}),a("auth-input-row",{attrs:{id:"email_address",labelTag:"login.email_address",rules:"required|email"},model:{value:e.registerData.email,callback:function(t){e.$set(e.registerData,"email",t)},expression:"registerData.email"}}),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-4 col-form-label text-md-right",attrs:{for:"password1"}},[e._v(" "+e._s(e.$t("login.password")))]),a("div",{staticClass:"col-md-6"},[a("validation-provider",{attrs:{rules:"required",vid:"p1"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.registerData.password,expression:"registerData.password"}],staticClass:"form-control",attrs:{type:"password",id:"password1",name:"password1"},domProps:{value:e.registerData.password},on:{input:function(t){t.target.composing||e.$set(e.registerData,"password",t.target.value)}}}),a("span",[e._v(e._s(n[0]))])]}}])})],1)]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-4 col-form-label text-md-right",attrs:{for:"password2"}},[e._v(" "+e._s(e.$t("login.passwordConfirmation")))]),a("div",{staticClass:"col-md-6"},[a("validation-provider",{attrs:{rules:"required|confirmed:p1"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.registerData.passwordConfirmation,expression:"registerData.passwordConfirmation"}],staticClass:"form-control",attrs:{type:"password",id:"password2",name:"password2"},domProps:{value:e.registerData.passwordConfirmation},on:{input:function(t){t.target.composing||e.$set(e.registerData,"passwordConfirmation",t.target.value)}}}),a("span",[e._v(e._s(n[0]))])]}}])})],1)]),a("div",{staticClass:"col-md-6 offset-md-4"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e.loading?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):e._e(),e._v(" "+e._s(e.$t(e.titleTag))+" ")],1)])],1)])])},ho=[],bo={mixins:[uo],components:{authInputRow:ao,authInputRowPassword:lo},data:function(){return{loading:!1,message:"",titleTag:"login.register",registerData:{name:"",email:"",password:"",passwordConfirmation:""}}},mounted:function(){var e=this;e.registerData.name="Yoov Coupon",e.registerData.email="yoovcoupon@gmail.com",e.registerData.password="yoovYoov",e.registerData.passwordConfirmation="yoovYoov"},methods:{onSubmitRegistration:function(){var e=this,t={urlCommand:"/auth/register",data:Object(s["a"])(Object(s["a"])({},e.registerData),{},{url:window.location.origin+"/verify"})};e.loading=!0,e.$store.dispatch("COMMON_POST",t).then((function(t){e.loading=!1,e.$router.push({name:"AuthMessage",params:{messageTag:t.messageTag}})}),(function(t){e.loading=!1,e.message=e.$t("messages."+t.messageTag)}))}}},Co=bo,_o=Object(g["a"])(Co,vo,ho,!1,null,null,null),yo=_o.exports,wo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card mt-5"},[a("div",{staticClass:"card-header"},[e._v(e._s(e.$t(e.titleTag)))]),a("div",{staticClass:"card-body"},[e.message?a("auth-result-message",{attrs:{success:e.success,message:e.message}}):e._e(),a("form",{attrs:{action:"",method:""},on:{submit:function(t){return t.preventDefault(),e.confirm()}}},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-4 col-form-label text-md-right",attrs:{for:"email_address"}},[e._v(" "+e._s(e.$t("login.email_address")))]),a("div",{staticClass:"col-md-6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text",id:"email_address",name:"email-address",required:"",autofocus:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})])]),a("div",{staticClass:"col-md-6 offset-md-4"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e.loading?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):e._e(),e._v(" "+e._s(e.$t("auth.resendEmail"))+" ")],1)])])],1)])},xo=[],To=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center alert",class:"alert-"+e.variant},[e._v(" "+e._s(e.message)+" ")])},ko=[],So={computed:{variant:function(){var e=this;return e.success?"info":"danger"}},props:{success:{type:Boolean,default:!1},message:{type:String,default:""}}},Oo=So,$o=Object(g["a"])(Oo,To,ko,!1,null,null,null),jo=$o.exports,Io={components:{authResultMessage:jo},mixins:[uo],data:function(){return{titleTag:"auth.forgot_password",email:"",success:!1,message:""}},mounted:function(){var e=this;"development"===e.mode&&(e.email="yoovcoupon@gmail.com")},methods:{confirm:function(){var e=this;e.sendResetEmail(e.email)}}},Eo=Io,Fo=Object(g["a"])(Eo,wo,xo,!1,null,null,null),Po=Fo.exports,Ao=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card mt-5"},[a("div",{staticClass:"card-header"},[e._v(e._s(e.$t(e.titleTag)))]),a("div",{staticClass:"card-body"},[e.message?a("div",{staticClass:"text-center alert alert-info"},[e._v(" "+e._s(e.$t("messages."+e.message))+" ")]):e._e(),a("div",{staticClass:"form-group row"}),a("div",{staticClass:"col-12 text-center"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.gotoLoginPage()}}},[e._v(" "+e._s(e.$t("login.gotoLoginPage"))+" ")])])])])},Do=[],Ho={mixins:[uo],data:function(){return{titleTag:"general.information"}},computed:{message:function(){return this.$route.params.messageTag}},methods:{gotoLoginPage:function(){this.$router.push({name:"Login"})}}},No=Ho,Ro=Object(g["a"])(No,Ao,Do,!1,null,null,null),Vo=Ro.exports,Mo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"verify-email card mt-5",staticStyle:{"min-height":"183px"}},[a("div",{staticClass:"card-header"},[e._v(e._s(e.$t(e.titleTag)))]),a("div",{staticClass:"card-body"},[e.message?a("auth-result-message",{attrs:{success:e.success,message:e.message}}):e._e(),e.inVerificationMode?[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 text-center"},[a("div",{staticClass:"d-inline mr-3"},[e._v(e._s(e.$t("auth.verifying")))]),e.inVerificationMode?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):e._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 text-center"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.gotoLoginPage()}}},[e._v(" "+e._s(e.$t("login.gotoLoginPage"))+" ")])])])]:e._e(),e.inVerificationMode||e.success?e._e():[a("form",{on:{submit:function(t){return t.preventDefault(),e.sendVerificationCode()}}},[a("auth-input-row",{attrs:{id:"email_address",labelTag:"login.email_address",rules:"required|email"},model:{value:e.resendData.email,callback:function(t){e.$set(e.resendData,"email",t)},expression:"resendData.email"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-center"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e.loading?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):e._e(),e._v(" "+e._s(e.code?e.$t("login.resendVerificationCode"):e.$t("login.sendVerificationCode"))+" ")],1)])])],1)],!e.inVerificationMode&&e.success?[e.hasCode?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-center form-control-plaintext"},[e._v(" "+e._s(e.$t("auth.verificationCompleted"))+" ")])]):e._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-center"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.gotoLoginPage()}}},[e._v(" "+e._s(e.$t("login.gotoLoginPage"))+" ")])])])]:e._e()],2)])},Lo=[],Uo={mixin:[uo],components:{authInputRow:ao,authResultMessage:jo},data:function(){return{loading:!1,titleTag:"login.accountVerification",message:"",success:!0,messageTag:"",inVerificationMode:!0,code:"",resendData:{email:""}}},mounted:function(){var e=this;e.code=e.$route.params.code,e.code?(e.hasCode=!0,e.verifyCode(e.code)):(e.hasCode=!1,e.success=!1,e.inVerificationMode=!1)},methods:{verifyCode:function(e){var t=this,a={urlCommand:"/auth/verify",data:{code:e}};t.$store.dispatch("COMMON_POST",a).then((function(e){console.log("verify ok: response: ",e),t.success=!0,t.inVerificationMode=!1,t.message=t.$t("messages."+e.messageTag);var a=t.$route.path,n=a.replace("/"+t.code,"");window.history.replaceState({},document.title,n),t.hasCode=!1}),(function(e){console.log("verify fails: error: ",e),t.success=!1,t.inVerificationMode=!1,t.message=t.$t("messages."+e.messageTag);var a=t.$route.path,n=a.replace("/"+t.code,"");window.history.replaceState({},document.title,n),t.hasCode=!1}))},gotoLoginPage:function(){this.$router.push({name:"Login"})},sendVerificationCode:function(){var e=this;console.log("sendVerificationCode");var t={urlCommand:"/auth/verify",data:{email:e.resendData.email,url:window.location.origin+"/verify"}};e.loading=!0,e.$store.dispatch("COMMON_POST",t).then((function(t){e.loading=!1,e.success=!0,e.message=e.$t("messages."+t.messageTag)}),(function(t){e.loading=!1,e.success=!1,e.message=e.$t("messages."+t.messageTag)}))}}},qo=Uo,Bo=(a("9f40"),Object(g["a"])(qo,Mo,Lo,!1,null,null,null)),Go=Bo.exports,Ko=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"verify-email card mt-5",staticStyle:{"min-height":"183px"}},[a("div",{staticClass:"card-header"},[e._v(e._s(e.$t(e.titleTag)))]),a("div",{staticClass:"card-body"},[e.message?a("auth-result-message",{attrs:{success:e.success,message:e.message}}):e._e(),e.verifying?[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 text-center"},[a("div",{staticClass:"d-inline mr-3"},[e._v(e._s(e.$t("auth.verifying")))]),e.verifying?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):e._e()],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-center"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.gotoLoginPage()}}},[e._v(" "+e._s(e.$t("login.gotoLoginPage"))+" ")])])])]:e._e(),e.verifying||e.success?e._e():[a("form",{on:{submit:function(t){return t.preventDefault(),e.sendVerificationCode()}}},[a("auth-input-row",{attrs:{id:"email_address",labelTag:"login.email_address",rules:"required|email"},model:{value:e.resendData.email,callback:function(t){e.$set(e.resendData,"email",t)},expression:"resendData.email"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-center"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e.loading?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):e._e(),e._v(" "+e._s(e.code?e.$t("login.resendVerificationCode"):e.$t("login.sendVerificationCode"))+" ")],1)])])],1)],!e.verifying&&e.success?[a("form",{on:{submit:function(t){return t.preventDefault(),e.confirmPassword()}}},[e.hasCode?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-center form-control-plaintext"},[e._v(" "+e._s(e.$t("auth.verificationCompleted"))+" ")])]):e._e(),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-4 col-form-label text-md-right",attrs:{for:"password1"}},[e._v(" "+e._s(e.$t("login.password")))]),a("div",{staticClass:"col-md-6"},[a("validation-provider",{attrs:{rules:"required",vid:"p1"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password1",name:"password1"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),a("span",[e._v(e._s(n[0]))])]}}],null,!1,63107331)})],1)]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-4 col-form-label text-md-right",attrs:{for:"password2"}},[e._v(" "+e._s(e.$t("login.passwordConfirmation")))]),a("div",{staticClass:"col-md-6"},[a("validation-provider",{attrs:{rules:"required|confirmed:p1"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.passwordConfirmation,expression:"passwordConfirmation"}],staticClass:"form-control",attrs:{type:"password",id:"password2",name:"password2"},domProps:{value:e.passwordConfirmation},on:{input:function(t){t.target.composing||(e.passwordConfirmation=t.target.value)}}}),a("span",[e._v(e._s(n[0]))])]}}],null,!1,4176831459)})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-center"},[a("button",{staticClass:"min-width-80 btn btn-primary",attrs:{type:"submit"}},[e._v(" "+e._s(e.$t("buttons.ok"))+" ")])])])])]:e._e()],2)])},zo=[],Jo={mixin:[uo],components:{authInputRow:ao,authResultMessage:jo},data:function(){return{loading:!1,titleTag:"auth.resetPassword",message:"",success:!0,password:"",passwordConfirmation:"",messageTag:"",verifying:!0,code:"",resendData:{email:""},userId:0}},mounted:function(){var e=this;e.code=e.$route.params.code,e.code?(e.hasCode=!0,e.verifyCode(e.code)):(e.hasCode=!1,e.success=!1,e.verifying=!1)},methods:{verifyCode:function(e){var t=this,a={urlCommand:"/auth/verify",data:{code:e}};t.$store.dispatch("COMMON_POST",a).then((function(e){console.log("verify ok: response: ",e),t.success=!0,t.verifying=!1,t.message=t.$t("messages."+e.messageTag),t.userId=e.userId;var a=t.$route.path,n=a.replace("/"+t.code,"");window.history.replaceState({},document.title,n),t.hasCode=!1}),(function(e){console.log("verify fails: error: ",e),t.success=!1,t.verifying=!1,t.message=t.$t("messages."+e.messageTag);var a=t.$route.path,n=a.replace("/"+t.code,"");window.history.replaceState({},document.title,n),t.hasCode=!1}))},confirmPassword:function(){var e=this;console.log("confirmPassord");var t={urlCommand:"/auth/change_password",data:{password:e.password,userId:e.userId}};e.loading=!0,e.$store.dispatch("COMMON_POST",t).then((function(t){e.loading=!1,e.$router.push({name:"AuthMessage",params:{messageTag:t.messageTag}})}),(function(t){e.loading=!1,console.log("error: ",t),e.message=e.$t("messages."+t.messageTag)}))},sendVerificationCode:function(){var e=this;console.log("sendVerificationCode");var t={urlCommand:"/auth/verify",data:{email:e.resendData.email,url:window.location.origin+"/verify"}};e.loading=!0,e.$store.dispatch("COMMON_POST",t).then((function(t){e.loading=!1,e.success=!0,e.message=e.$t("messages."+t.messageTag)}),(function(t){e.loading=!1,e.success=!1,e.message=e.$t("messages."+response.messageTag)}))}}},Qo=Jo,Wo=(a("5e84"),Object(g["a"])(Qo,Ko,zo,!1,null,null,null)),Yo=Wo.exports,Xo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},Zo=[],ei={},ti=ei,ai=Object(g["a"])(ti,Xo,Zo,!1,null,null,null),ni=ai.exports,oi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("Forms")])},ii=[],si={},ri=si,li=Object(g["a"])(ri,oi,ii,!1,null,null,null),ci=li.exports,di=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("Forms")])},ui=[],mi={},pi=mi,fi=Object(g["a"])(pi,di,ui,!1,null,null,null),gi=fi.exports,vi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("Forms")])},hi=[],bi={},Ci=bi,_i=Object(g["a"])(Ci,vi,hi,!1,null,null,null),yi=_i.exports,wi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("Forms")])},xi=[],Ti={},ki=Ti,Si=Object(g["a"])(ki,wi,xi,!1,null,null,null),Oi=Si.exports,$i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("Forms")])},ji=[],Ii={},Ei=Ii,Fi=Object(g["a"])(Ei,$i,ji,!1,null,null,null),Pi=Fi.exports,Ai=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("Forms")])},Di=[],Hi={},Ni=Hi,Ri=Object(g["a"])(Ni,Ai,Di,!1,null,null,null),Vi=Ri.exports,Mi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},Li=[],Ui={},qi=Object(g["a"])(Ui,Mi,Li,!1,null,null,null),Bi=qi.exports,Gi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},Ki=[],zi={},Ji=Object(g["a"])(zi,Gi,Ki,!1,null,null,null),Qi=Ji.exports,Wi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},Yi=[],Xi={},Zi=Object(g["a"])(Xi,Wi,Yi,!1,null,null,null),es=Zi.exports,ts=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},as=[],ns={},os=Object(g["a"])(ns,ts,as,!1,null,null,null),is=os.exports,ss=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},rs=[],ls={},cs=Object(g["a"])(ls,ss,rs,!1,null,null,null),ds=cs.exports,us=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},ms=[],ps={},fs=Object(g["a"])(ps,us,ms,!1,null,null,null),gs=fs.exports,vs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},hs=[],bs={},Cs=Object(g["a"])(bs,vs,hs,!1,null,null,null),_s=Cs.exports,ys=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},ws=[],xs={},Ts=Object(g["a"])(xs,ys,ws,!1,null,null,null),ks=Ts.exports,Ss=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},Os=[],$s={},js=Object(g["a"])($s,Ss,Os,!1,null,null,null),Is=js.exports,Es=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},Fs=[],Ps={},As=Object(g["a"])(Ps,Es,Fs,!1,null,null,null),Ds=As.exports,Hs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},Ns=[],Rs={},Vs=Object(g["a"])(Rs,Hs,Ns,!1,null,null,null),Ms=Vs.exports,Ls=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},Us=[],qs={},Bs=Object(g["a"])(qs,Ls,Us,!1,null,null,null),Gs=Bs.exports,Ks=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},zs=[],Js={},Qs=Object(g["a"])(Js,Ks,zs,!1,null,null,null),Ws=Qs.exports,Ys=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},Xs=[],Zs={},er=Object(g["a"])(Zs,Ys,Xs,!1,null,null,null),tr=er.exports,ar=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},nr=[],or={},ir=Object(g["a"])(or,ar,nr,!1,null,null,null),sr=ir.exports,rr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},lr=[],cr={},dr=Object(g["a"])(cr,rr,lr,!1,null,null,null),ur=dr.exports,mr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},pr=[],fr={},gr=Object(g["a"])(fr,mr,pr,!1,null,null,null),vr=gr.exports,hr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.$route.name))])},br=[],Cr={},_r=Object(g["a"])(Cr,hr,br,!1,null,null,null),yr=_r.exports,wr=(a("4de4"),{methods:{confirmDelete:function(e){var t=this;t.confirm(t.$t("messages.areYouSure"),e)},confirm:function(e,t,a){var n=this;"function"===typeof e&&(t=e,e=n.$t("messages.areYouSure")+"?"),n.$dialog.confirm({title:n.$t("general.confirmation"),body:e},{okText:n.$t("buttons.ok"),cancelText:n.$t("buttons.cancel")}).then((function(e){"function"===typeof t&&t()})).catch((function(){"function"===typeof a&&a()}))}}}),xr=wr,Tr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(" "+e._s(e.value)+" ")])},kr=[],Sr={props:["value","row","xprops"]},Or=Sr,$r=Object(g["a"])(Or,Tr,kr,!1,null,null,null),jr=$r.exports,Ir=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"avatar"},[e.value?a("img",{staticClass:"avatar-img",attrs:{src:e.photoUrl}}):a("span",[a("i",{staticClass:"fa fa-stop"})])])},Er=[],Fr={props:["row","value","props","field"],computed:{photoUrl:function(){var e=this,t="";return t=e.row.avatar?e.row.avatarUrl:"https://oa.yoov.com/"+e.row.avatarUrl,t}}},Pr=Fr,Ar=(a("0565"),Object(g["a"])(Pr,Ir,Er,!1,null,null,null)),Dr=Ar.exports,Hr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[1===e.value?a("i",{staticClass:"fa fa-check-square-o"}):a("i",{staticClass:"fa fa-square-o"})])},Nr=[],Rr={props:["value"]},Vr=Rr,Mr=Object(g["a"])(Vr,Hr,Nr,!1,null,null,null),Lr=Mr.exports,Ur=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"td-common-link",on:{click:e.onClick}},[e._v(" "+e._s(e.value)+" ")])},qr=[],Br={props:["value","row","xprops","field"],methods:{onClick:function(){var e=this;e.xprops.eventbus.$emit("onRowCommand",{command:"onClick",row:e.row,fieldName:e.field,fieldValue:e.value})}}},Gr=Br,Kr=(a("562b"),Object(g["a"])(Gr,Ur,qr,!1,null,null,null)),zr=Kr.exports,Jr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-right"},[e._v(" "+e._s(e.formatMoney(parseFloat(e.value)))+" ")])},Qr=[],Wr={mixins:[wa],props:["value","row","xprops"],computed:{}},Yr=Wr,Xr=Object(g["a"])(Yr,Jr,Qr,!1,null,null,null),Zr=Xr.exports,el=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.trimDate))])},tl=[],al={props:["value"],computed:{trimDate:function(){var e=this,t="-";return e.value&&(t=""===e.value?"-":e.value.substr(0,10)),t}}},nl=al,ol=Object(g["a"])(nl,el,tl,!1,null,null,null),il=ol.exports,sl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"badge badge-success"},[e._v(" "+e._s(e._f("trim")(e.date1))+" ")]),""!==e.date2?[a("i",{staticClass:"fa fa-long-arrow-right"}),a("div",{staticClass:"badge badge-success"},[e._v(" "+e._s(e._f("trim")(e.date2))+" ")])]:e._e()],2)},rl=[],ll={props:["value","row","xprops"],filters:{trim:function(e){return e?e.substr(0,10):"(invalid date)"}},computed:{date1:function(){var e=this,t="";if(e.xprops["columnFields"]&&e.xprops["columnFields"]["dateRange"]&&e.xprops["columnFields"]["dateRange"]["date1"]&&e.row[e.xprops["columnFields"]["dateRange"]["date1"]]){var a=e.$moment(e.row[e.xprops["columnFields"]["dateRange"]["date1"]]);t=a.format("YYYY-MM-DD")}return t},date2:function(){var e=this,t="";if(e.xprops["columnFields"]&&e.xprops["columnFields"]["dateRange"]&&e.xprops["columnFields"]["dateRange"]["date2"]&&e.row[e.xprops["columnFields"]["dateRange"]["date2"]]){var a=e.$moment(e.row[e.xprops["columnFields"]["dateRange"]["date2"]]);t=a.format("YYYY-MM-DD")}return t}}},cl=ll,dl=Object(g["a"])(cl,sl,rl,!1,null,null,null),ul=dl.exports,ml={},pl=Object(g["a"])(ml,Ct,_t,!1,null,null,null),fl=pl.exports,gl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(e._s(e.gender))])},vl=[],hl={props:["value","row","xprops"],computed:{gender:function(){var e=this;return"m"===e.value?e.$t("general.male"):e.$t("general.female")}}},bl=hl,Cl=Object(g["a"])(bl,gl,vl,!1,null,null,null),_l=Cl.exports,yl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(" "+e._s(e.index)+" ")])},wl=[],xl=(a("c740"),{props:["data","value","row","xprops","query"],computed:{index:function(){var e=this,t=e.data.findIndex((function(t){return t.id===e.value}));return e.query.offset+t+1}}}),Tl=xl,kl=Object(g["a"])(Tl,yl,wl,!1,null,null,null),Sl=kl.exports,Ol=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.userData,expression:"userData"}],staticClass:"form-control",domProps:{value:e.userData},on:{input:[function(t){t.target.composing||(e.userData=t.target.value)},function(t){e.updateFieldValue(t.target.value)}]}})])},$l=[],jl={data:function(){return{userData:""}},props:["row","value","nested","xprops","field"],watch:{value:function(e){this.userData=e}},mounted:function(){var e=this;e.userData=e.value},methods:{updateFieldValue:function(e){var t=this;t.xprops.eventbus.$emit("onRowCommand",{command:"updateField",row:t.row,fieldName:t.field,fieldValue:e})},processCommand:function(e,t){var a=this;"undefined"===typeof t&&(t=!1),t?ae.showConfirmDialog(a,(function(){a.doProcessCommand(e)})):a.doProcessCommand(e)},doProcessCommand:function(e){var t=this;t.xprops.eventbus.$emit("onRowCommand",{command:e,row:t.row})}}},Il=jl,El=Object(g["a"])(Il,Ol,$l,!1,null,null,null),Fl=El.exports,Pl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.userData,expression:"userData"}],staticClass:"form-control",domProps:{value:e.userData},on:{input:[function(t){t.target.composing||(e.userData=t.target.value)},function(t){e.updateFieldValue(t.target.value)}]}}),a("button",{staticClass:"input-group-append btn-success",on:{click:e.onButtonClicked}},[a("font-awesome-icon",{attrs:{icon:"save"}})],1)])},Al=[],Dl={data:function(){return{userData:""}},props:["row","value","nested","xprops","field"],watch:{value:function(e){this.userData=e}},mounted:function(){var e=this;e.userData=e.value},methods:{onButtonClicked:function(){var e=this;e.xprops.eventbus.$emit("onRowCommand",{command:"saveField",row:e.row,fieldName:e.field,fieldValue:e.value})},updateFieldValue:function(e){var t=this;t.xprops.eventbus.$emit("onRowCommand",{command:"updateField",row:t.row,fieldName:t.field,fieldValue:e})},processCommand:function(e,t){var a=this;"undefined"===typeof t&&(t=!1),t?ae.showConfirmDialog(a,(function(){a.doProcessCommand(e)})):a.doProcessCommand(e)},doProcessCommand:function(e){var t=this;t.xprops.eventbus.$emit("onRowCommand",{command:e,row:t.row})}}},Hl=Dl,Nl=Object(g["a"])(Hl,Pl,Al,!1,null,null,null),Rl=Nl.exports,Vl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("date-picker",{attrs:{value:e.value,valueType:"format"},on:{input:function(t){return e.updateValue(t)}}})},Ml=[],Ll=a("ec45"),Ul={components:{datePicker:Ll["a"]},props:["value","xprops","row","field"],computed:{dateFormat:function(){var e=this,t="yy-mm-dd";return e.xprops.dateFormat&&(t=e.xprops.dateFormat),t}},methods:{updateValue:function(e){var t=this;t.xprops.eventbus.$emit("onRowCommand",{command:"updateField",row:t.row,fieldName:t.field,fieldValue:e})}}},ql=Ul,Bl=(a("1f5b"),Object(g["a"])(ql,Vl,Ml,!1,null,null,null)),Gl=Bl.exports,Kl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(" "+e._s(e.name)+" ")])},zl=[],Jl={props:["row","value","xprops"],computed:{name:function(){var e=this,t=[];return""!==e.row.first_name&&t.push(e.row.first_name),""!==e.row.surname&&t.push(e.row.surname),t.join(" ")}}},Ql=Jl,Wl=Object(g["a"])(Ql,Kl,zl,!1,null,null,null),Yl=Wl.exports,Xl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-nowrap action-btn-group btn-group-gap",class:e.customClass},[e._l(e.buttons,(function(t,n){return[a("action-button",{key:n,attrs:{statuses:e.xprops["statuses"],button:t,row:e.row,xprops:e.xprops}})]}))],2)},Zl=[],ec=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"btn",class:e.button.btnClass,attrs:{disabled:e.disabled},on:{click:e.processCommand}},[e.processing?a("font-awesome-icon",{staticClass:"fa-fw fa-spin",attrs:{icon:"spinner"}}):a("font-awesome-icon",{staticClass:"fa-fw",attrs:{icon:e.button.iconClass}})],1)},tc=[],ac=(a("c975"),{props:{statuses:{type:Array,default:function(){return[]}},button:{type:Object,default:null},xprops:{type:Object,default:null},row:{type:Object,default:function(){return null}}},computed:{disabled:function(){var e=this;return e.row.buttons&&-1===e.row.buttons.indexOf(e.button.command)},processing:function(){var e=this,t=e.button.command,a={print:"printing"},n=!1;if(e.statuses){var o=t;a[t]&&(o=a[t]);var i=o+":"+e.row["id"];e.statuses&&i&&(n=e.statuses.indexOf(i)>=0)}return n}},methods:{processCommand:function(){var e=this,t=e.button.command,a=!1;a="undefined"!==typeof e.button.needConfirm&&e.button.needConfirm,a?ae.showConfirmDialog(e,(function(){e.doProcessCommand(t)})):e.doProcessCommand(t)},doProcessCommand:function(e){var t=this;t.xprops.eventbus.$emit("onRowCommand",{command:e,row:t.row})}}}),nc=ac,oc=Object(g["a"])(nc,ec,tc,!1,null,null,null),ic=oc.exports,sc={components:{actionButton:ic},data:function(){return{buttons:[]}},computed:{customClass:function(){var e=this,t="btn-group-sm";return e.xprops.actionButtonSize&&(t="btn-group-"+e.xprops.actionButtonSize),t}},props:["row","nested","xprops"],mounted:function(){var e=this;if(e.xprops["buttons"]){e.buttons=[];for(var t=0;t<e.xprops.buttons.length;t++){var a=e.xprops.buttons[t];switch(a){case"view":e.buttons.push({iconClass:"file-alt",btnClass:"btn-info",command:"view"});break;case"update":e.buttons.push({iconClass:"save",btnClass:"btn-success",command:"update"});break;case"edit":e.buttons.push({iconClass:"edit",btnClass:"btn-primary",command:"edit"});break;case"duplicate":e.buttons.push({iconClass:"copy",btnClass:"btn-info",command:"duplicate"});break;case"delete":e.buttons.push({iconClass:"times",btnClass:"btn-danger",command:"delete"});break;case"print":e.buttons.push({iconClass:"print",btnClass:"btn-info",command:"print"});break;case"download":e.buttons.push({iconClass:"download",btnClass:"btn-info",command:"download"});case"email":e.buttons.push({iconClass:"envelope",btnClass:"btn-warning",command:"email"})}}}},methods:{}},rc=sc,lc=(a("4d7a"),Object(g["a"])(rc,Xl,Zl,!1,null,null,null)),cc=lc.exports,dc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(" "+e._s(e.status)+" ")])},uc=[],mc={props:["value","row","xprops"],computed:{status:function(){var e=this,t=e.$t("status."+e.value);if(e.xprops.statusOptions)for(var a=0;a<e.xprops.statusOptions.length;a++){var n=e.xprops.statusOptions[a];if(n.value===e.value){t=e.$t(n.labelTag);break}}return t}}},pc=mc,fc=Object(g["a"])(pc,dc,uc,!1,null,null,null),gc=fc.exports,vc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(" "+e._s(e.$t("general."+e.value))+" ")])},hc=[],bc={props:["row","value","field","xprops"]},Cc=bc,_c=Object(g["a"])(Cc,vc,hc,!1,null,null,null),yc=_c.exports,wc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("button",{staticClass:"btn btn-sm btn-width-50",class:{"btn-primary":e.value,"btn-outline-primary":!e.value},on:{click:function(t){return e.toggleEnabled(!0)}}},[a("i",{staticClass:"fa fa-check fa-fw"})]),a("button",{staticClass:"btn btn-sm btn-width-50",class:{"btn-primary":!e.value,"btn-outline-primary":e.value},on:{click:function(t){return e.toggleEnabled(!1)}}},[a("i",{staticClass:"fa fa-close fa-fw"})])])},xc=[],Tc={props:["field","value","row","xprops"],methods:{toggleEnabled:function(e){var t=this;console.log("TdYesNo :: field: ",t.field),console.log("TdYesNo :: value: ",t.value),console.log("TdYesNo :: row: ",t.row),console.log("TdYesNo :: xprops: ",t.xprops),t.xprops.eventBus.$emit("toggle_enabled",{target:t.row,field:t.field,value:e})}}},kc=Tc,Sc=Object(g["a"])(kc,wc,xc,!1,null,null,null),Oc=Sc.exports,$c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"th-field"},[e._v(" "+e._s(e.title)+" ")])},jc=[],Ic={props:["title","field"]},Ec=Ic,Fc=(a("0de4"),Object(g["a"])(Ec,$c,jc,!1,null,null,null)),Pc=Fc.exports,Ac=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"th-field"},[e._v(" "+e._s(e.$t(e.title))+" ")])},Dc=[],Hc={props:["title","field"]},Nc=Hc,Rc=(a("09d6"),Object(g["a"])(Nc,Ac,Dc,!1,null,null,null)),Vc=Rc.exports,Mc={TdCommon:jr,TdCommonAvatar:Dr,TdCommonCheckBox:Lr,TdCommonClick:zr,TdCommonCurrency:Zr,TdCommonDate:il,TdCommonDateRange:ul,TdCommonDummy:fl,TdCommonGender:_l,TdCommonIndex:Sl,TdCommonInput:Fl,TdCommonInputWithButton:Rl,TdCommonInputDate:Gl,TdCommonName:Yl,TdCommonOpt:cc,TdCommonStatus:gc,TdCommonTranslated:yc,TdCommonYesNo:Oc,ThSimpleHeader:Pc,ThCommonHeader:Vc},Lc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"content-header"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-sm-6"},[a("h1",[e._v(e._s(e.title))])]),a("div",{staticClass:"col-sm-6"},[a("breadcrumb",{attrs:{items:e.breadcrumb}})],1)])])])},Uc=[],qc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ol",{staticClass:"breadcrumb float-sm-right"},[e._l(e.items,(function(t){return[""!==t.routeName?a("li",{key:t.labelTag,staticClass:"breadcrumb-item"},[a("router-link",{attrs:{to:{name:t.routeName}}},[e._v(e._s(e.$t(t.labelTag)))])],1):a("li",{key:t.labelTag,staticClass:"breadcrumb-item active"},[e._v(e._s(e.$t(t.labelTag)))])]}))],2)},Bc=[],Gc={props:{items:{type:Array,default:function(){return[]}}}},Kc=Gc,zc=Object(g["a"])(Kc,qc,Bc,!1,null,null,null),Jc=zc.exports,Qc={components:{breadcrumb:Jc},props:{title:{type:String,default:""},breadcrumb:{type:Array,default:function(){return[]}}}},Wc=Qc,Yc=Object(g["a"])(Wc,Lc,Uc,!1,null,null,null),Xc=Yc.exports,Zc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{attrs:{id:e.id,title:e.title},on:{ok:e.handleOk}},[a("p",[e._v(e._s(e.messages))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userMessage,expression:"userMessage"}],staticClass:"form-control text-capitalize",domProps:{value:e.userMessage},on:{input:function(t){t.target.composing||(e.userMessage=t.target.value)}}}),a("small",[e._v(e._s(e.$t("messages.type_delete_to_force_deletion")))])])},ed=[],td={props:{id:{type:String,default:""},title:{type:String,default:""},messages:{type:String,default:""}},data:function(){return{userMessage:""}},methods:{handleOk:function(){var e=this;"DELETE"===e.userMessage.toUpperCase()&&e.$emit("onCommand",{command:"deleteByForce"})}}},ad=td,nd=Object(g["a"])(ad,Zc,ed,!1,null,null,null),od=nd.exports,id=r["default"].util.mergeOptions(wa,{template:'<div>\n      <section-header :title="$t(moduleNameTag)"\n        :breadcrumb="breadcrumb"></section-header>\n    \n      \x3c!-- Main content --\x3e\n      <section class="content">\n        <div class="bg-module mx-2 p-2">\n          <div v-if="mode===\'list\'" class="container-fluid">\n            <div class="row">\n              <div v-if="tableFilters.length>0" class="col-12 text-center mb-2">\n                <div class="btn-group">\n                  <button class="btn min-width-80"\n                    v-for="filter in tableFilters"\n                    @click="selectedFilter=filter.value"\n                    :key="filter.value"\n                    :class="{\'btn-primary\':selectedFilter===filter.value,\'btn-default\':selectedFilter!==filter.value}">\n                    {{ filter.caption }}\n                  </button>\n                </div>\n              </div>\n              <div class="col-12">\n                <div class="btn-toolbar mb-1 justify-content-between align-items-center"\n                 role="toolbar" \n                 aria-label="Toolbar with buttons">\n                  <h4 class="d-inline-block mr-2 my-0">                \n                     <font-awesome-icon icon="search" />\n                  </h4>\n                  <form @submit.prevent="search()">\n                    <div class="form-group m-0 d-inline-block" style="max-width:300px;">\n                      <div class="input-group">\n                        <input class="form-control" v-model="searchValue">\n                        <div class="input-group-append">\n                          <button type="button" @click="setSearchValue(\'\')"><i class="fas fa-fw fa-times"></i></button>\n                        </div>\n                      </div>                                      \n                    </div>\n                  </form>\n                  <h3 v-if="loading" class="d-inline-block ml-3 my-0 mr-auto">                \n                     <font-awesome-icon icon="spinner" class="fa-spin" />\n                  </h3>\n                  <button type="button"\n                          @click="onCommandHandler({command: \'new\'})"\n                          class="btn btn-primary ml-auto">\n                    <i class="fas fa-plus"></i>\n                  </button>\n                </div>\n              </div>\n              <div :id="tableId" class="col-12">\n                <datatable v-cloak v-bind="$data"></datatable>\n              </div>\n              \x3c!-- /.col --\x3e\n            </div>\n          </div>\n          <data-record v-else :recordId="selectedId"></data-record>\n        </div>\n        \x3c!-- /.row --\x3e\n      </section>\n      <force-delete-dialog id="forceDeleteDialog" :title="$t(\'general.confirmation\')"\n        :messages="forceDeleteMessage"\n        @onCommand="onCommandHandler">     \n      </force-delete-dialog>\n    </div>',mixins:[xr],components:Object(s["a"])(Object(s["a"])({sectionHeader:Xc},Mc),{},{forceDeleteDialog:od}),data:function(){return{tableFilters:[],selectedFilter:0,searchValue:"",searchable:!1,loading:!1,mode:"list",data:[],total:0,query:{filter:"",offset:0,sort:"",order:""},filterFields:"*",xprops:{buttons:["edit","delete"],eventbus:new r["default"]},tblStyle:{color:"#777",fontWeight:"normal"},HeaderSettings:!1,searchInputTimer:0,forceDeleteMessage:""}},mounted:function(){var e=this;"function"===typeof e.onMounting&&e.onMounting(),e.updateMode()},created:function(){this.xprops.eventbus.$on("onRowCommand",this.onRowCommandHandler)},computed:{user:function(){return this.$store.getters.user}},destroyed:function(){this.xprops.eventbus.$off("onRowCommand")},methods:{newRecord:function(){var e=this,t={urlCommand:e.apiPath+"/0"};e.$store.dispatch("AUTH_GET",t).then((function(t){"function"===typeof e.onRecordCreated?e.onRecordCreated(t):(console.log("newRecord :: onRecordCreated is not function"),e.$router.push({name:e.routeName,params:{id:t.data.id}}))}),(function(t){e.$toaster.warning(t.message)}))},onCommandHandler:function(e){var t=this,a=e.command;switch(a){case"new":t.newRecord();break;case"deleteByForce":t.doDeleteRow(t.selectedRow,(function(){t.selectedRow=null}));break}},onRowCommandHandler:function(e){var t=this,a=e.command,n=!1;if("function"===typeof t.onProcessingRowCommand&&(n=t.onProcessingRowCommand(e)),!n){var o=e.row;switch(a){case"onClick":t.editRow(o);break;case"edit":t.editRow(o);break;case"duplicate":t.duplicateRow(o);break;case"delete":t.confirmDialog(o,(function(){t.deleteRow(o)}));break;case"download":t.onProcessingCommand({command:"download",row:o});break;case"print":t.print(o);break}}},confirmDialog:function(e,t){var a=this;a.confirmDelete(t)},editRow:function(e){var t=this,a="/"+t.routeName+"/"+e.id;t.$router.push(a)},print:function(e){alert("not defined yet")},deleteRow:function(e){var t=this,a={urlCommand:t.apiPath+"/"+e.id};t.loading=!0,t.$store.dispatch("AUTH_DELETE",a).then((function(){t.loading=!1,t.selectedId=0,t.onQueryChangedHandler(),t.$toaster.success(t.$t("messages.successfully_deleted")),t.refreshDataList()}),(function(e){t.loading=!1,t.$toaster.error(t.$t("messages."+e.messageTag))}))},updateMode:function(){var e=this;(e.$route.params.id||0===e.$route.params.id)&&""!==e.$route.params.id?(e.mode="record",e.selectedId=parseInt(e.$route.params.id)):e.mode="list"},refreshData:function(e){var t=this;"list"===t.mode&&t.refreshDataList(e)},refreshDataList:function(e){var t=this;if(""!==t.apiPath){"undefined"===typeof e&&(e=t.query);var a={urlCommand:t.apiPath,query:e};t.loading=!0,t.$store.dispatch("AUTH_GET",a).then((function(e){t.loading=!1,t.data=e.data,e.current_page&&(t.total=e.total,t.query.page=e.current_page,t.query.offset=(t.query.page-1)*t.query.limit),"function"===typeof t.onDataLoaded&&(t.data=t.onDataLoaded(t.data))}),(function(){t.loading=!1,t.showSessionExpired("module data")}))}},onQueryChangedHandler:function(e){this.refreshData(e)},setSearchValue:function(e){var t=this;"undefined"===typeof e?e=t.searchValue:t.searchValue=e,t.query.filter=e?t.filterFields+":"+e:"",t.searchInputTimer=0},clearSearch:function(){var e=this;e.query.filter=e.filterFields+":",e.onQueryChangedHandler(e.query)},search:function(){}},watch:{"$route.params.id":function(e){var t=this;t.selectedId=e,t.updateMode(),e||t.refreshData()},searchValue:function(){var e=this;e.filterFields&&null!==e.filterFields?(0!==e.searchInputTimer&&clearTimeout(e.searchInputTimer),e.searchInputTimer=setTimeout(e.setSearchValue,2e3)):e.alert("No filter fields defined!")},query:{handler:function(e){var t=this;t.onQueryChangedHandler(e)},deep:!0}}}),sd=id,rd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"td-agent"},[e._v(" "+e._s(e.agentName)+" ")])},ld=[],cd={props:["row","value","xprops"],computed:{agentName:function(){var e=this;return e.value?e.value.name:"("+e.$t("general.unspecified")+")"}}},dd=cd,ud=Object(g["a"])(dd,rd,ld,!1,null,null,null),md=ud.exports,pd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center td-created-info"},[a("div",{staticClass:"d-inline-block"},[e._v(e._s(e.trimDate))]),e.isOwner?e._e():a("div",{staticClass:"text-center"},[a("div",{staticClass:"badge badge-warning"},[e._v("By "+e._s(e.row.creator.name))])])])},fd=[],gd={props:["value","row"],computed:{user:function(){var e=this;return e.$store.getters.user},isOwner:function(){var e=this;return e.row.user_id===e.user.id},trimDate:function(){var e=this,t="-";return e.value&&(t=""===e.value?"-":e.value.substr(0,10)),t}}},vd=gd,hd=(a("252c"),Object(g["a"])(vd,pd,fd,!1,null,null,null)),bd=hd.exports,Cd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"td-agent"},[e._v(" "+e._s(e.row["code_sent"])+" / "+e._s(e.row["code_count"])+" ")])},_d=[],yd={props:["row","value","xprops"]},wd=yd,xd=Object(g["a"])(wd,Cd,_d,!1,null,null,null),Td=xd.exports,kd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"td-common-link",on:{click:e.onClick}},[e.row.notes?a("div",{staticClass:"d-flex flex-column",staticStyle:{"line-height":"1.1"}},[a("div",{staticClass:"d-flex flex-row justify-content-start align-items-start"},[a("span",[e._v(e._s(e.value))]),a("div",{staticClass:"badge badge-info ml-2",attrs:{"data-toggle":"tooltips",title:"Record #"}},[e._v(e._s(e.row["id"]))])]),a("small",{staticClass:"voucher-notes"},[e._v(e._s(e.row.notes))])]):a("div",{staticClass:"d-flex flex-row justify-content-start align-items-center"},[a("span",[e._v(e._s(e.value))]),a("div",{staticClass:"badge badge-info ml-2",attrs:{"data-toggle":"tooltips",title:"Record #"}},[e._v(e._s(e.row["id"]))])])])},Sd=[],Od={props:["value","row","xprops","field"],methods:{onClick:function(){var e=this;e.xprops.eventbus.$emit("onRowCommand",{command:"onClick",row:e.row,fieldName:e.field,fieldValue:e.value})}}},$d=Od,jd=(a("0882"),Object(g["a"])($d,kd,Sd,!1,null,null,null)),Id=jd.exports,Ed=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center"},[a("font-awesome-icon",{staticClass:"fa-fw",class:e.qrcodeClass,attrs:{icon:"qrcode"}}),a("font-awesome-icon",{staticClass:"fa-fw",class:e.barcodeClass,attrs:{icon:"barcode"}})],1)},Fd=[],Pd={computed:{qrcodeClass:function(){var e=this,t="text-disabled";return""!==e.row["qrcode_comp"]&&(t="text-success"),t},barcodeClass:function(){var e=this,t="text-disabled";return""!==e.row["barcode_comp"]&&(t="text-success"),t}},mounted:function(){},props:["row","value","xprops","field"]},Ad=Pd,Dd=(a("68bb"),Object(g["a"])(Ad,Ed,Fd,!1,null,null,null)),Hd=Dd.exports,Nd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center line-height-1"},["voucher"===e.value?a("div",{staticClass:"d-flex flex-row"},[a("div",{staticClass:"badge badge-primary"},[e._v("Voucher")]),e.row["has_one_code"]?a("div",{staticClass:"ml-1",attrs:{"data-toggle":"tooltip",title:"Single Code"}},[a("div",{staticClass:"badge badge-warning"},[a("font-awesome-icon",{attrs:{icon:"ticket-alt"}})],1)]):a("div",{staticClass:"ml-1",attrs:{"data-toggle":"tooltip",title:"Multiple Codes"}},[a("div",{staticClass:"badge badge-success"},[a("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"ticket-alt"}}),a("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"ticket-alt"}}),e._v("... ")],1)])]):a("div",[e._m(0),a("div",{attrs:{"data-toggle":"tooltips",title:"Current / Goals"}},[a("small",[e._v(e._s(e.countDetails))])])])])},Rd=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"badge badge-success"},[e._v("Form "),a("i",{staticClass:"fas fa-caret-right"}),e._v(" Voucher")])}],Vd={props:["row","value","field","xprops"],computed:{countDetails:function(){var e=this,t=e.row["participant_count"];if("form"===e.value)switch(e.row["goal_type"]){case"codes":t=t+" / "+e.row["code_count"];break;case"fixed":t=t+" / "+e.row["goal_count"];break}return t}}},Md=Vd,Ld=Object(g["a"])(Md,Nd,Rd,!1,null,null,null),Ud=Ld.exports,qd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center line-height-1"},[e._v(" "+e._s(e.value)+" "),e.row["has_one_code"]?a("div",{staticClass:"badge badge-success"},[e._v("AUTO")]):a("div",{staticClass:"badge badge-success"},[e._v(" "+e._s(e.row["participant_assigned"])+" assigned ")])])},Bd=[],Gd={props:["row","value","field","xprops"]},Kd=Gd,zd=Object(g["a"])(Kd,qd,Bd,!1,null,null,null),Jd=zd.exports,Qd={TdAgent:md,TdCreatedInfo:bd,TdEmailSentTotal:Td,TdDescription:Id,TdCodes:Hd,TdType:Ud,TdParticipantCount:Jd},Wd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid"},[a("title-row",{attrs:{record:e.record,titleField:"description",subTitleField:"notes",loading:e.loading,processingButtons:e.processingButtons,buttons:["back","save"]},on:{onCommand:e.onCommandHandler}}),e.record?a("div",{staticClass:"w-100 d-flex flex-row justify-content-between",staticStyle:{"margin-top":"-20px"}},[a("div",{staticStyle:{color:"rgba(0,0,0,.6)"}},[e._v(e._s(e.record?"#"+e.record.id:""))]),a("div",[a("div",{staticClass:"p-0 m-0 mr-2 d-inline field-label"},[e._v(e._s(e.$t("general.created_at")))]),e._v(" "),a("div",{staticClass:"p-0 m-0 mr-2 d-inline text-black"},[e._v(e._s(e.record?e.record.created_at:""))]),a("div",{staticClass:"p-0 m-0 mr-2 d-inline field-label"},[e._v("By")]),a("div",{staticClass:"p-0 m-0 d-inline text-black"},[e._v(e._s(e.record?e.record.creator.name:""))])])]):e._e(),e.record?a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-sm-12 line-height-1"},[a("div",{staticClass:"field-item"},[a("div",{staticClass:"d-inline-block mr-3 field-label"},[e._v("Agent")]),a("div",{staticClass:"d-inline-block mr-3 field-content"},[e._v(e._s(e.agentName))])]),a("div",{staticClass:"field-item"},[a("div",{staticClass:"d-inline-block mr-3 field-label"},[e._v("Activation Date")]),a("div",{staticClass:"d-inline-block mr-3 field-content"},[e._v(e._s(e.record.activation_date))])]),a("div",{staticClass:"field-item"},[a("div",{staticClass:"d-inline-block mr-3 field-label"},[e._v(e._s(e.$t("vouchers.expiry_date")))]),a("div",{staticClass:"d-inline-block mr-3 field-content"},[e._v(e._s(e.record.expiry_date))])]),a("div",{staticClass:"field-item"},[a("div",{staticClass:"d-inline-block mr-3 field-label"},[e._v(e._s(e.$t("general.status")))]),a("div",{staticClass:"d-inline-block mr-3 field-content min-width-50",class:{"bg-danger":"sending"==e.record.status}},[e._v(e._s(e.record?e.ucfirst(e.record.status):"")+" ")])]),a("div",{staticClass:"field-item"},[e._m(0),e.qrcodeConfig.composition&&""!==e.qrcodeConfig.composition.trim()?a("div",{staticClass:"d-inline-block mr-3 field-content"},[e._v(e._s(e.qrcodeConfig.composition)+" ")]):a("div",{staticClass:"d-inline-block mr-3 field-content min-width-50 text-center"})]),a("div",{staticClass:"field-item"},[e._m(1),e.barcodeConfig.composition&&""!==e.barcodeConfig.composition.trim()?a("div",{staticClass:"d-inline-block mr-3 field-content"},[e._v(e._s(e.barcodeConfig.composition)+" ")]):a("div",{staticClass:"d-inline-block mr-3 field-content min-width-50 text-center"})]),a("div",{staticClass:"field-item"},[a("div",{staticClass:"d-inline-block mr-3 field-label"},[e._v(e._s(e.$t("general.type")))]),a("div",{staticClass:"d-inline-block mr-3 field-content min-width-50 text-center"},[e._v(e._s(e.ucfirst(e.record.voucher_type)))]),e.record&&"form"===e.record.voucher_type?a("div",{staticClass:"d-inline-block"},[a("copy-link",{attrs:{link:e.customLink,variant:"danger"}})],1):e._e()])])]):e._e(),e.record&&"sending"===e.record.status?a("div",{staticClass:"bg-danger text-white text-center p-2"},[a("h2",[e._v("Email is Sending.")]),a("h4",[e._v("Any modification is not recommended.")])]):e._e(),e.record?a("div",{staticClass:"voucher-toolbar mb-2"},[a("upload-button",{attrs:{record:e.record,cssClass:"float-right",size:"lg"},on:{onCommand:e.onCommandHandler}}),a("voucher-toolbar-button",{class:{"has-error":e.infoPageError},attrs:{caption:"Info",selected:"info"==e.activePage,imgSrc:e.IMAGE_PATH_INFO},on:{click:function(t){return e.onPageSelected("info")}}}),a("voucher-toolbar-button",{attrs:{caption:"Codes",selected:"codes"===e.activePage,imgSrc:e.IMAGE_PATH_CODES,badge:e.record?e.record.code_count:0},on:{click:function(t){return e.onPageSelected("codes")}}}),a("voucher-toolbar-button",{attrs:{caption:"Ticket",selected:"tickets"===e.activePage,imgSrc:e.IMAGE_PATH_TICKETS},on:{click:function(t){return e.onPageSelected("tickets")}}}),a("voucher-toolbar-button",{attrs:{caption:"Redemption",selected:"redemption"===e.activePage,imgSrc:e.IMAGE_PATH_REDEMPTION},on:{click:function(t){return e.onPageSelected("redemption")}}}),a("voucher-toolbar-button",{attrs:{caption:"Sharing",selected:"sharing"===e.activePage,imgSrc:e.IMAGE_PATH_SHARING},on:{click:function(t){return e.onPageSelected("sharing")}}}),"form"===e.record.voucher_type?a("voucher-toolbar-button",{attrs:{caption:"Form Filling",selected:"form_filling"===e.activePage,imgSrc:e.IMAGE_PATH_FORM_FILLING},on:{click:function(t){return e.onPageSelected("form_filling")}}}):e._e(),"form"===e.record.voucher_type?a("voucher-toolbar-button",{attrs:{caption:"Custom Forms",selected:"custom_forms"===e.activePage,imgSrc:e.IMAGE_PATH_CUSTOM_FORMS},on:{click:function(t){return e.onPageSelected("custom_forms")}}}):e._e(),a("voucher-toolbar-button",{attrs:{caption:"Participants",selected:"participants"===e.activePage,badge:e.record?e.record.participant_count:0,imgSrc:e.IMAGE_PATH_PARTICIPANTS},on:{click:function(t){return e.onPageSelected("participants")}}}),"voucher"===e.record.voucher_type?a("voucher-toolbar-button",{attrs:{caption:"Email",selected:"email"===e.activePage,imgSrc:e.IMAGE_PATH_EMAIL},on:{click:function(t){return e.onPageSelected("email")}}}):e._e(),e.isOwner?a("voucher-toolbar-button",{attrs:{caption:"Authorization",selected:"authorization"===e.activePage,imgSrc:e.IMAGE_PATH_AUTHORIZATION,badge:e.record?e.record.assigned_users.length:0},on:{click:function(t){return e.onPageSelected("authorization")}}}):e._e()],1):e._e(),e.record&&"info"===e.activePage?a("info-page",{ref:"infoPage",attrs:{record:e.record,qrcodeConfig:e.qrcodeConfig,barcodeConfig:e.barcodeConfig},on:{onError:function(t){return e.infoPageError=t},onCommand:e.onCommandHandler}}):e._e(),e.record&&"codes"===e.activePage?a("agent-code-page",{ref:"agentCodePage",attrs:{record:e.record,pusherChannel:e.pusherChannel},on:{onCommand:e.onCommandHandler}}):e._e(),e.record&&"tickets"===e.activePage?a("tickets-page",{ref:"ticketsPage",attrs:{voucher:e.record},on:{onCommand:e.onCommandHandler}}):e._e(),e.record&&"redemption"===e.activePage?a("redemption-page",{ref:"redemptionPage",attrs:{record:e.record,pusherChannel:e.pusherChannel},on:{onCommand:e.onCommandHandler}}):e._e(),e.record&&"sharing"===e.activePage?a("sharing-page",{ref:"sharingPage",attrs:{record:e.record},on:{onCommand:e.onCommandHandler}}):e._e(),e.record&&"form_filling"===e.activePage?a("form-filling-page",{ref:"formFillingPage",attrs:{record:e.record},on:{onCommand:e.onCommandHandler}}):e._e(),e.record&&"custom_forms"===e.activePage?a("custom-forms-page",{ref:"customFormsPage",attrs:{record:e.record},on:{onCommand:e.onCommandHandler}}):e._e(),e.record&&"participants"===e.activePage?a("participants-page",{ref:"participantsPage",attrs:{record:e.record},on:{onCommand:e.onCommandHandler}}):e._e(),e.record&&"authorization"===e.activePage?a("authorization-page",{ref:"authorizationPage",attrs:{record:e.record},on:{onCommand:e.onCommandHandler}}):e._e(),e.record&&"email"===e.activePage?a("email-page",{ref:"emailPage",attrs:{activeSectionKey:e.emailPageSectionKey,pusherChannel:e.pusherChannel,record:e.record},on:{onCommand:e.onCommandHandler}}):e._e(),(e.record,a("div",{staticClass:"text-center"},[a("h4",{staticClass:"text-center"},[e.loading?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):e._e()],1)])),a("image-cropper-dialog",{ref:"imageCropperDialog",attrs:{id:"imageCropperDialog",title:"Image Cropper",mediaId:e.selectedTempMediaId,mediaIdField:e.selectedTempMediaIdField,voucherId:e.recordId},on:{onCommand:e.onCommandHandler},model:{value:e.showingImageCropperDialog,callback:function(t){e.showingImageCropperDialog=t},expression:"showingImageCropperDialog"}}),a("voucher-select-dialog",{attrs:{id:"voucherSelectDialog",title:e.$t("vouchers.copyTemplateFrom"),initialAgentId:e.record?e.record.agent_id:0,okCommand:"copySelectedTemplate"},on:{onCommand:e.onCommandHandler},model:{value:e.showingCopyTemplateDialog,callback:function(t){e.showingCopyTemplateDialog=t},expression:"showingCopyTemplateDialog"}}),a("image-select-dialog",{ref:"imageSelectDialog",attrs:{id:"imageSelectDialog",title:"Image Selection",voucher:e.record,imageScope:e.imageScope},on:{onCommand:e.onCommandHandler},model:{value:e.showingImageSelectDialog,callback:function(t){e.showingImageSelectDialog=t},expression:"showingImageSelectDialog"}}),a("single-field-dialog",{ref:"singleFieldDialog",on:{onCommand:e.onCommandHandler}})],1)},Yd=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-inline-block mr-3 field-label",staticStyle:{"padding-top":"3px"}},[a("i",{staticClass:"fas fa-qrcode"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-inline-block mr-3 field-label",staticStyle:{"padding-top":"3px"}},[a("i",{staticClass:"fas fa-barcode"})])}],Xd=(a("a4d3"),a("e01a"),a("7db0"),a("ddb0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[e.record?a("div",{staticClass:"col-12 border-bottom border-2 mb-3"},[a("div",{staticClass:"d-flex flex-row justify-content-between"},[a("div",{staticClass:"record-title flex-grow-1 line-height-1"},[e.record&&e.record[e.titleField]&&e.record[e.titleField].length>0?a("h3",{staticClass:"d-inline mr-2"},[e._v(e._s(e.record[e.titleField]))]):e._e(),a("h3",{staticClass:"d-inline"},[e._v("["+e._s(0===e.record.id?e.$t("general.new"):e.$t("general.edit"))+"]")]),a("br"),a("div",{staticClass:"mb-1 record-notes text-muted"},[e._v(e._s(e.record[e.subTitleField]))])]),a("div",{staticClass:"btn-toolbar mb-1 flex-grow-0 justify-content-end",attrs:{role:"toolbar","aria-label":"Toolbar with buttons"}},e._l(e.buttonInfos,(function(t){return a("title-row-button",{key:t.command,attrs:{loading:e.loading,buttonInfo:t},on:{onCommand:e.onCommandHandler}})})),1)])]):e._e()])}),Zd=[],eu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{key:e.buttonInfo.command,staticClass:"btn min-width-100",class:"btn-"+e.buttonInfo.variant,attrs:{type:"button"},on:{click:e.onButtonClicked}},[a("font-awesome-icon",{class:e.currentIconClass,attrs:{icon:e.currentIcon}}),a("span",{staticClass:"ml-2"},[e._v(e._s(e.$t(e.buttonInfo.captionTag)))])],1)},tu=[],au={props:{buttonInfo:{type:Object,default:null},loading:{type:Boolean,default:!1}},computed:{currentIcon:function(){var e=this,t=e.buttonInfo.iconClass;return e.buttonInfo.toggleSpinner&&e.loading&&(t="spinner"),t},currentIconClass:function(){var e=this,t="";return e.buttonInfo.toggleSpinner&&e.loading&&(t="fa-spin"),t}},methods:{onButtonClicked:function(){var e=this;e.$emit("onCommand",{command:e.buttonInfo.command})}}},nu=au,ou=Object(g["a"])(nu,eu,tu,!1,null,null,null),iu=ou.exports,su={components:{titleRowButton:iu},props:{record:{type:Object,default:null},titleField:{type:String,default:""},subTitleField:{type:String,default:""},buttons:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},processingButtons:{type:Array,default:function(){return[]}}},watch:{loading:function(e){var t=this;e?(t.currentIcon="spinner",t.currentIconClass="spin"):(t.currentIcon="user",t.currentIconClass="")}},data:function(){return{buttonInfos:[],currentIcon:"user",currentIconClass:""}},mounted:function(){var e=this;e.updateButtonInfos()},methods:{isSpinnerActive:function(e){var t=this;return t.loading||e&&t.processingButtons.indexOf(e)>=0},onCommandHandler:function(e){var t=e.command,a=this;switch(t){case"save":a.$emit("onCommand",{command:"save"});break;case"back":a.$router.go(-1);break;default:a.$emit("onCommand",{command:t})}},updateButtonInfos:function(){var e=this;e.buttonInfos=[];for(var t=0;t<e.buttons.length;t++)switch(e.buttons[t]){case"back":e.buttonInfos.push({command:"back",variant:"outline-secondary",captionTag:"buttons.back",iconClass:"reply",toggleSpinner:!1});break;case"save":e.buttonInfos.push({command:"save",variant:"primary",captionTag:"buttons.save",iconClass:"save",processingState:"saving",toggleSpinner:!0});break;case"save_and_back":e.buttonInfos.push({command:"save_and_back",variant:"primary",captionTag:"buttons.save_and_back",iconClass:"save",processingState:"savingAndBack",toggleSpinner:!0});break}}}},ru=su,lu=(a("217e"),Object(g["a"])(ru,Xd,Zd,!1,null,null,null)),cu=lu.exports,du=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.cssClass},[a("xls-file-upload",{attrs:{inputId:"uploadCodes",uploadUrl:"/agent_codes/upload",postData:{id:e.record.id},title:e.title,size:e.size,cssClass:"btn-circle"},on:{onUploading:e.onUploadingHandler,onUploaded:e.onUploadedHandler}}),a("code-import-dialog",{ref:"codeImportDialog",attrs:{id:"codeImportDialog",importing:e.uploading,codeFieldsStr:e.codeFieldNamesStr,codeCount:e.record.code_count,singleCodeMode:1===e.record.has_one_code,participantFieldsStr:e.participantFieldNamesStr,callbackCommand:"confirmCodeImport"},on:{onCommand:e.onCommandHandler}})],1)},uu=[],mu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("file-upload",{ref:e.inputId,staticClass:"btn",class:e.containerClass,attrs:{"input-id":e.inputId,extensions:e.filterInfo.extensions,accept:e.filterInfo.accept,name:"file","post-action":e.postAction,drop:!e.edit,data:e.postData,headers:e.authHeaders},on:{click:e.checkCodeExists,"input-filter":e.inputFilter,"input-file":e.inputFile},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}},[a("i",{class:e.iconClass}),e._v(" "+e._s(e.title)+" ")])},pu=[],fu=a("8019"),gu=a.n(fu),vu={components:{fileUpload:gu.a},props:{inputId:{type:String,default:"file1"},refName:{type:String,default:"upload"},title:{type:String,default:"Upload"},iconClass:{type:String,default:"fas fa-upload"},postData:{type:Object,default:function(){return{}}},cssClass:{type:String,default:""},uploadUrl:{type:String,default:""},fileType:{type:String,default:"excel"},variant:{type:String,default:"primary"},size:{type:String,default:"md"}},data:function(){return{edit:!1,files:[]}},computed:{containerClass:function(){var e=this,t=["btn-"+e.variant];return t.push("btn-"+e.size),""!==e.title?t.push("min-width-100"):e.cssClass&&""!=e.cssClass&&t.push(e.cssClass),t.join(" ")},filterInfo:function(){var e=this;switch(e.fileType){case"excel":return{extensions:"xlsx",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"zip":return{extensions:"zip",accept:"application/zip"};case"image":return{extensions:"png",accept:"image/png"}}},authHeaders:function(){var e=this;return{Authorization:"bearer "+e.$store.getters.accessToken}},postAction:function(){var e=this;return e.$store.getters.apiUrl+e.uploadUrl}},methods:{inputFilter:function(e,t,a){var n=this;if(e&&!t)switch(n.fileType){case"excel":if(!/\.(xlsx)$/i.test(e.name))return alert("you file is not "+n.fileType+" file."),a();break;case"zip":if(!/\.(zip)$/i.test(e.name))return alert("you file is not "+n.fileType+" file."),a();break;case"image":if(!/\.(png)$/i.test(e.name))return alert("you file is not "+n.fileType+" file."),a();break}},checkCodeExists:function(){alert("check")},inputFile:function(e,t){var a=this;e&&!t&&(a.edit=!0,a.uploadFile()),!e&&t&&(this.edit=!1),e&&e.success&&(console.log("inputFile => onUploaded"),a.$emit("onUploaded",e.response.result))},uploadFile:function(){var e=this;e.$nextTick((function(){e.$emit("onUploading"),e.$refs[e.inputId].active=!0}))}}},hu=vu,bu=Object(g["a"])(hu,mu,pu,!1,null,null,null),Cu=bu.exports,_u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-dialog",{attrs:{id:"codeImportDialog",title:"Code Import",size:"lg",modalType:"confirmation",okButtonState:e.allowProceed,value:e.value},on:{onCommand:e.onCommandHandler,input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"dialogBody",fn:function(){return[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"d-flex flex-row"},[a("div",{staticClass:"flex-grow-1"},[a("div",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"flex-grow-1 import-code-content",staticStyle:{"max-height":"640px","overflow-y":"auto","overflow-x":"hidden","padding-right":"10px"}},[a("div",{staticClass:"row bg-lightblue",staticStyle:{position:"sticky",top:"0"}},[a("div",{staticClass:"col-sm-3 text-center import-table-header",staticStyle:{"border-right":"1px solid lightgray","overflow-x":"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[e._v("Column")]),a("div",{staticClass:"col-sm-3 text-center import-table-header",class:{disabled:!e.enableImportCode},staticStyle:{"border-right":"1px solid lightgray","padding-left":"5px","padding-right":"5px"}},[a("font-awesome-icon",{staticClass:"cursor-pointer",attrs:{icon:e.enableImportCode?"check-square":"square"},on:{click:function(t){e.enableImportCode=!e.enableImportCode}}}),e._v(" Code Table ")],1),a("div",{staticClass:"col-sm-6 text-center import-table-header",class:{disabled:!e.enableImportParticipant}},[a("font-awesome-icon",{staticClass:"cursor-pointer",attrs:{icon:e.enableImportParticipant?"check-square":"square"},on:{click:function(t){e.enableImportParticipant=!e.enableImportParticipant}}}),e._v(" Participant Table ")],1)]),e.hasError?a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-3"}),a("div",{staticClass:"col-sm-3"},[a("div",{staticClass:"badge badge-danger"},[e._v(e._s(e.errorMessages[0]))])]),a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"badge badge-danger"},[e._v(e._s(e.errorMessages[1]))])])]):e._e(),e._l(e.fieldInfos,(function(t){return a("div",{key:t.title,staticClass:"row content-row"},[a("div",{staticClass:"col-sm-3 line-height-1 align-self-center"},[a("div",{staticClass:"badge",class:e.getColumnClass(t)},[e._v(e._s(t.title))])]),a("div",{staticClass:"col-sm-3 import-code-table-content",class:{"disabled bg-muted":!e.enableImportCode}},[a("div",{staticClass:"btn-group mt-1"},e._l(e.codeFieldTypes,(function(n){return a("button",{key:n.value,staticClass:"btn btn-sm",class:{"btn-primary":t.fieldType===n.value,"btn-light":t.fieldType!==n.value},attrs:{type:"button"},on:{click:function(a){return e.selectFieldType(t,"code",n.value)}}},[e._v(e._s(n.label))])})),0)]),a("div",{staticClass:"col-sm-6 import-code-table-content",class:{"disabled bg-muted":!e.enableImportParticipant}},[a("div",{staticClass:"btn-group ml-2 mt-1"},e._l(e.participantFieldTypes,(function(n){return a("button",{key:n.value,staticClass:"btn btn-sm",class:{"btn-success":t.fieldType===n.value,"btn-light":t.fieldType!==n.value},attrs:{type:"button"},on:{click:function(a){return e.selectFieldType(t,"participant",n.value)}}},[e._v(e._s(n.label))])})),0)])])}))],2),a("div",{staticClass:"flex-grow-0"},[e.singleCodeMode?a("div",{staticClass:"mt-2 line-height-1 d-flex flex-row align-items-center",staticStyle:{"font-size":"80%"}},[e._v(" * Single code mode - only first code will be saved. ")]):e._e(),e.singleCodeMode&&e.codeCount>0?a("div",{staticClass:"mt-2 line-height-1",staticStyle:{"font-size":"80%"}},[e._v(" * One code existed. Replace? "),a("data-radio-toggle",{staticClass:"ml-2",attrs:{enabled:e.enableImportCode,btnClass:"btn-sm",options:e.yesNoOptions},model:{value:e.replaceSingleCode,callback:function(t){e.replaceSingleCode=t},expression:"replaceSingleCode"}})],1):e._e()])])]),a("div",{staticClass:"flex-grow-1 ml-1 d-flex flex-column justify-content-stretch",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"flex-grow-1 flex-grow-1 scrolling-pane"},[a("div",{staticClass:"px-2 existing-fields-container"},[a("div",{staticClass:"row bg-lightblue",staticStyle:{position:"sticky",top:"0"}},[a("div",{staticClass:"col-sm-12 text-center"},[e._v(" Existing Fields ")])]),a("div",{staticClass:"row bg-lightblue",staticStyle:{position:"sticky",top:"0"}},[a("div",{staticClass:"col-sm-6 text-center px-2"},[e._v("Code Table")]),a("div",{staticClass:"col-sm-6 text-center px-2",staticStyle:{"white-space":"nowrap","text-overflow":"none"}},[e._v("Participant Table")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("ul",{staticClass:"existing-field-list"},e._l(e.codeFields,(function(t,n){return a("li",{staticClass:"existing-field"},[e._v(" "+e._s(t)+" ")])})),0)]),a("div",{staticClass:"col-sm-6"},[a("ul",{staticClass:"existing-field-list"},e._l(e.participantFields,(function(t,n){return a("li",{staticClass:"existing-field"},[e._v(" "+e._s(t)+" ")])})),0)])])])])])]),e.importing?a("div",{staticClass:"backdrop d-flex flex-column justify-content-center align-items-center text-white"},[a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}})],1):e._e()])]},proxy:!0}])})},yu=[],wu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:e.id,attrs:{id:e.id,size:e.size,value:e.value,title:e.title},on:{input:function(t){return e.$emit("input",t)},shown:e.onShown},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100 text-right"},[a("div",{staticClass:"btn-toolbar justify-content-end"},["confirmation"===e.modalType?[e._t("buttonBar",[a("b-button",{staticClass:"min-width-80",attrs:{disabled:!e.okButtonState,variant:"primary",size:"sm"},on:{click:function(t){return e.$emit("onCommand",{command:"ok"})}}},[e._v(" "+e._s(e.$t("buttons.ok"))+" ")]),a("b-button",{staticClass:"min-width-80",attrs:{variant:"secondary",size:"sm"},on:{click:function(t){return e.closeDialog()}}},[e._v(" "+e._s(e.$t("buttons.cancel"))+" ")])])]:[a("b-button",{staticClass:"min-width-80",attrs:{variant:"secondary",size:"sm"},on:{click:function(t){return e.closeDialog()}}},[e._v(" "+e._s(e.$t("buttons.close"))+" ")])]],2)])]},proxy:!0}],null,!0)},[e._t("dialogBody")],2)},xu=[],Tu={model:{prop:"value",event:"input"},props:{okButtonState:{type:Boolean,default:!1},modalType:{type:String,default:"alert"},id:{type:String,default:""},value:{type:Boolean,default:!1},title:{type:String,default:"(no title)"},size:{type:String,default:"xl"}},watch:{},methods:{toggle:function(){var e=this;e.$refs[e.id].toggle()},onShown:function(){var e=this;e.$emit("onCommand",{command:"onShown"})},closeDialog:function(){var e=this;e.$emit("onCommand",{command:"onClosing"}),e.$emit("input",!1),e.$bvModal.hide(e.id)}}},ku=Tu,Su=(a("b6ec"),Object(g["a"])(ku,wu,xu,!1,null,null,null)),Ou=Su.exports,$u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btn-group data-radio-toggle",class:{disabled:!e.enabled}},e._l(e.options,(function(t){return a("button",{key:t.name,staticClass:"btn",class:e.getButtonClasses(t),attrs:{type:"button",disabled:!e.enabled},on:{click:function(a){return e.selectOption(t.value)}}},[e._v(" "+e._s(t.name)+" ")])})),0)},ju=[],Iu={model:{prop:"value",event:"input"},props:{btnClass:{type:String,default:""},value:{type:[String,Number],default:""},options:{type:Array,default:function(){return[]}},enabled:{type:Boolean,default:!0}},methods:{getButtonClasses:function(e){var t=this,a=[];return""!==t.btnClass&&a.push(t.btnClass),e.value===t.value?a.push("btn-success"):a.push("btn-light"),a.join(" ")},selectOption:function(e){var t=this;t.enabled&&t.$emit("input",e)}}},Eu=Iu,Fu=(a("7de7"),Object(g["a"])(Eu,$u,ju,!1,null,null,null)),Pu=Fu.exports,Au={components:{DataRadioToggle:Pu,baseDialog:Ou},computed:{allowProceed:function(){var e=this,t=!e.hasError&&!e.importing&&(e.enableImportCode||e.enableImportParticipant);return console.log("allowProceed :: hasError = "+e.hasError),console.log("allowProceed :: importing = "+e.importing),console.log("allowProceed :: includeCode = "+e.enableImportCode),console.log("allowProceed :: includeParticipant = "+e.enableImportParticipant),console.log("allowProceed :: singleCodeMode = "+e.singleCodeMode),console.log("allowProceed :: codeCount = "+e.codeCount),e.enableImportCode&&e.singleCodeMode&&e.codeCount>0&&(t=t&&1===e.replaceSingleCode),t},userFieldStrs:function(){for(var e=this,t={code:"",participant:""},a=[],n=[],o=0;o<e.fieldInfos.length;o++){var i=e.fieldInfos[o],s=i.fieldType;switch(s){case"code":case"code-other":a.push(i.title+":"+s);break;case"name":case"email":case"phone":case"participant-other":n.push(i.title);break}}return a.length>0&&(t.code=a.join("|")),n.length>0&&(t.participant=n.join("|")),t},hasError:function(){return""!==this.errorMessages[0]||""!==this.errorMessages[1]},errorMessages:function(){var e=this,t=["",""];return e.enableImportCode&&e.errorCode&&""!==e.errorCode&&(t[0]=e.errorCode),e.enableImportParticipant&&e.errorParticipant&&""!==e.errorParticipant&&(t[1]=e.errorParticipant),t},errorCode:function(){var e=this,t="";return!e.singleCodeMode&&e.hasCode&&"append"===e.importMode&&e.codeFieldsStr!==e.userFieldStrs.code&&(t="Mismatched"),t},errorParticipant:function(){var e=this,t="";return e.hasParticipant&&"append"===e.importMode&&e.participantFieldsStr!==e.userFieldStrs.participant&&(t="Mismatched"),t},hasCode:function(){var e=this;return e.codeFieldsStr&&""!==e.codeFieldsStr},codeFields:function(){var e=this,t=[];if(e.hasCode)for(var a=e.codeFieldsStr.split("|"),n=0;n<a.length;n++){var o=a[n].split(":");t.push(o[0])}return t},hasParticipant:function(){var e=this;return e.participantFieldsStr&&""!==e.participantFieldsStr},participantFields:function(){var e=this,t=[];return e.hasParticipant&&(t=e.participantFieldsStr.split("|")),t}},data:function(){return{replaceSingleCode:0,yesNoOptions:[{name:"Yes",value:1},{name:"No",value:0}],importMode:"new",importModes:[{name:"New / Overwrite",value:"new"},{name:"Append",value:"append"}],enableImportCode:!0,enableImportParticipant:!0,title:"",fieldInfos:[],tempFileKey:"",codeFieldTypes:[{label:"Code",value:"code"},{label:"Other",value:"code-other"}],participantFieldTypes:[{label:"Name",value:"name"},{label:"Phone",value:"phone"},{label:"Email",value:"email"},{label:"Other",value:"participant-other"}]}},props:{value:{type:Boolean,default:!1},callbackCommand:{type:String,default:"noCommand"},codeFieldsStr:{type:String,default:""},participantFieldsStr:{type:String,default:""},importing:{type:Boolean,default:!1},singleCodeMode:{type:Boolean,default:!1},codeCount:{type:Number,default:0}},model:{prop:"value",event:"input"},mounted:function(){},watch:{value:function(){var e=this;e.$nextTick((function(){}))}},methods:{getColumnClass:function(e){switch(e.fieldType){case"code":case"code-other":return"badge-primary";case"name":case"phone":case"email":case"participant-other":return"badge-success"}},selectFieldType:function(e,t,a){var n=this;if(e.fieldType!==a){for(var o="code"===t?"code-other":"participant-other",i=0;i<n.fieldInfos.length;i++)n.fieldInfos[i].fieldType===a?n.fieldInfos[i]!==e&&a!==o&&(n.fieldInfos[i].fieldType=o):n.fieldInfos[i]===e&&(n.fieldInfos[i].fieldType=a);n.fieldInfos=JSON.parse(JSON.stringify(n.fieldInfos))}else e.fieldType="none"},preInit:function(e,t){var a=this;a.fieldInfos=JSON.parse(JSON.stringify(e));for(var n=0;n<a.fieldInfos.length;n++)a.fieldInfos[n].fieldType=0===n?"code":"code-other";a.tempFileKey=t},onCommandHandler:function(e){var t=this,a=e.command;switch(a){case"ok":t.$emit("onCommand",{command:t.callbackCommand,key:t.tempFileKey,fieldInfos:t.fieldInfos,importMode:t.importMode,includeCode:t.enableImportCode,includeParticipant:t.enableImportParticipant}),t.$emit("input",!1);break;case"onShown":t.enableImportCode=!0,t.enableImportParticipant=!0,t.importMode="append";break}}}},Du=Au,Hu=(a("78a7"),Object(g["a"])(Du,_u,yu,!1,null,null,null)),Nu=Hu.exports,Ru={components:{xlsFileUpload:Cu,codeImportDialog:Nu},data:function(){return{uploading:!1}},props:{record:{type:Object,default:null},title:{type:String,default:""},size:{type:String,default:"md"},cssClass:{type:String,default:""}},computed:{codeFieldsStr:function(){var e=this;return e.record.code_fields},codeFieldNamesStr:function(){var e=this,t="",a=[];if(e.codeFieldsStr&&""!==e.codeFieldsStr){a=e.codeFieldsStr.split("|");for(var n=[],o=0;o<a.length;o++){var i=a[o].split(":"),s=0===o?"code":"code-other";n.push(i[0]+":"+s)}t=n.join("|")}return t},participantFieldNamesStr:function(){var e=this,t=[];if(e.record.participant_configs&&e.record.participant_configs["inputObjs"])for(var a=e.record.participant_configs["inputObjs"],n=0;n<a.length;n++)t.push(a[n].name);return t.join("|")}},methods:{onCommandHandler:function(e){var t=this;switch(e.command){case"confirmCodeImport":t.onParsingCodes(e);break}},onUploadingHandler:function(){var e=this;e.uploading=!0,e.$bvModal.hide("codeImportDialog")},onParsingCodes:function(e){var t=this,a={urlCommand:"/agent_codes/parse/"+e.key,data:{fieldInfos:e.fieldInfos,includeCode:e.includeCode,includeParticipant:e.includeParticipant,singleCodeMode:t.record.has_one_code}};t.uploading=!0,t.$store.dispatch("AUTH_POST",a).then((function(e){t.uploading=!1;var a=[];e.codeFields&&(t.updateCodeFields(e),e.existing>0?a.push(e.existing+" code(s) are duplicated"):a.push("No code(s) is duplicated"),e.new>0?a.push(e.new+" code(s) are added"):a.push("no code(s) are added")),e.participantConfigs&&(t.updateParticipantFields(e),a.push(e.participantIds.length+" participant(s) are added")),t.$dialog.alert(a.join("<br/>"),{html:!0}),t.$bvModal.hide("codeImportDialog"),t.$emit("onCommand",{command:"onUploadCompleted"})}),(function(e){t.uploading=!1,console.log("error: ",e)}))},updateCodeFields:function(e){var t=this,a=e.codeFields;t.codeFieldsStr!==a&&t.$emit("onCommand",{command:"setCodeFields",value:a}),t.$emit("onCommand",{command:"setRecordField",fieldName:"code_count",fieldValue:e.codeCount}),e.code_composition&&t.$emit("onCommand",{command:"setQrCodeAndBarcodeComposition",data:e.code_composition})},updateParticipantFields:function(e){var t=this,a=e.participantConfigs,n=e.participantCount;JSON.stringify(t.record.participant_configs)!==JSON.stringify(a)&&t.$emit("onCommand",{command:"updateField",fieldName:"participant_configs",fieldValue:a}),t.$emit("onCommand",{command:"updateField",fieldName:"participant_count",fieldValue:n})},onUploadedHandler:function(e){var t=this;t.uploading=!1,t.$refs.codeImportDialog.preInit(e.fields,e.key),t.$bvModal.show("codeImportDialog")}}},Vu=Ru,Mu=Object(g["a"])(Vu,du,uu,!1,null,null,null),Lu=Mu.exports,Uu=r["default"].util.mergeOptions(wa,{methods:{refresh:function(e){var t=this,a={urlCommand:t.apiPath+"/"+e};t.loading=!0,t.$store.dispatch("AUTH_GET",a).then((function(e){t.loading=!1,t.record=e.data,"function"===typeof t.onRefreshed&&t.onRefreshed(),t.$forceUpdate()}),(function(e){console.log("DataRecordMixin: error: ",e)}))}}}),qu=Uu,Bu=a("2cbf"),Gu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-dialog",{attrs:{id:"voucherSelectDialog",title:e.title,modalType:"confirmation",okButtonState:null!==e.selectedVoucher,size:"xl",value:e.value},on:{onCommand:e.onCommandHandler,input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"dialogBody",fn:function(){return[a("div",{staticClass:"left-pane d-flex flex-column"},[a("div",[e._v(e._s(e.$t("menu.agents")))]),a("div",{staticClass:"left-pane-scroll flex-grow-1"},[a("b-list-group",{staticStyle:{"line-height":"1"}},e._l(e.agents,(function(t){return a("b-list-group-item",{key:t.id,class:{active:e.selectedAgent&&e.selectedAgent.id===t.id},on:{click:function(a){e.selectedAgent=t}}},[e._v(" "+e._s(t.name)+" "),a("div",{staticClass:"badge badge-warning"},[a("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"ticket-alt"}}),e._v(" x "+e._s(t.voucher_count)+" ")],1)])})),1)],1)]),a("div",{staticClass:"right-pane d-flex flex-column"},[a("div",[e._v(e._s(e.$t("menu.vouchers")))]),a("div",{staticClass:"right-pane-scroll flex-grow-1"},[a("b-list-group",{staticStyle:{"line-height":"1"}},[e.loading?a("h3",{staticClass:"text-center pt-5"},[e.loading?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):e._e()],1):e._l(e.vouchers,(function(t){return a("b-list-group-item",{key:t.id,staticClass:"voucher-item d-flex flex-row align-items-between",class:{active:e.selectedVoucher==t},on:{click:function(a){e.selectedVoucher=t}}},[a("div",{staticClass:"d-flex flex-column justify-content-center voucher-item-title-block flex-grow-1"},[t.notes?[a("h5",{staticClass:"p-0 m-0 voucher-item-description"},[e._v(e._s(t.description))]),a("small",{staticClass:"voucher-item-notes"},[e._v(e._s(t.notes))])]:[a("h5",{staticClass:"p-0 m-0 voucher-item-description"},[e._v(e._s(t.description))])]],2),a("div",{staticClass:"d-flex flex-column justify-content-between min-width-200"},[a("small",{staticClass:"voucher-note"},[a("div",{},[e._v(" "+e._s(e.$t("vouchers.coupons"))+": "),a("div",{staticClass:"d-inline note-value"},[e._v(e._s(t.code_count))])])]),a("small",{staticClass:"voucher-note"},[a("div",{},[e._v(" "+e._s(e.$t("general.created_at"))+": "),a("div",{staticClass:"d-inline note-value"},[e._v(e._s(t.created_at))])])])])])}))],2)],1)])]},proxy:!0}])})},Ku=[],zu={mixins:[wa],components:{baseDialog:Ou},props:{id:{type:String,default:""},title:{type:String,default:""},value:{type:Boolean,default:!1},initialAgentId:{type:Number,default:0},okCommand:{type:String,default:""}},computed:{agents:function(){return this.$store.getters.agents}},model:{prop:"value",event:"input"},data:function(){return{loading:!1,selectedAgent:null,selectedVoucher:null,vouchers:[]}},watch:{initialAgentId:function(){this.setInitialAgent()},"selectedAgent.id":function(e){var t=this;t.selectedVoucher=null,t.fetchAgentVouchers()}},mounted:function(){var e=this;e.setInitialAgent(),e.fetchAgentVouchers()},methods:{onCommandHandler:function(e){var t=this,a=e.command;switch(a){case"ok":t.selectedVoucher&&t.$emit("onCommand",{command:t.okCommand,voucher:t.selectedVoucher});break}},setInitialAgent:function(){var e=this;if(0===e.initialAgentId)e.selectedAgent=null;else for(var t=0;t<e.agents.length;t++)if(e.agents[t].id===e.initialAgentId){e.selectedAgent=e.agents[t];break}},fetchAgentVouchers:function(){var e=this;if(e.selectedAgent){var t={urlCommand:"/vouchers",options:{params:{agentId:e.selectedAgent.id,type:"selection"}}};e.loading=!0,e.$store.dispatch("AUTH_GET",t).then((function(t){e.loading=!1,e.vouchers=t}),(function(){e.loading=!1,e.showSessionExpired("agent vouchers")}))}}}},Ju=zu,Qu=(a("d935"),Object(g["a"])(Ju,Gu,Ku,!1,null,null,null)),Wu=Qu.exports,Yu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-dialog",{ref:"baseDialog",attrs:{id:"imageSelectDialog",title:e.title,modalType:"confirmation",okButtonState:null!==e.selectedImage,size:"xl",value:e.value},on:{onCommand:e.onCommandHandler,input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"dialogBody",fn:function(){return[a("div",{directives:[{name:"show",rawName:"v-show",value:e.$refs.upload&&e.$refs.upload.dropActive,expression:"$refs.upload && $refs.upload.dropActive"}],staticClass:"drop-active"},[a("h3",[e._v("Drop files to upload")])]),a("div",{staticClass:"w-100 d-flex flex-column",staticStyle:{"min-height":"100%"}},[a("div",{staticClass:"mb-2"},[a("data-radio-toggle",{attrs:{btnClass:"min-width-100",options:e.scopeOptions},model:{value:e.activeScope,callback:function(t){e.activeScope=t},expression:"activeScope"}})],1),a("div",{staticClass:"flex-grow-1 d-flex flex-row"},[e.hasGroups?a("div",{staticClass:"left-pane"},[a("div",{staticClass:"left-pane-scroll"},[a("ul",{staticClass:"list-group group-list"},e._l(e.groups,(function(t){return a("li",{key:t.id,staticClass:"list-group-item",class:{"bg-primary selected":e.selectedGroup===t,"bg-light":e.selectedGroup!==t},on:{click:function(a){e.selectedGroup=t}}},[""!==t.description?a("span",[e._v(e._s(t.description))]):a("span",[e._v("(No Title)")])])})),0)])]):e._e(),a("div",{staticClass:"right-pane"},[a("div",{staticClass:"right-pane-scroll"},[e.hasGroups&&e.selectedGroup?a("div",{staticClass:"image-list-panel pt-1"},e._l(e.selectedGroup.images,(function(t){return a("image-item",{key:t.id,attrs:{imageItem:t,activeImage:e.selectedImage},on:{onCommand:e.onCommandHandler}})})),1):a("div",{staticClass:"image-list-panel pt-1"},e._l(e.images,(function(t){return a("image-item",{key:t.id,attrs:{imageItem:t,activeImage:e.selectedImage},on:{onCommand:e.onCommandHandler}})})),1)])])])]),e.loading?a("h3",{staticClass:"loading-bkgd d-flex flex-column justify-content-center align-items-center"},[a("i",{staticClass:"fas fa-spinner fa-3x fa-spin"})]):e._e()]},proxy:!0},{key:"buttonBar",fn:function(){return[a("file-upload",{ref:e.inputId,staticClass:"btn btn-primary min-width-100",attrs:{"input-id":e.inputId,"post-action":e.postAction,extensions:e.extensions,accept:e.accept,multiple:e.multiple,directory:e.directory,size:e.size||0,thread:e.thread<1?1:e.thread>5?5:e.thread,headers:e.authHeaders,data:e.postData,drop:!e.edit,"drop-directory":e.dropDirectory,"add-index":e.addIndex},on:{"input-filter":e.inputFilter,"input-file":e.inputFile},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}},[a("i",{staticClass:"fas fa-fw fa-upload"}),e._v(" Upload ")]),a("button",{staticClass:"min-width-100 btn btn-primary",attrs:{disabled:e.loading&&!e.selectedImage},on:{click:e.confirmImage}},[e._v("OK")]),a("button",{staticClass:"min-width-100 btn btn-secondary",attrs:{disabled:e.loading},on:{click:e.closeDialog}},[e._v("Cancel")])]},proxy:!0}])})},Xu=[],Zu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"image-item ml-1 m-0",class:{active:e.activeImage===e.imageItem},on:{click:e.selectImage}},[a("img",{attrs:{src:e.imageSrc}}),a("div",{staticClass:"image-border d-flex flex-column justify-content-between"},[a("div",[a("button",{staticClass:"btn btn-circle btn-danger float-right",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.deleteImage(t)}}},[a("i",{staticClass:"fas fa-times"})])]),a("copy-link",{staticClass:"copy-link",attrs:{cssClass:"copy-link-class",label:"["+e.imageItem.id+"]",link:e.imageSrc,downloadLink:e.downloadLink},on:{onCommand:e.onCommandHandler}})],1)])},em=[],tm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"container",staticClass:"d-flex flex-row align-items-center icon-link",class:e.cssClass},[a("div",{staticClass:"d-inline-block link-icon",class:e.itemClass,on:{click:function(t){return e.gotoLink(e.link)}}},[a("font-awesome-icon",{attrs:{icon:"location-arrow"}})],1),e.showQr?a("div",{staticClass:"d-inline-block link-icon",class:e.itemClass,on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.showQrCode()}}},[a("font-awesome-icon",{attrs:{icon:"qrcode"}})],1):e._e(),e.hideLink?e._e():a("div",{staticClass:"badge flex-grow-1 mr-1 key-value link-label overflow-hidden",class:"badge-"+e.variant,attrs:{"data-toggle":"tooltip",title:e.linkLabel},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.copyLink()}}},[e._v(" "+e._s(e.linkLabel)+" ")]),a("div",{staticClass:"d-inline-block link-icon",class:e.itemClass,on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.copyLink()}}},[a("font-awesome-icon",{attrs:{icon:"copy"}})],1),e.downloadLink?a("div",{staticClass:"d-inline-block link-icon",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.copyDownloadLink()}}},[a("font-awesome-icon",{attrs:{icon:"download"}})],1):e._e()])},am=[],nm={computed:{linkLabel:function(){var e=this,t=e.link;return""!==e.label&&(t=e.label),t},itemClass:function(){var e=this;return e.hideLink?"mr-2":"mr-1"}},props:{cssClass:{type:String,default:""},hideLink:{type:Boolean,default:!1},showQr:{type:Boolean,default:!1},label:{type:String,default:""},link:{type:String,default:""},downloadLink:{type:String,default:""},variant:{type:String,default:"primary"}},methods:{showQrCode:function(){var e=this;console.log("CopyLink.vue :: showQrCode"),e.$emit("onCommand",{command:"showQrCodeDialog",link:e.link,codeKey:e.label})},copyLink:function(){var e=this,t=e.$refs.container;e.$copyText(e.link,t),console.log("CopyLink :: link = "+e.link),e.$toaster.info(e.$t("messages.link_copied_to_clipboard"))},copyDownloadLink:function(){var e=this,t=e.$refs.container;e.$copyText(e.downloadLink,t),console.log("CopyLink :: download link = "+e.downloadLink),e.$toaster.info(e.$t("messages.download_link_copied_to_clipboard"))},gotoLink:function(e){window.open(e,"_blank")}}},om=nm,im=(a("6fff"),Object(g["a"])(om,tm,am,!1,null,null,null)),sm=im.exports,rm={components:{copyLink:sm},computed:{downloadLink:function(){var e=this;return e.$store.getters.appHost+"/download/image/"+e.imageItem.id},imageSrc:function(){var e=this;return e.$store.getters.appHost+"/media/image/"+e.imageItem.id}},props:{imageItem:{type:Object,default:null},activeImage:{type:Object,default:null},objectFitMode:{type:String,default:"cover"}},methods:{onCommandHandler:function(e){switch(e.command){case"onLinkClicked":window.open(e.link,"_blank");break}},deleteImage:function(){var e=this;e.$emit("onCommand",{command:"onDeleteImage",image:e.imageItem})},selectImage:function(){var e=this;console.log("ImageItem :: selectImage"),e.$emit("onCommand",{command:"onImageSelected",image:e.imageItem})}}},lm=rm,cm=(a("6704"),Object(g["a"])(lm,Zu,em,!1,null,null,null)),dm=cm.exports,um=(a("7eb6"),{mixins:[wa,xr],components:{baseDialog:Ou,imageItem:dm,dataRadioToggle:Pu,fileUpload:gu.a},props:{id:{type:String,default:""},title:{type:String,default:""},voucher:{type:Object,default:null},value:{type:Boolean,default:!1},initialAgentId:{type:Number,default:0},imageScope:{type:String,default:""}},computed:{authHeaders:function(){var e=this;return{Authorization:"bearer "+e.$store.getters.accessToken}},postData:function(){var e=this;return{voucherId:e.voucher?e.voucher.id:0,scope:e.activeScope,scopeItemId:e.selectedGroup?e.selectedGroup.id:0}},postAction:function(){var e=this;return e.$store.getters.apiUrl+e.uploadUrl},hasGroups:function(){var e=this;return"all"!==e.activeScope&&"local"!==e.activeScope},agents:function(){return this.$store.getters.agents}},mounted:function(){var e=this;e.activeScope=e.scopeOptions[0].value,e.voucher&&e.$nextTick((function(){e.fetchImages()}))},model:{prop:"value",event:"input"},watch:{voucher:function(){var e=this;console.log("ImageSelectDialog :: watch(voucher) => fetchImages"),e.fetchImages()},activeScope:function(e){var t=this;console.log("ImageSelectDialog :: watch(activeScope) => fetchImages"),t.fetchImages()}},data:function(){return{inputId:"imageUpload",files:[],accept:"image/png,image/gif,image/jpeg,image/webp",extensions:"gif,jpg,jpeg,png,webp",minSize:1024,size:10485760,multiple:!1,directory:!1,edit:!1,drop:!1,dropDirectory:!0,addIndex:!1,thread:3,name:"file",uploadUrl:"/media/upload_image",autoCompress:1048576,uploadAuto:!1,isOption:!1,addData:{show:!1,name:"",type:"",content:""},editFile:{show:!1,name:""},scopeOptions:[{name:"This Voucher",value:"local"},{name:"Vouchers",value:"voucher"},{name:"Agents",value:"agent"},{name:"All",value:"all"}],activeScope:"local",objectFitMode:"cover",loading:!1,selectedImage:null,selectedGroup:null,groups:[],images:[],DEMO_IMAGES:[{id:1},{id:2},{id:3},{id:4},{id:5},{id:6},{id:7},{id:8},{id:9}],DEMO_GROUPS:[{id:1,name:"group 1",images:[{id:1},{id:2},{id:3}]},{id:2,name:"group 2",images:[{id:1},{id:2},{id:3},{id:4}]},{id:3,name:"group 3",images:[{id:1},{id:2},{id:3},{id:4},{id:5}]},{id:4,name:"group 4",images:[{id:1},{id:2},{id:3},{id:4},{id:5},{id:6}]}]}},methods:{toggle:function(){var e=this;e.$refs.baseDialog.toggle()},updateImages:function(e){var t=this;t.imageCount=e.count},closeDialog:function(){var e=this;e.$emit("input",!1),e.$bvModal.hide("imageSelectDialog")},inputFilter:function(e,t,a){if(e&&!t){if(/(\/|^)(Thumbs\.db|desktop\.ini|\..+)$/.test(e.name))return a();if(/\.(php5?|html?|jsx?)$/i.test(e.name))return a()}},inputFile:function(e,t){var a=this;e&&!t&&(a.edit=!0,a.$refs.imageUpload.active=!0),!e&&t&&(this.edit=!1),e&&e.success&&(console.log("inputFile :: newfile: ",e),console.log("inputFile :: newfile.success: ",e.success),console.log("inputFile :: oldFile: ",t),a.fetchImages())},deleteImage:function(e){var t=this;t.confirm("Are you sure?",(function(){var a={urlCommand:"/medias/"+e.id};t.$store.dispatch("AUTH_DELETE",a).then((function(){t.fetchImages()}))}))},refresh:function(){console.log("ImageSelectDialog :: refresh"),this.fetchImages()},fetchImages:function(){var e=this;if(e.voucher){console.log("fetchImages :: voucher exists: ",e.voucher),console.log("fetchImages :: activeScope = "+e.activeScope),e.loading=!0;var t={urlCommand:"/medias",options:{params:{scope:e.activeScope,voucherId:e.voucher.id}}};e.$store.dispatch("AUTH_GET",t).then((function(t){console.log("fetchImages :: response: ",t),e.hasGroups?(e.groups=t,e.groups.length>0?(e.selectedGroup=e.groups[0],e.selectedImage=null):e.selectedGroup=null):(e.images=t,e.selectedImage=null),e.loading=!1}))}else console.log("fetchImages :: voucher not exists")},confirmImage:function(){var e=this;e.selectedImage&&(e.toggle(),e.$emit("onCommand",{command:"onImageSelected",imageScope:e.imageScope,imageId:e.selectedImage.id}))},onCommandHandler:function(e){var t=this,a=e.command;switch(a){case"onDeleteImage":t.deleteImage(e.image);break;case"onImageSelected":t.selectedImage=e.image;break;case"ok":t.confirmSelectedImage();break}}}}),mm=um,pm=(a("4b62"),Object(g["a"])(mm,Yu,Xu,!1,null,null,null)),fm=pm.exports,gm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-dialog",{attrs:{id:"imageCropperDialog",title:e.title,modalType:"confirmation",size:"xl",okButtonState:!0,value:e.value},on:{onCommand:e.onCommandHandler,input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"dialogBody",fn:function(){return[a("div",{staticClass:"d-flex flex-row"},[a("div",{staticClass:"left-pane"},[e._v(" Image "),a("div",{staticClass:"left-pane-scroll d-flex flex-column"},[a("div",{staticClass:"cut",staticStyle:{width:"800px",height:"400px"}},[a("vue-cropper",{ref:"cropper",attrs:{img:e.imageSrc,"output-size":e.option.outputSize,"output-type":e.option.outputType,info:e.option.info,full:e.option.full,fixed:e.option.fixed,"fixed-number":e.option.fixedNumber,canMoveBox:!0,canMove:!0,maxImgSize:e.option.maxImgSize,"auto-crop":e.option.autoCrop,"auto-crop-width":e.option.autoCropWidth,"auto-crop-height":e.option.autoCropHeight,"fixed-box":e.option.fixedBox,original:e.option.original,mode:e.option.mode,"center-box":e.option.centerBox},on:{"real-time":e.realTime,"img-load":e.imgLoad}})],1)])]),a("div",{staticClass:"right-pane"},[e._v(" Preview "),a("div",{staticClass:"right-pane-scroll"},[e.previews?a("div",{staticClass:"show-preview",style:{width:e.previews.w+"px",height:e.previews.h+"px",overflow:"hidden",margin:"5px"}},[a("div",[a("img",{style:e.previews.img,attrs:{src:e.previews.url}})])]):e._e()])])])]},proxy:!0}])})},vm=[],hm=a("7e79"),bm={mixins:[wa],components:{baseDialog:Ou,vueCropper:hm["VueCropper"]},props:{voucherId:{type:Number,default:0},mediaId:{type:Number,default:0},title:{type:String,default:""},value:{type:Boolean,default:!1},mediaIdField:{type:String,default:""}},model:{prop:"value",event:"input"},data:function(){return{loading:!1,option:{outputSize:1,outputType:"jpg",info:!0,full:!0,fixed:!1,fixedNumber:[1,1],canMove:!0,canMoveBox:!0,fixedBox:!1,autoCrop:!0,autoCropWidth:256,autoCropHeight:256,maxImgSize:512,original:!0,mode:"contain",centerBox:!0,high:!0},previews:{}}},mounted:function(){},methods:{change:function(e){e.coordinates,e.canvas},startCrop:function(){var e=this;e.$refs.cropper&&e.$refs.cropper.startCrop()},reset:function(){var e=this;e.$refs.cropper.clearCrop(),e.$refs.cropper.changeScale(1)},realTime:function(e){this.previews=e},imgLoad:function(){},onCommandHandler:function(e){var t=this,a=e.command;switch(a){case"onClosing":t.deleteMedia(t.mediaId);break;case"ok":this.$refs.cropper.getCropBlob((function(e){var a=new FormData,n="image-name-"+(new Date).getTime()+".jpg";a.append("name",n),a.append("file",e,n),a.append("width",256),t.$http.post(t.$store.getters.apiUrl+"/media/upload",a,{contentType:!1,processData:!1,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"bearer "+t.$store.getters.accessToken}}).then((function(e){t.$emit("onCommand",{command:"setRecordField",fieldName:t.mediaIdField,fieldValue:e.data.result.imageId}),t.deleteMedia(t.mediaId),t.$bvModal.hide("imageCropperDialog"),t.$emit("input",!1)}))}));break}},deleteMedia:function(e){var t=this,a={urlCommand:"/medias/"+e};t.$store.dispatch("AUTH_DELETE",a).then((function(e){console.log("ImageCropperDialog :: AUTH_DELETE :: response: ",e)}))}},computed:{imageSrc:function(){var e=this;return e.$store.getters.appHost+"/media/image/"+e.mediaId}}},Cm=bm,_m=(a("2f99"),Object(g["a"])(Cm,gm,vm,!1,null,null,null)),ym=_m.exports,wm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-dialog",{attrs:{id:"singleFieldDialog",title:e.title,size:"sm",modalType:"confirmation",okButtonState:!0,value:e.value},on:{onCommand:e.onCommandHandler,input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"dialogBody",fn:function(){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fieldValue,expression:"fieldValue"}],staticClass:"form-control",domProps:{value:e.fieldValue},on:{input:function(t){t.target.composing||(e.fieldValue=t.target.value)}}})]},proxy:!0}])})},xm=[],Tm={components:{baseDialog:Ou},data:function(){return{title:"",fieldValue:"",callbackCommand:"",idParams:{},value:!1}},methods:{init:function(e,t,a,n){var o=this;o.title=e,o.callbackCommand=t,o.fieldValue=n,o.idParams=a,o.value=!0},onCommandHandler:function(e){var t=this,a=e.command;switch(a){case"ok":t.$emit("onCommand",{command:t.callbackCommand,idParams:t.idParams,fieldValue:t.fieldValue}),t.value=!1}}}},km=Tm,Sm=Object(g["a"])(km,wm,xm,!1,null,null,null),Om=Sm.exports,$m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-tab",{staticClass:"bg-white py-2",scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.$t("vouchers.codeTabLabel"))+" "),e.record&&e.record.code_count>0?a("div",{staticClass:"badge badge-warning"},[e._v(" "+e._s(e.record.code_count)+" ")]):e._e()]},proxy:!0}])},[a("div",{staticClass:"container-fluid"},[a("agent-code-page",{attrs:{record:e.record},on:{onCommand:e.onCommandHandler}})],1)])},jm=[],Im=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("agent-code-table",{ref:"agentCodeTable",attrs:{pusherChannel:e.pusherChannel,record:e.record},on:{onCommand:e.onCommandHandler}})],1)])},Em=[],Fm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"py-2 px-3 agent-code-table"},[a("div",{staticClass:"toolbar d-flex justify-content-between mb-1 align-items-center"},[a("search-field",{attrs:{searchValue:e.searchValue,appLoading:e.appLoading},on:{onCommand:e.onCommandHandler}}),a("table",{staticClass:"summary-table"},[a("tr",[e._m(0),a("td",{staticClass:"summary-value"},[e._v(e._s(e.record.total_views))])]),"none"!==e.record.redemption_method?a("tr",[e._m(1),a("td",{staticClass:"summary-value"},[e._v(e._s(e.record.total_redeemed))])]):e._e()]),a("data-radio-toggle",{attrs:{label:"Voucher Type",btnClass:"min-width-100",value:e.record.has_one_code,options:e.voucherTypeOptions},on:{input:function(t){return e.updateOneCodeMode("has_one_code",t)}}}),a("div",[a("button",{staticClass:"btn btn-outline-primary min-width-100 mr-1",attrs:{type:"button"},on:{click:function(t){return e.reloadAll()}}},[a("i",{staticClass:"fas fa-recycle"}),a("span",{staticClass:"ml-2"},[e._v("Refresh")])]),a("button",{staticClass:"btn btn-danger min-width-100 mr-1",attrs:{type:"button",disabled:0===e.data.length},on:{click:function(t){return e.deleteAll()}}},[a("i",{staticClass:"fas fa-times"}),a("span",{staticClass:"ml-2"},[e._v(e._s(e.$t("buttons.deleteAll")))])]),a("button",{staticClass:"btn btn-warning min-width-100 mr-1",attrs:{type:"button",disabled:0===e.data.length},on:{click:function(t){return e.exportExcel()}}},[a("i",{staticClass:"fas fa-download"}),a("span",{staticClass:"ml-2"},[e._v(e._s(e.$t("buttons.download")))])])])],1),e.data.length>0?a("div",{staticClass:"freezable-table freeze-last-column freeze-left-three-columns",attrs:{id:"code-table"}},[a("datatable",e._b({attrs:{columns:e.columns}},"datatable",e.$data,!1))],1):e._e(),a("vue-loading",{attrs:{active:e.uploading,"can-cancel":!0},on:{"update:active":function(t){e.uploading=t}}}),e.loading?a("div",{staticClass:"text-center",attrs:{id:"loadingMask"}},[a("h3",{staticClass:"d-inline-block mr-auto"},[a("font-awesome-icon",{staticClass:"fa-spin fa-3x",attrs:{icon:"spinner"}})],1)]):e._e(),a("common-dialog",{ref:"codeExportDialog",attrs:{id:"codeExportDialog",title:"Download",buttons:[{caption:"Only Codes",command:"exportCodesOnly",variant:"info"},{caption:"Codes with Participants",command:"exportCodesWithParticipants",variant:"primary"}]},on:{onCommand:e.onCommandHandler},model:{value:e.showingCodeExportDialog,callback:function(t){e.showingCodeExportDialog=t},expression:"showingCodeExportDialog"}}),a("delete-all-codes-dialog",{ref:"deleteAllCodesDialog",on:{onCommand:e.onCommandHandler},model:{value:e.showingDeleteAllCodesDialog,callback:function(t){e.showingDeleteAllCodesDialog=t},expression:"showingDeleteAllCodesDialog"}}),a("qr-code-dialog",{ref:"qrCodeDialog",attrs:{params:e.qrCodeDialogParams},model:{value:e.showingQrCodeDialog,callback:function(t){e.showingQrCodeDialog=t},expression:"showingQrCodeDialog"}})],1)},Pm=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{staticClass:"summary-label"},[a("div",{staticClass:"badge badge-warning min-width-80"},[e._v("Views")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{staticClass:"summary-label"},[a("div",{staticClass:"badge badge-warning min-width-80"},[e._v("Redempted")])])}],Am=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"th-field"},[a("div",{staticClass:"text-center"},[e._v(" "+e._s(e.title)),a("br"),a("copy-token",{attrs:{token:e.token}})],1)])},Dm=[],Hm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"copy-token badge badge-info",on:{click:e.copyToken}},[e._v(e._s("{"+e.token+"}")+" "),a("i",{staticClass:"fas fa-copy"})])},Nm=[],Rm={props:{token:{type:String,default:""}},methods:{copyToken:function(){var e=this;e.$copyText("{"+e.token+"}"),e.$toaster.info(e.$t("messages.token_copied_to_clipboard"))}}},Vm=Rm,Mm=(a("f486"),Object(g["a"])(Vm,Hm,Nm,!1,null,null,null)),Lm=Mm.exports,Um={components:{copyToken:Lm},computed:{token:function(){var e=this;return ae.str2token("code_",e.title)}},props:["title","field"]},qm=Um,Bm=(a("45d3"),Object(g["a"])(qm,Am,Dm,!1,null,null,null)),Gm=Bm.exports,Km=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"th-field"},[a("div",{staticClass:"text-center"},[e._v(" Key"),a("br"),a("copy-token",{attrs:{token:"code_ticket_link"}})],1)])},zm=[],Jm={components:{copyToken:Lm},props:["title","field"]},Qm=Jm,Wm=(a("0597"),Object(g["a"])(Qm,Km,zm,!1,null,null,null)),Ym=Wm.exports,Xm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"th-field"},[a("div",{staticClass:"text-center"},[e._v(" "+e._s(e.title)),a("br"),a("copy-token",{attrs:{token:e.token}})],1)])},Zm=[],ep={components:{copyToken:Lm},computed:{token:function(){var e=this;return ae.str2token("",e.title)}},props:["title","field"]},tp=ep,ap=(a("ed45"),Object(g["a"])(tp,Xm,Zm,!1,null,null,null)),np=ap.exports,op=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-100 d-flex flex-column justify-content-center align-items-center",staticStyle:{height:"34px"}},[""===e.value?a("div",{staticClass:"d-inline badge badge-secondary"},[e._v(" "+e._s(e.$t("vouchers.available_after_saving"))+" ")]):[a("copy-link",{attrs:{link:e.link,hideLink:!0,showQr:!0,label:e.codeKey,variant:e.variant},on:{onCommand:e.onCommandHandler}}),e.row.participant_name&&e.row.participant_email?a("div",[a("div",{staticClass:"participant-name line-height-1",staticStyle:{"margin-top":"-4px"}},[e._v(" "+e._s(e.participantName)+" "),""!==e.participantEmail?a("div",{staticClass:"ml-1 badge badge-warning bg-gray font-weight-normal",staticStyle:{padding:"1px 3px"}},[e._v(e._s(e.participantEmail))]):e._e()])]):e.row.participant_email?a("div",[a("div",{staticClass:"participant-email line-height-1",staticStyle:{"margin-top":"-4px"}},[e._v(" "+e._s(e.participantEmail)+" ")])]):e._e()]],2)},ip=[],sp={components:{copyLink:sm},props:["row","value","xprops","field"],methods:{onCommandHandler:function(e){var t=this;switch(e.command){case"showQrCodeDialog":console.log("TdKey :: onCommandHandler :; showQrCodeDialog"),t.xprops.eventbus.$emit("onRowCommand",e);break;case"onLinkClicked":console.log("TdKey :: onCommandHandler :: payload: ",e),t.xprops.eventbus.$emit("onRowCommand",{command:"gotoLink",link:e.link});break}}},computed:{goalType:function(){var e=this,t="none";return e.xprops.record&&(t=e.xprops.record.goal_type),t},codeKey:function(){var e=this;return e.value},link:function(){var e=this;return e.$store.getters.appHost+"/coupons/"+e.value},variant:function(){var e=this,t="primary";return"codes"===e.goalType&&""!==e.participantName&&(t="success"),t},participantName:function(){var e=this,t="";return e.row["participant_name"]&&(t=e.row["participant_name"]),t},participantEmail:function(){var e=this,t="";return e.row["participant_email"]&&(t=e.row["participant_email"]),t}}},rp=sp,lp=(a("ab22"),Object(g["a"])(rp,op,ip,!1,null,null,null)),cp=lp.exports,dp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"td-code-status line-height-1"},[a("div",{staticClass:"badge min-width-80 d-flex flex-row",class:"badge-"+e.activeStatus.variant,attrs:{"data-toggle":"tooltip",title:e.row["error_message"]}},[a("div",{staticClass:"flex-grow-1 text-center"},[e._v(e._s(e.activeStatus.label))]),"hold"===e.value?a("div",{staticClass:"ml-1 d-inline change-status",attrs:{"data-toggle":"tooltip",title:"Release"},on:{click:function(t){return e.changeStatus("pending")}}},[a("font-awesome-icon",{attrs:{size:"sm",icon:"circle"}})],1):"pending"===e.value?a("div",{staticClass:"ml-1 d-inline change-status",attrs:{"data-toggle":"tooltip",title:"Hold"},on:{click:function(t){return e.changeStatus("hold")}}},[a("font-awesome-icon",{attrs:{size:"sm",icon:"check-circle"}})],1):"completed"===e.value||"fails"===e.value?a("div",{staticClass:"ml-1 d-inline change-status",attrs:{"data-toggle":"tooltip",title:"Reset"},on:{click:e.resetStatus}},[a("font-awesome-icon",{attrs:{size:"sm",icon:"redo"}})],1):e._e()]),"fails"===e.value?a("div",[a("small",{staticClass:"text-danger"},[e._v(e._s(e.row["error_message"]))])]):e._e(),"fails"===e.value||"completed"===e.value?a("div",{staticClass:"badge"},[e._v(e._s(e.row["sent_at"]))]):e._e()])},up=[],mp={data:function(){return{statusOptions:[{value:"pending",label:"Pending",variant:"info"},{value:"processing",label:"Processing",variant:"warning"},{value:"ready",label:"Ready to Send",variant:"primary"},{value:"completed",label:"Completed",variant:"success"},{value:"fails",label:"Fails",variant:"danger"},{value:"hold",label:"On Hold",variant:"muted"},{value:"-",label:"SINGLE-CODE MODE",variant:"muted"},{value:"unassigned",label:"-",variant:"muted"}]}},props:["value","row","xprops"],methods:{changeStatus:function(e){var t=this;console.log("TdCodeStatus :: changeStatus :: stauts: ",e),t.xprops.eventbus.$emit("onRowCommand",{command:"changeStatus",row:t.row,status:e})},resetStatus:function(){var e=this;e.$dialog.confirm(e.$t("messages.reset_status")).then((function(){e.changeStatus("pending")}))}},computed:{activeStatus:function(){for(var e=this,t="",a=0;a<e.statusOptions.length;a++){var n=e.statusOptions[a];if(n.value===e.value){t=n;break}}return t},status:function(){var e=this,t=e.$t("status."+e.value);if(e.options)for(var a=0;a<e.xprops.statusOptions.length;a++){var n=e.xprops.statusOptions[a];if(n.value===e.value){t=e.$t(n.labelTag);break}}return t}}},pp=mp,fp=(a("6f1c"),Object(g["a"])(pp,dp,up,!1,null,null,null)),gp=fp.exports,vp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-100"},[a("div",{staticClass:"badge badge-info font-weight-normal"},[e._v(" "+e._s(e.item)+" ")])])},hp=[],bp={props:["value","field","row","xprops"],computed:{item:function(){var e=this,t=e.xprops["optionalChoices"][e.field],a=parseInt(e.value);return t[a]}}},Cp=bp,_p=Object(g["a"])(Cp,vp,hp,!1,null,null,null),yp=_p.exports,wp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-100"},e._l(e.items,(function(t){return a("div",{key:t,staticClass:"badge badge-info mr-1 font-weight-normal"},[e._v(" "+e._s(t)+" ")])})),0)},xp=[],Tp={props:["value","field","row","xprops"],computed:{items:function(){for(var e=this,t=e.xprops["optionalChoices"][e.field],a=[],n=e.value.split(",").map((function(e){return parseInt(e)})),o=0;o<n.length;o++)a.push(t[n[o]]);return a}}},kp=Tp,Sp=Object(g["a"])(kp,wp,xp,!1,null,null,null),Op=Sp.exports,$p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"line-height-1"},[e._v(" "+e._s(e.value)),a("br"),e.codeKey?a("copy-link",{attrs:{label:e.codeKey,variant:"primary",link:e.link}}):e._e()],1)},jp=[],Ip={components:{copyLink:sm},props:["value","row","xprops","field"],computed:{codeKey:function(){var e=this,t="";return e.field===e.xprops.firstField?e.row["code_key"]:t},link:function(){var e=this,t="";return e.field===e.xprops.firstField?e.$store.getters.appHost+"/coupons/"+e.codeKey:t}}},Ep=Ip,Fp=Object(g["a"])(Ep,$p,jp,!1,null,null,null),Pp=Fp.exports,Ap=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-inline-block"},[e._v(" "+e._s(e.outputValue)+" ")])},Dp=[],Hp=(a("38cf"),{props:["value","row","xprops"],computed:{outputValue:function(){var e=this,t=e.value.length;return"*".repeat(t)}}}),Np=Hp,Rp=Object(g["a"])(Np,Ap,Dp,!1,null,null,null),Vp=Rp.exports,Mp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center",staticStyle:{"line-height":"1.2"}},[a("qrcode-vue",{attrs:{value:e.qrcodeLink,size:120,level:"M"}}),e._v(" "+e._s(e.value)),a("br"),a("div",{staticClass:"d-inline-block"},[a("copy-link",{attrs:{link:e.qrcodeLink}})],1)],1)},Lp=[],Up=a("d7b0"),qp={components:{qrcodeVue:Up["a"],copyLink:sm},props:["row","value","xprops"],computed:{qrcodeLink:function(){var e=this;return e.$store.getters.appHost+"/redeem/"+btoa(e.value)}}},Bp=qp,Gp=Object(g["a"])(Bp,Mp,Lp,!1,null,null,null),Kp=Gp.exports,zp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center"},[e._v(e._s(e.value)+" "),e.value&&""!==e.value?a("button",{staticClass:"btn btn-info",staticStyle:{padding:"0.1rem 0.3rem"},attrs:{type:"button"},on:{click:e.resetStatus}},[a("font-awesome-icon",{staticClass:"fa-fw",attrs:{icon:"undo"}})],1):a("span",{staticClass:"text-muted"},[e._v("Available")])])},Jp=[],Qp={props:["value","field","row","xprops"],computed:{item:function(){var e=this,t=e.xprops["optionalChoices"][e.field],a=parseInt(e.value);return t[a]}},methods:{resetStatus:function(){var e=this;e.xprops.eventbus.$emit("onRowCommand",{command:"resetRedemptionStatus",row:e.row})}}},Wp=Qp,Yp=Object(g["a"])(Wp,zp,Jp,!1,null,null,null),Xp=Yp.exports,Zp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"td-views line-height-1"},[0===e.value?a("span",[e._v("0")]):a("div",{staticClass:"badge badge-warning"},[e._v(e._s(e.value))])])},ef=[],tf={props:["value","row","xprops"]},af=tf,nf=Object(g["a"])(af,Zp,ef,!1,null,null,null),of=nf.exports,sf={ThCodeBadgeHeader:Gm,ThKeyBadgeHeader:Ym,ThParticipantBadgeHeader:np,TdKey:cp,TdCodeStatus:gp,TdSingleChoice:yp,TdMultipleChoice:Op,TdParticipantField:Pp,TdPassword:Vp,TdQrcode:Kp,TdRedeemedOn:Xp,TdViews:of},rf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex flex-row justify-content-start align-items-center"},[a("h4",{staticClass:"d-inline-block mr-2 my-0"},[a("font-awesome-icon",{attrs:{icon:"search"}})],1),a("form",{on:{submit:function(t){return t.preventDefault(),e.dummy()}}},[a("div",{staticClass:"form-group m-0 d-inline-block"},[a("div",{staticClass:"input-group"},[a("input",{staticClass:"form-control",domProps:{value:e.searchValue},on:{input:function(t){return e.search(t.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{attrs:{type:"button"},on:{click:function(t){return e.search("")}}},[a("i",{staticClass:"fas fa-fw fa-times"})])])])])]),e.appLoading?a("h3",{staticClass:"d-inline-block ml-3 pt-2 my-0 mr-auto"},[a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}})],1):e._e()])},lf=[],cf={props:{searchValue:{type:String,default:""},appLoading:{type:Boolean,default:!1}},methods:{dummy:function(){},search:function(e){var t=this;t.$emit("onCommand",{command:"search",searchValue:e})}}},df=cf,uf=Object(g["a"])(df,rf,lf,!1,null,null,null),mf=uf.exports,pf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-dialog",{attrs:{id:"deleteAllCodesDialog",title:"Delete All Codes",size:"md",modalType:"confirmation",okButtonState:!0,value:e.value},on:{onCommand:e.onCommandHandler,input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"dialogBody",fn:function(){return[a("div",[e._v("Participants exists. Do you want to remove all codes or partcipants as well?")])]},proxy:!0},{key:"buttonBar",fn:function(){return[a("button",{staticClass:"px-2 min-width-80 btn btn-danger",on:{click:e.deleteCodesOnly}},[e._v("Delete Codes Only")]),a("button",{staticClass:"px-2 min-width-80 btn btn-danger",on:{click:e.deleteCodesAndParticipants}},[e._v("Delete Codes & Participants")]),a("button",{staticClass:"px-2 btn btn-secondary",on:{click:e.closeDialog}},[e._v("Cancel")])]},proxy:!0}])})},ff=[],gf={components:{baseDialog:Ou},data:function(){return{}},props:{value:{type:Boolean,default:!1}},model:{prop:"value",event:"input"},methods:{onCommandHandler:function(e){this.$emit("onCommand",e)},closeDialog:function(){var e=this;e.$emit("input",!1),e.$bvModal.hide("deleteAllCodesDialog")},deleteCodesOnly:function(){var e=this;e.$emit("onCommand",{command:"deleteAllCodes",callback:function(){e.$bvModal.hide("deleteAllCodesDialog")}})},deleteCodesAndParticipants:function(){var e=this;e.$emit("onCommand",{command:"deleteAllCodesAndParticipants",callback:function(){e.$bvModal.hide("deleteAllCodesDialog")}})}}},vf=gf,hf=Object(g["a"])(vf,pf,ff,!1,null,null,null),bf=hf.exports,Cf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-dialog",{staticClass:"common-dialog",attrs:{id:e.id,title:e.title,size:"md",value:e.value,modalType:"confirmation"},on:{onCommand:e.onCommandHandler,input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([e.message?{key:"dialogBody",fn:function(){return[a("div",{staticClass:"text-left"},[e._v(e._s(e.message))])]},proxy:!0}:null,{key:"buttonBar",fn:function(){return[e._l(e.buttons,(function(t){return a("button",{key:t.command,staticClass:"btn",class:e.buttonClass(t),on:{click:function(a){return e.onButtonClicked(t.command)}}},[e._v(e._s(t.caption))])})),a("button",{staticClass:"min-width-100 btn btn-secondary",attrs:{disabled:e.loading},on:{click:e.closeDialog}},[e._v("Cancel")])]},proxy:!0}],null,!0)})},_f=[],yf={mixins:[wa],components:{baseDialog:Ou},props:{id:{type:String,default:""},title:{type:String,default:""},value:{type:Boolean,default:!1},buttons:{type:Array,default:function(){return[]}}},model:{prop:"value",event:"input"},data:function(){return{loading:!1,message:""}},methods:{setMessage:function(e){this.message=e},close:function(){this.closeDialog()},buttonClass:function(e){var t=["min-width-100"];return e.variant&&t.push("btn-"+e.variant),t.join(" ")},closeDialog:function(){var e=this;e.$emit("input",!1),e.$bvModal.hide(e.id)},onButtonClicked:function(e){this.$emit("onCommand",{command:e})},onCommandHandler:function(e){var t=this,a=e.command;switch(a){case"ok":t.selectedVoucher&&t.$emit("onCommand",{command:t.okCommand,voucher:t.selectedVoucher});break}}}},wf=yf,xf=(a("af67"),Object(g["a"])(wf,Cf,_f,!1,null,null,null)),Tf=xf.exports,kf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-dialog",{attrs:{id:"qrCodeDialog",title:"Goto Link with QR Code",size:"md",modalType:"confirmation",okButtonState:!0,value:e.value},on:{onCommand:e.onCommandHandler,input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"dialogBody",fn:function(){return[a("div",{staticClass:"text-center"},[a("qrcode-vue",{attrs:{value:e.link,size:160,level:"M"}}),a("div",{staticClass:"d-flex flex-row justify-content-center"},[a("copy-link",{attrs:{link:e.params.link,label:e.params.codeKey},on:{onCommand:e.onCommandHandler}})],1)],1)]},proxy:!0},{key:"buttonBar",fn:function(){return[a("button",{staticClass:"px-2 btn btn-secondary min-width-100",on:{click:e.closeDialog}},[e._v("Close")])]},proxy:!0}])})},Sf=[],Of={components:{baseDialog:Ou,qrcodeVue:Up["a"],copyLink:sm},computed:{link:function(){var e=this,t="";return""!==e.params.link&&(t=e.params.link.replace("http://","https://")),t}},data:function(){return{}},props:{value:{type:Boolean,default:!1},params:{type:Object,default:{link:"",codeKey:""}}},model:{prop:"value",event:"input"},methods:{onCommandHandler:function(e){switch(e.command){case"gotoLink":window.open(e.link,"_blank");break}},closeDialog:function(){var e=this;console.log("closeDialog"),e.$emit("input",!1),e.$bvModal.hide("qrCodeDialog")},deleteCodesOnly:function(){var e=this;e.$emit("onCommand",{command:"deleteAllCodes",callback:function(){e.$bvModal.hide("deleteAllCodesDialog")}})},deleteCodesAndParticipants:function(){var e=this;e.$emit("onCommand",{command:"deleteAllCodesAndParticipants",callback:function(){e.$bvModal.hide("deleteAllCodesDialog")}})}}},$f=Of,jf=Object(g["a"])($f,kf,Sf,!1,null,null,null),If=jf.exports,Ef={methods:{addXpropsStatus:function(e){var t=this;-1===t.xprops.statuses.indexOf(e)&&t.xprops.statuses.push(e)},removeXpropsStatus:function(e){var t=this,a=t.xprops.statuses.indexOf(e);a>=0&&t.xprops.statuses.splice(a,1)}}},Ff=Ef,Pf={mixins:[Ff],components:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Mc),sf),{},{xlsFileUpload:Cu,searchField:mf,codeImportDialog:Nu,deleteAllCodesDialog:bf,commonDialog:Tf,qrCodeDialog:If,uploadButton:Lu,dataRadioToggle:Pu}),data:function(){return{qrCodeDialogParams:{link:"",key:""},voucherTypeOptions:[{name:"Multiple",value:0},{name:"Single",value:1}],statusSummary:{pending:0,hold:0,completed:0,fails:0},channel:null,showingDeleteAllCodesDialog:!1,showingCodeImportDialog:!1,showingCodeExportDialog:!1,showingQrCodeDialog:!1,importedFileKey:"",importedFieldInfos:[],uploadRoute:"/agent_codes/upload",appLoading:!1,uploading:!1,loading:!1,columns:[],allData:[],data:[],total:0,query:{filter:"",limit:10,offset:0,sort:"",order:"",page:0},xprops:{buttons:["delete","email"],eventbus:new r["default"],actionButtonSize:"xs",statuses:[]},HeaderSettings:!1,selectedRow:null,defaultColumns1:[{title:"general.views",thComp:"ThCommonHeader",thClass:"text-center",tdClass:"align-middle text-center",tdComp:"TdViews",field:"views",sortable:!1},{title:"general.key",thComp:"ThKeyBadgeHeader",thClass:"text-center",tdClass:"align-middle text-center",tdComp:"TdKey",field:"key",sortable:!0}],defaultColumns2:[{title:"general.remark",thComp:"ThCommonHeader",tdClass:"align-middle",tdComp:"TdCommonInputWithButton",field:"remark"},{title:"general.status",thComp:"ThCommonHeader",thClass:"text-center",tdClass:"align-middle text-center",tdComp:"TdCodeStatus",field:"status",sortable:!0},{title:"general.action",thComp:"ThCommonHeader",tdClass:"align-middle",tdComp:"TdCommonOpt",field:"id"}],searchValue:"",searchInputTimer:3e3,filterFields:"*"}},computed:{pusher:function(){return this.$store.getters.pusher},voucherId:function(){var e=this,t=0;return e.record&&(t=e.record.id),t},codeFieldsStr:function(){var e=this;return e.record.code_fields},codeFieldNamesStr:function(){var e=this,t="",a=[];if(e.codeFieldsStr&&""!==e.codeFieldsStr){a=e.codeFieldsStr.split("|");for(var n=[],o=0;o<a.length;o++){var i=a[o].split(":"),s=0===o?"code":"code-other";n.push(i[0]+":"+s)}t=n.join("|")}return t},participantFieldNamesStr:function(){var e=this,t=[];if(e.record.participant_configs&&e.record.participant_configs["inputObjs"])for(var a=e.record.participant_configs["inputObjs"],n=0;n<a.length;n++)t.push(a[n].name);return t.join("|")}},props:{record:{type:Object,default:null}},watch:{pusher:function(e){var t=this;e&&t.initPusherChannel()},files:{handler:function(){var e=this;0===e.voucherId&&(alert("voucherId === 0"),e.$emit("onCommand",{command:"save",callback:function(t){e.voucherId=t.id}}))},deep:!0},codeFieldsStr:function(e){var t=this;t.setColumns(e)},voucherId:{handler:function(e){var t=this;0!==t.voucherId&&t.onQueryChangedHandler(e)}},query:{handler:function(e){var t=this;0!==t.voucherId&&t.onQueryChangedHandler(e)},deep:!0},searchValue:function(){var e=this;e.filterFields&&null!==e.filterFields?(0!==e.searchInputTimer&&clearTimeout(e.searchInputTimer),e.searchInputTimer=setTimeout(e.setSearchValue,2e3)):e.alert("No filter fields defined!")}},mounted:function(){var e=this;e.initPusherChannel(),e.setColumns(e.codeFieldsStr),e.query.page=1,e.xprops.record=e.record,e.showingCodeImportDialog=!1,e.showingCodeExportDialog=!1,e.showingDeleteAllCodesDialog=!1,e.reloadCodeSummary()},created:function(){var e=this;e.xprops.eventbus.$on("onRowCommand",e.onRowCommandHandler)},beforeDestroy:function(){var e=this;e.xprops.eventbus.$off("onRowCommand"),e.unbindEvents()},destroyed:function(){var e=this;e.xprops.eventbus.$off("onRowCommand")},methods:{updateOneCodeMode:function(e,t){var a=this;switch(e){case"has_one_code":var n=1===t;n?a.record.code_count>1?a.$dialog.confirm("Only first code will remain. Are you sure?",{customClass:"confirm-keep-one-code"}).then((function(){console.log("confirm removal of others except first one"),a.$emit("onCommand",{command:"keepOnlyOneCode",callback:function(){a.$emit("onCommand",{command:"updateField",fieldName:e,fieldValue:t}),console.log("AgentCodeTable :: updateOneCodeMode => refresh"),a.$emit("onCommand",{command:"updateField",fieldName:"code_count",fieldValue:1}),console.log("AgentCodeTable :: updateOneCodeMode :: callback"),a.refresh()}})})):(a.$emit("onCommand",{command:"keepOnlyOneCode",callback:function(){a.$emit("onCommand",{command:"updateField",fieldName:e,fieldValue:t}),a.$emit("onCommand",{command:"updateField",fieldName:"code_count",fieldValue:1}),a.refresh()}}),a.refresh()):a.$emit("onCommand",{command:"useMultipleCodes",callback:function(){a.$emit("onCommand",{command:"updateField",fieldName:e,fieldValue:t}),a.refresh()}});break}},listen:function(){var e=this,t="voucher"+e.record.id+".channel";window.Echo.channel(t).listen(".App.Events.VoucherCodeViewsUpdated",(function(e){console.log("*** event: VoucherCodeViewsUpdated: data: ",e)}))},download:function(){var e=this;e.showingCodeExportDialog=!0},updateCodeViewCount:function(e){var t=this,a={urlCommand:"/agent_codes/"+e.id+"/update_views"};t.$store.dispatch("AUTH_POST",a).then((function(){}))},sendEmail:function(e){var t=this,a=e["participant"];if(a){var n={urlCommand:"/participants/"+a.id+"/send_email"},o="email:"+e.id;t.addXpropsStatus(o),t.$store.dispatch("AUTH_POST",n).then((function(e){t.removeXpropsStatus(o)}),(function(a){e["error_message"]=a["message"],e["sent_at"]=a["sent_at"],e["status"]=a["status"],t.$toaster.warning(a["message"]),t.removeXpropsStatus(o)}))}else t.$toaster.error("Participant not specified!")},sendVoucherCodeEmail:function(e){var t=this,a={urlCommand:"/vouchers/"+t.record.id+"/codes/"+e.id+"/send_email"},n="email:"+e.id;t.addXpropsStatus(n),t.$store.dispatch("AUTH_POST",a).then((function(e){t.removeXpropsStatus(n)}))},onVoucherCodeRedeemed:function(e){var t=this;console.log("onVoucherCodeRedeemed: data: ",e);for(var a=e.voucherCode,n=0;n<t.data.length;n++)if(t.data[n].id===a.id){t.data[n].redeemed_on=a.redeemed_on;break}t.$emit("onCommand",{command:"updateField",fieldName:"total_redeemed",fieldValue:e.totalRedeemed})},onVoucherCodeViewsUpdated:function(e){for(var t=this,a=e.voucherCode,n=0;n<t.data.length;n++)if(t.data[n].id===a.id){t.data[n].views=a.views;break}t.$emit("onCommand",{command:"updateField",fieldName:"total_views",fieldValue:e.totalViews})},updateStatus:function(e){for(var t=this,a=e.statusInfo,n=0;n<t.data.length;n++)if(t.data[n].id===a.code_id){t.updateStatusByIndex(n,a);break}},onVoucherCodeStatusUpdated:function(e){for(var t=this,a=e.voucherCode,n=0;n<t.data.length;n++)if(t.data[n].id===a.id){switch(t.data[n].status=a.status,a.status){case"processing":t.data[n].error_message="",t.data[n].sent_on="";break;case"completed":case"fails":t.data[n].error_message=a.error_message,t.data[n].sent_on=a.sent_on}break}},initPusherChannel:function(){var e=this;e.pusher&&e.record&&(e.unbindEvents(),e.pusherChannel=e.pusher.subscribe("voucher"+e.record.id+".channel"),e.pusherChannel.bind("VoucherCodeViewsUpdated",(function(t){e.onVoucherCodeViewsUpdated(t)})),e.pusherChannel.bind("VoucherCodeRedeemed",(function(t){e.onVoucherCodeRedeemed(t)})))},unbindEvents:function(){var e=this;e.pusherChannel&&(e.pusherChannel.unbind("VoucherCodeViewsUpdated"),e.pusherChannel.unbind("VoucherCodeRedeemed"))},onCommandHandler:function(e){var t=this,a=e.command;switch(a){case"search":t.searchValue=e.searchValue;break;case"confirmCodeImport":t.onParsingCodes(e);break;case"deleteAllCodes":t.doDeleteAll(),"function"===typeof e.callback&&e.callback();break;case"exportCodesOnly":t.$emit("onCommand",{command:a}),t.$refs.codeExportDialog.close();break;case"exportCodesWithParticipants":t.$emit("onCommand",{command:a}),t.$refs.codeExportDialog.close();break;case"deleteAllCodesAndParticipants":t.doDeleteAll(),t.doDeleteAllParticipants(),"function"===typeof e.callback&&e.callback()}},saveCodeInfo:function(e){var t=this,a=t.row2CodeInfo(e),n={urlCommand:"/vouchers/"+t.voucherId+"/codes/"+e.id,data:a};t.$store.dispatch("AUTH_PUT",n).then((function(){t.$toaster.success(t.$t("messages.saved_successfully"))})).catch((function(){t.$toaster.danger(t.$t("messages.saved_failed"))}))},exportExcel:function(){var e=this;e.$emit("onCommand",{command:"exportCodesWithParticipants"})},deleteAll:function(){var e=this;e.record.participant_count>0?e.$bvModal.show("deleteAllCodesDialog"):e.$dialog.confirm(e.$t("messages.areYouSure")).then((function(){e.doDeleteAll(),e.$emit("onCommand",{command:"setRecordField",fieldName:"code_count",fieldValue:0})}))},doDeleteAllParticipants:function(){var e=this,t={urlCommand:"/vouchers/"+e.voucherId+"/participants"};e.$store.dispatch("AUTH_DELETE",t).then((function(){e.$toaster.success(e.$t("messages.all_participants_are_removed")),e.onQueryChangedHandler(e.query),e.$emit("onCommand",{command:"setRecordField",fieldName:"participant_count",fieldValue:0})}))},doDeleteAll:function(){var e=this,t={urlCommand:"/vouchers/"+e.voucherId+"/codes"};e.$store.dispatch("AUTH_DELETE",t).then((function(){e.$toaster.success(e.$t("messages.all_codes_are_removed")),e.$emit("onCommand",{command:"setQrCodeAndBarcodeComposition",data:""}),e.$emit("onCommand",{command:"setCodeFields",value:""}),e.$emit("onCommand",{command:"setRecordField",fieldName:"code_count",fieldValue:0}),e.reloadAll()}))},setSearchValue:function(e){var t=this;"undefined"===typeof e?e=t.searchValue:t.searchValue=e,t.query.filter=e?t.filterFields+":"+e:"",t.searchInputTimer=0},clearSearch:function(){var e=this;e.query.filter=e.filterFields+":",e.onQueryChangedHandler(e.query)},getFilterValue:function(e){for(var t=e.split(";"),a="",n=0;n<t.length;n++){var o=t[n].split(":");if("*"===o[0]){a=o[1];break}}return a},onQueryChangedHandler:function(e){var t=this;t.reloadCodeList(e)},refresh:function(){var e=this;e.reloadCodeSummary(),e.reloadCodeList()},reloadAll:function(){var e=this;e.reloadCodeSummary(),e.reloadCodeList()},reloadCodeSummary:function(){},reloadCodeList:function(e){var t=this;if(t.loading=!0,"undefined"===typeof e&&(e=t.query),0!==t.voucherId){var a={urlCommand:"/vouchers/"+t.voucherId+"/codes",query:e};t.$store.dispatch("AUTH_GET",a).then((function(e){t.total=e.total,t.data=t.parseCodeInfoData(e.data),t.configRowButtons(t.data),t.$forceUpdate(),t.loading=!1}))}else alert("vm.voucherId = 0")},configRowButtons:function(e){var t=this;"undefined"===typeof e&&(e=t.data);for(var a=0;a<e.length;a++)t.configRowButtonsByIndex(a)},configRowButtonsByIndex:function(e){var t=this,a=t.data[e],n=[];a.locked&&n.push("delete"),a.participant?(n.push("delete"),(t.record.has_one_code||""===a.participant_email.trim()||"fails"===a.status||"completed"===a.status)&&n.push("email")):n.push("email"),t.data[e].buttons=t.xprops.buttons.filter((function(e){return-1===n.indexOf(e)}))},row2CodeInfo:function(e){for(var t=this,a=t.getCodeFieldsFromStr(t.codeFieldsStr),n=a.length,o=e["field0"],i=[],s=1;s<n;s++){var r="field"+s;i.push(e[r])}return{id:e.id,order:e.order,code:o,extra_fields:i.join("|"),key:e.key,remark:e.remark,sent_on:e.sent_on,status:e.status}},onRowCommandHandler:function(e){var t=this;switch(console.log("AgentCodeTable :: onRowCommandHandler :: payload: ",e),e.command){case"showQrCodeDialog":t.qrCodeDialogParams={link:e.link,codeKey:e.codeKey},t.$bvModal.show("qrCodeDialog");break;case"edit":alert("onRowCommandHandler :; edit");break;case"delete":t.$dialog.confirm(t.$t("messages.areYouSure")).then((function(){t.$emit("onCommand",{command:"delete_code_info",index:e.index})}));break;case"update":t.saveCodeInfo(e.row);break;case"changeStatus":t.changeStatus(e);break;case"resetRedemptionStatus":t.$dialog.confirm(t.$t("messages.areYouSure")).then((function(){t.resetRedemptionStatus(e)}));break;case"email":e.row.participant&&t.sendEmail(e.row);break;case"saveField":t.saveCodeInfoField(e.row,e.fieldName,e.fieldValue);break;case"updateField":t.setCodeFieldValue(e.row,e.fieldName,e.fieldValue);break;case"gotoLink":t.$emit("onCommand",e);break}},setVoucherCodeStatus:function(e,t){var a=this,n={urlCommand:"/vouchers/"+a.record.id+"/codes/"+e.id+"/set_status",data:{status:t}};a.$store.dispatch("AUTH_POST",n).then((function(e){e.message&&a.$toaster.info(e.message);var t=e.voucherCode,n=a.data.find((function(e){return e.id===t.id}));n&&(n.status=t.status,n.error_message=t.error_message,n.sent_on=t.sent_on)}),(function(e){a.$toaster.error(e.message)}))},saveCodeInfoField:function(e,t,a){var n=this,o={urlCommand:"/agent_codes/"+e.id+"/update_field",data:{fieldName:t,fieldValue:a}};n.$store.dispatch("AUTH_POST",o).then((function(){n.$toaster.info("Successfully updated!")}))},setCodeFieldValue:function(e,t,a){for(var n=this,o=0;o<n.data.length;o++)if(n.data[o]==e){n.data[o][t]=a;break}},setCodeFieldValue2:function(e,t,a){for(var n=this,o=0;o<n.data.length;o++){var i=n.data[o];if(i["code"]===e["code"]&&i["extra_fields"]===e["extra_fields"]){n.data[o][t]=a;break}}},resetRedemptionStatus:function(e){var t=this,a={urlCommand:"/agent_codes/"+e.row.id+"/reset_redemption_status"};t.$store.dispatch("AUTH_POST",a).then((function(){for(var a=0;a<t.data.length;a++)if(t.data[a].id===e.row.id){t.updateCodeField(a,"redeemed_on","");break}}))},changeStatus:function(e){var t=this,a=e.row.participant;if(a){var n={urlCommand:"/participants/"+a.id+"/change_status/"+e.status};t.$store.dispatch("AUTH_POST",n).then((function(){for(var a={status:e.status,sent_at:"",error_message:""},n=0;n<t.data.length;n++)if(t.data[n].id===e.row.id){t.updateStatusByIndex(n,a);break}}))}},updateCodeField:function(e,t,a){var n=this;n.data[e][t]=a},updateStatusByIndex:function(e,t){var a=this,n=t.status;switch(a.data[e].status=n,n){case"fails":case"completed":a.data[e].sent_at=t.sent_at,a.data[e].error_message=t.error_message;break;case"hold":case"pending":case"processing":a.data[e].sent_at="",a.data[e].error_message="";break}a.configRowButtonsByIndex(e)},getCodeFieldsFromStr:function(e){var t=[];if(null!==e&&""!==e)for(var a=e.split("|"),n=0;n<a.length;n++){var o=a[n],i=o.split(":");t.push({title:i[0],type:i[1]})}return t},setColumns:function(e){var t=this,a=t.getCodeFieldsFromStr(e);t.columns=[{title:t.$t("general.number"),tdClass:"text-center",thClass:"text-center",tdComp:"TdCommonIndex",field:"id"}];var n="text-left align-middle",o="text-center",i=null;a.length>0&&(i=a[0],t.columns.push({title:i["title"],thComp:"ThCodeBadgeHeader",tdClass:n,thClass:o,field:"field0"}));for(var s=0;s<t.defaultColumns1.length;s++)t.columns.push(t.defaultColumns1[s]);t.record.redemption_method&&"none"!==t.record.redemption_method&&t.columns.push({title:"general.redeemed_on",thComp:"ThCommonHeader",thClass:"text-center",tdClass:"align-middle",tdComp:"TdRedeemedOn",field:"redeemed_on",sortable:!0});for(var r=1;r<a.length;r++){n="text-left align-middle",o="text-left";var l=a[r];switch(l["type"]){case"date":case"integer":n="text-center align-middle",o="text-center align-middle";break}t.columns.push({title:l["title"],thComp:"ThCodeBadgeHeader",tdClass:n,thClass:o,field:"field"+r})}for(var c=0;c<t.defaultColumns2.length;c++)t.columns.push(t.defaultColumns2[c])},parseCodeInfoData:function(e){var t=this,a=[];if(t.columns)for(var n=0;n<e.length;n++){for(var o=e[n],i=o["code"]+"|"+o["extra_fields"],s=i.split("|"),r={id:o["id"],order:o["order"]},l=0;l<s.length;l++)r["field"+l]=s[l];r["status"]=o["status"],r["key"]=o["key"],r["redeemed_on"]=o["redeemed_on"],r["remark"]=o["remark"],r["error_message"]=o["error_message"],r["participant"]=o["participant"],r["participant_name"]=o["participant"]?o["participant"]["name"]:null,r["participant_email"]=o["participant"]?o["participant"]["email"]:null,r["participant_phone"]=o["participant"]?o["participant"]["phone"]:null,r["sent_at"]=o["sent_at"],r["views"]=o["views"],r["buttons"]=[],a.push(r)}else a=e;return a},onUploadingHandler:function(){var e=this;e.uploading=!0,e.$bvModal.hide("codeImportDialog")},onUploadedHandler:function(e){var t=this;t.uploading=!1,t.$refs.codeImportDialog.preInit(e.fields,e.key),t.$bvModal.show("codeImportDialog")},onParsingCodes:function(e){var t=this;console.log("onParsingCodes :: payload: ",e);var a={urlCommand:"/agent_codes/parse/"+e.key,data:{fieldInfos:e.fieldInfos,includeCode:e.includeCode,includeParticipant:e.includeParticipant,singleCodeMode:t.record.has_one_code}};console.log("AgentCodeTable :: onParsingCodes :: postData: ",a),t.uploading=!0,t.$store.dispatch("AUTH_POST",a).then((function(e){t.uploading=!1;var a=[];e.codeFields&&(t.updateCodeFields(e),e.existing>0?a.push(e.existing+" code(s) are duplicated"):a.push("No code(s) is duplicated"),e.new>0?a.push(e.new+" code(s) are added"):a.push("no code(s) are added")),e.participantConfigs&&(t.updateParticipantFields(e),a.push(e.participantIds.length+" participant(s) are added")),t.$dialog.alert(a.join("<br/>"),{html:!0}),t.reloadAll()}),(function(e){t.uploading=!1,console.log("error: ",e)}))},getCodeFieldsStrFromArray:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].title+":"+e[a].type);return t.join("|")},updateCodeFields:function(e){var t=this,a=e.codeFields;t.codeFieldsStr==a||(t.$emit("onCommand",{command:"setCodeFields",value:a}),t.$emit("onCommand",{command:"setRecordField",fieldName:"code_count",fieldValue:e.codeCount}),e.code_composition&&t.$emit("onCommand",{command:"setQrCodeAndBarcodeComposition",data:e.code_composition}))},updateParticipantFields:function(e){var t=this,a=e.participantConfigs,n=e.participantIds.length;JSON.stringify(t.record.participant_configs)===JSON.stringify(a)||(t.$emit("onCommand",{command:"updateField",fieldName:"participant_configs",fieldValue:a}),t.$emit("onCommand",{command:"updateField",fieldName:"participant_count",fieldValue:n}))},search:function(){}}},Af=Pf,Df=(a("e5cb"),Object(g["a"])(Af,Fm,Pm,!1,null,null,null)),Hf=Df.exports,Nf={components:{agentCodeTable:Hf},props:{record:{type:Object,default:null},pusherChannel:{type:Object,default:null}},methods:{updateStatus:function(e){var t=this;t.$refs.agentCodeTable.updateStatus(e)},onCommandHandler:function(e){var t=this;t.$emit("onCommand",e)},refresh:function(){this.$refs.agentCodeTable.refresh()}}},Rf=Nf,Vf=Object(g["a"])(Rf,Im,Em,!1,null,null,null),Mf=Vf.exports,Lf={components:{agentCodePage:Mf},props:{title:{type:String,default:"No Title"},record:{type:Object,default:null}},methods:{onCommandHandler:function(e){this.$emit("onCommand",e)},refresh:function(){this.$refs.agentCodePage.reloadCodeList()}}},Uf=Lf,qf=Object(g["a"])(Uf,$m,jm,!1,null,null,null),Bf=qf.exports,Gf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-tab",{staticClass:"bg-white py-2",scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.title)+" ")]},proxy:!0}])},[a("div",{staticClass:"container-fluid p-4"},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"mb-1 d-flex flex-row align-items-center"},[a("table",[a("tr",[a("td",{staticClass:"pr-2"},[e._v("Target Type")]),a("td",[a("data-radio-toggle",{staticClass:"mb-2",attrs:{value:e.record.goal_type,options:e.goalOptions},on:{input:e.updateGoalType}})],1)]),"fixed"===e.record.goal_type?a("tr",[a("td",{staticClass:"pr-2"},[e._v("Target Count")]),a("td",[a("input",{staticClass:"form-control w-50",attrs:{type:"number"},domProps:{value:e.record.goal_count},on:{input:function(t){return e.updateGoalCount(t.target.value)}}})])]):e._e(),"codes"===e.record.goal_type?a("tr",[a("td",{staticClass:"pr-2"},[e._v("Target Count")]),a("td",[a("div",{staticClass:"form-control w-50",attrs:{type:"number",readonly:""}},[e._v(" "+e._s(e.record.code_count)+" ")])])]):e._e()])])])]),a("div",{staticClass:"row form-filling-workflow"},[a("div",{staticClass:"mb-3 col-sm-12"},[a("h5",{staticClass:"mb-1"},[e._v("Workflow (before Target)")]),a("workflow-radio-button",{attrs:{tag:"actionTypeBeforeGoal",selectedActionType:e.record.action_type_before_goal,selectedCustomFormKey:e.record.custom_form_key_before_goal,customForms:e.record.custom_forms,options:["form_voucher","form_custom","custom"]},on:{onCommand:e.onCommandHandler}}),a("h5",{staticClass:"mb-1"},[e._v("Workflow (after Target)")]),a("workflow-radio-button",{attrs:{tag:"actionTypeAfterGoal",selectedActionType:e.record.action_type_after_goal,selectedCustomFormKey:e.record.custom_form_key_after_goal,customForms:e.record.custom_forms,options:["form_custom","custom","none"]},on:{onCommand:e.onCommandHandler}})],1)])])])},Kf=[],zf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btn-group"},e._l(e.options,(function(t){return a("button",{key:t.name,staticClass:"btn",class:{"btn-success":t.value===e.value,"btn-light":t.value!==e.value},attrs:{type:"button"},on:{click:function(a){return e.selectOption(t.value)}}},[e._v(" "+e._s(t.name)+" ")])})),0)},Jf=[],Qf={props:{value:{type:[String,Number],default:""},options:{type:Array,default:function(){return[]}}},model:{prop:"value",event:"input"},methods:{selectOption:function(e){var t=this;t.$emit("input",e)}}},Wf=Qf,Yf=Object(g["a"])(Wf,zf,Jf,!1,null,null,null),Xf=Yf.exports,Zf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex flex-row align-items-stretch"},e._l(e.options,(function(t){return a("div",{key:t,staticClass:"w-400 mr-2 mb-2 d-inline-block flex-column d-flex"},[a("div",{staticClass:"btn w-100 flex-grow-1 d-flex flex-column justify-content-center",class:{"btn-success":e.selectedActionType===t,"btn-light":e.selectedActionType!==t},on:{click:function(a){return e.selectActionType(t)}}},[a("div",{staticClass:"d-flex flex-row justify-content-center align-items-center flex-grow-1"},["form_voucher"===t?[a("workflow-radio-button-form"),e._m(0,!0),a("workflow-radio-button-voucher")]:"form_custom"===t?[a("workflow-radio-button-form"),e._m(1,!0),a("workflow-radio-button-custom",{attrs:{selected:e.selectedActionType===t,selectedCustomFormKey:e.selectedCustomFormKey,customForms:e.customForms},on:{onCommand:e.onCommandHandler}})]:"custom"===t?[a("workflow-radio-button-custom",{attrs:{selected:e.selectedActionType===t,selectedCustomFormKey:e.selectedCustomFormKey,customForms:e.customForms},on:{onCommand:e.onCommandHandler}})]:[a("h3",[e._v("None")])]],2)])])})),0)},eg=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center",staticStyle:{width:"20px"}},[a("i",{staticClass:"fas fa-play"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center",staticStyle:{width:"20px"}},[a("i",{staticClass:"fas fa-play"})])}],tg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex-grow-1 d-flex flex-column px-3",staticStyle:{"max-width":"200px"}},[e._m(0),a("select",{staticClass:"select-custom-form rounded-2 border-blue",class:{disabled:!e.selected},attrs:{disabled:!e.selected},domProps:{value:e.value},on:{input:function(t){return e.updateSelectedCustomForm(t.target.value)}}},e._l(e.customForms,(function(t){return a("option",{key:t.form_key,domProps:{value:t.form_key}},[e._v(" "+e._s(t.name)+" ")])})),0)])},ag=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h4",{staticClass:"p-0 m-0"},[a("i",{staticClass:"fas fa-file-alt"})])}],ng={data:function(){return{value:""}},methods:{updateSelectedCustomForm:function(e){var t=this;t.$emit("onCommand",{command:"selectCustomForm",formKey:e})}},props:{selected:{type:Boolean,default:!1},customForms:{type:Array,default:function(){return[]}},selectedCustomFormKey:{type:String,default:""}},watch:{selectedCustomFormKey:function(e){var t=this;t.value=e}},mounted:function(){var e=this;e.value=e.selectedCustomFormKey}},og=ng,ig=(a("0747"),Object(g["a"])(og,tg,ag,!1,null,null,null)),sg=ig.exports,rg=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},lg=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex-grow-1 p-1"},[a("img",{staticClass:"voucher-type-icon",attrs:{"data-toggle":"tooltip",title:"Form Filling",src:"/img/form.png"}}),a("img",{staticClass:"voucher-type-icon white-icon",attrs:{"data-toggle":"tooltip",title:"Form Filling",src:"/img/form-w.png"}})])}],cg={},dg=Object(g["a"])(cg,rg,lg,!1,null,null,null),ug=dg.exports,mg=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},pg=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex-grow-1 p-1"},[a("img",{staticClass:"voucher-type-icon",attrs:{"data-toggle":"tooltip",title:"Voucher",src:"/img/voucher.png"}}),a("img",{staticClass:"voucher-type-icon white-icon",attrs:{"data-toggle":"tooltip",title:"Voucher",src:"/img/voucher-w.png"}})])}],fg={},gg=Object(g["a"])(fg,mg,pg,!1,null,null,null),vg=gg.exports,hg={components:{workflowRadioButtonCustom:sg,workflowRadioButtonForm:ug,workflowRadioButtonVoucher:vg},methods:{selectActionType:function(e){var t=this;t.$emit("onCommand",{command:"selectActionType",tag:t.tag,actionType:e})},onCommandHandler:function(e){console.log("WorkflowRadioButton :: onCommandHandler : payload: ",e);var t=this;e=Object(s["a"])(Object(s["a"])({},e),{},{tag:t.tag}),t.$emit("onCommand",e)}},props:{tag:{type:String,default:""},options:{type:Array,default:function(){return[]}},customForms:{type:Array,default:function(){return[]}},selectedActionType:{type:String,default:""},selectedCustomFormKey:{type:String,default:""}}},bg=hg,Cg=Object(g["a"])(bg,Zf,eg,!1,null,null,null),_g=Cg.exports,yg={components:{dataRadioToggle:Pu,testComp:Xf,workflowRadioButton:_g},data:function(){return{entrancePageKey:"questionnaire",quotaType:"fixed",quotaCount:0,entrancePageKeyAfterQuota:"questionnaire",optionsAfterGoal:[{name:"Continue Filling Form",value:"questionnaire"},{name:"Goto Page",value:"custom"},{name:"None",value:"none"}]}},props:{title:{type:String,default:""},record:{type:Object,default:null}},computed:{goalOptions:function(){var e=[];return e.push({name:"Fixed",value:"fixed"}),e.push({name:"No. of Coupon Codes",value:"codes"}),e.push({name:"Unlimited",value:"none"}),e},customFormOptions:function(){for(var e=this,t=[],a=0;a<e.record.custom_forms.length;a++){var n=e.record.custom_forms[a];t.push({name:n.name,value:n.id})}return t},customLink:function(){var e=this;return e.$store.getters.apiUrl+"/q/"+e.record.questionnaire_key},customLinkName:function(){var e=this,t="none";if(0!==e.record.custom_form_id)for(var a=0;a<e.record.custom_forms.length;a++)if(e.record.custom_forms[a].id===e.record.custom_form_id){t=e.record.custom_forms[a].name;break}return t}},methods:{updateField:function(e,t){var a=this;a.$emit("onCommand",{command:"updateField",fieldName:e,fieldValue:t})},updateActionTypeAfterGoal:function(e){this.updateField("action_type_after_goal",e)},updateGoalCount:function(e){this.updateField("goal_count",e)},updateGoalType:function(e){this.updateField("goal_type",e)},onCommandHandler:function(e){var t=this;t.$emit("onCommand",e)},copyCustomLink:function(){var e=this;e.$copyText(e.questionnaireLink),e.$toaster.info(e.$t("messages.link_copied_to_clipboard"))}}},wg=yg,xg=(a("aadb"),Object(g["a"])(wg,Gf,Kf,!1,null,null,null)),Tg=xg.exports,kg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-tab",{staticClass:"bg-white py-2",scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.title)+" "),a("div",{staticClass:"badge badge-info"},[e._v(e._s(e.templates.length))])]},proxy:!0}])},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 d-flex flex-row align-items-stretch"},[a("template-editor-panel",{attrs:{id:"customTemplateEditor",customTemplate:e.templates[e.selectedIndex]},on:{onCommand:e.onCommandHandler,input:function(t){return e.updateContent(t)}},scopedSlots:e._u([{key:"leftPanel",fn:function(){return[a("div",{staticClass:"text-right mb-1"},[a("button",{staticClass:"btn btn-sm btn-circle btn-primary",attrs:{type:"button"},on:{click:e.addTemplate}},[a("i",{staticClass:"fas fa-plus"})])]),a("ul",{staticClass:"list-group template-list"},e._l(e.templates,(function(t){return a("li",{key:t.id,staticClass:"list-group-item d-flex flex-row align-items-center pr-1",class:{selected:t===e.templates[e.selectedIndex],"system-template":t.system}},[a("div",{staticClass:"w-100 flex-grow-1 overflow-hidden-ellipsis"},[e._v(e._s(t.name))]),a("button",{staticClass:"ml-1 btn btn-delete btn-circle btn-sm btn-danger",attrs:{type:"button"},on:{click:function(a){return e.deleteTemplate(t)}}},[a("i",{staticClass:"fas fa-times"})])])})),0)]},proxy:!0},{key:"sidePanel",fn:function(){return[a("h1",[e._v("Side Panel")])]},proxy:!0}])})],1)])])])},Sg=[],Og=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex flex-row w-100"},[a("div",{staticClass:"flex-grow-0 pr-1"},[e._t("leftPanel")],2),a("div",{staticClass:"flex-grow-1 d-flex flex-column bg-muted p-1"},[a("div",[a("div",{staticClass:"d-flex flex-row align-items-center"},[a("div",{staticClass:"pr-2"},[e._v("Name")]),a("div",{staticClass:"flex-grow-1"},[a("input",{staticClass:"form-control",domProps:{value:e.customTemplate.name},on:{input:function(t){return e.updateTemplateName(t.target.value)}}})])])]),a("html-editor",{attrs:{id:e.id,content:e.customTemplate.content},on:{input:function(t){return e.updateTemplateContent(t)}}})],1),a("div",{staticClass:"flex-grow-0 p-2"},[e._t("sidePanel")],2)])},$g=[],jg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex-grow-1 bg-muted"},[a("tinymce",{ref:e.id,staticClass:"flex-grow-1 bg-muted",staticStyle:{"min-height":"480px"},attrs:{id:e.id,toolbar1:e.tinymceToolbar1,other_options:e.tinymceOtherOptions,options:e.tinymceOptions,value:e.content},on:{editorInit:function(t){return e.onEditorInit()},input:function(t){return e.updateContent(t)}}}),a("image-select-dialog",{ref:"imageSelectDialog",attrs:{title:"Image Selection",voucher:e.voucher,imageScope:"local"},on:{onCommand:e.onCommandHandler},model:{value:e.showingImageSelectDialog,callback:function(t){e.showingImageSelectDialog=t},expression:"showingImageSelectDialog"}})],1)},Ig=[],Eg={components:{tinymce:Bu["a"],imageSelectDialog:fm},data:function(){return{showingImageSelectDialog:!1,tinymceOptions:{twoWay:!0},tinymceOtherOptions:{icons:"small",relative_urls:!1,remove_script_host:!1,convert_urls:!0,setup:function(e){var t=$('<input id="tinymce-embedder" type="file" name="pic" accept="image/*" style="display:none">');$(e.getElement()).parent().append(t),e.addButton("embedImage",{tooltip:"Embed Image",icon:"image",onclick:function(){t.trigger("click")}}),t.on("change",(function(){var a=t.get(0),n=a.files[0],o=new FileReader;o.onload=function(){var a=new Image;a.src=o.result,e.insertContent('<img src="'+a.src+'"/>'),t.val("")},o.readAsDataURL(n)}));var a=$('<input id="tinymce-uploader" type="file" name="pic" accept="image/*" style="display:none">');$(e.getElement()).parent().append(a),e.addButton("uploadImage",{tooltip:"Upload Image",icon:"upload",onclick:function(){a.trigger("click")}}),e.addButton("selectImage",{tooltip:"Select Image",icon:"browse",classes:"select-image"})}},tinymceToolbar1:"undo redo | formatselect | bold italic strikethrough forecolor backcolor | link embedImage uploadImage selectImage | alignleft aligncenter alignright alignjustify | numlist bullist outdent indent | removeformat | fullscreen"}},model:{prop:"content",event:"input"},props:{id:{type:String,default:"templateEditor"},content:{type:String,default:""},voucher:{type:Object,default:null}},methods:{clearContent:function(){var e=this;console.log("HtmlEditor :: clearContent"),tinyMCE.get(e.id).setContent("")},insertTag:function(e){var t=this;tinyMCE.get(t.id).execCommand("mceInsertContent",!1,"{"+e+"}")},showCopyTemplateDialog:function(){var e=this;e.$emit("onCommand",{command:"showCopyTemplateDialog"})},onCommandHandler:function(e){var t=this;switch(console.log("HtmlEditor :: onCommandHandler :: payload: ",e),e.command){case"onImageSelected":var a=t.$store.getters.appHost+"/media/image/"+e.imageId,n=tinyMCE.get(t.id);n.insertContent('<img class="content-img" src="'+a+'"/>'),t.$toaster.success("Image Added"),t.showingImageSelectDialog=!1;break}},onEditorInit:function(){var e=this;tinyMCE.get(e.id).setContent(e.content?e.content:""),tinyMCE.get(e.id).save(),tinyMCE.get(e.id).on("fullscreenStateChanged",(function(t){e.$emit("onCommand",{command:"changeEditorFullscreenState",isFullScreen:t.state})})),e.addTinyMCEButtonEvents(tinyMCE.get(e.id))},addTinyMCEButtonEvents:function(e){var t=this,a=$("#"+t.id),n=$(a).parent().find("input#tinymce-uploader");$(n).off("change").on("change",(function(){t.uploadImage(n,e)}));var o=$("#"+t.id).prev(".mce-tinymce"),i=$(o).find(".mce-select-image button");$(i).off("click").on("click",(function(){t.$refs.imageSelectDialog.fetchImages(),t.$refs.imageSelectDialog.toggle()}))},uploadImage:function(e,t){var a=this,n=e.get(0),o=new FormData;o.append("file",n.files[0]),o.append("scope","tinymce");var i=a.$store.getters.apiUrl+"/media/upload_image",s="bearer "+a.$store.getters.accessToken;$.ajax({headers:{Authorization:s},url:i,type:"POST",data:o,processData:!1,contentType:!1,success:function(e,a,n){var o=e.result;t.insertContent('<img class="content-img" src="'+o.imageUrl+'"/>')},error:function(e,t,a){if(e.responseText){var n=JSON.parse(e.responseText).errors;alert("Error uploading image: "+n.join(", ")+". Make sure the file is an image and has extension jpg/jpeg/png.")}}})},updateContent:function(e){var t=this;t.$emit("input",e)}}},Fg=Eg,Pg=Object(g["a"])(Fg,jg,Ig,!1,null,null,null),Ag=Pg.exports,Dg={components:{htmlEditor:Ag},props:{id:{type:String,default:"customTemplate"},customTemplate:{type:Object,default:function(){return{id:0,name:"",content:"",system:!1}}}},methods:{updateTemplateName:function(e){var t=this;t.$emit("onCommand",{command:"updateTemplateName",id:t.customTemplate.id,value:e})},updateTemplateContent:function(e){var t=this;t.$emit("onCommand",{command:"updateTemplateContent",id:t.customTemplate.id,value:e})}}},Hg=Dg,Ng=Object(g["a"])(Hg,Og,$g,!1,null,null,null),Rg=Ng.exports,Vg={components:{templateEditorPanel:Rg},data:function(){return{selectedIndex:0}},props:{title:{type:String,default:""},templates:{type:Array,default:function(){return[]}}},methods:{addTemplate:function(){},deleteTemplate:function(e){},onCommandHandler:function(e){this.$emit("onCommand",e)},updateName:function(e){var t=this;this.$emit("onCommand",{command:"updateTemplate",templateIndex:t.selectedIndex,name:e})},updateContent:function(e){var t=this;this.$emit("onCommand",{command:"updateTemplate",templateIndex:t.selectedIndex,content:e})}}},Mg=Vg,Lg=(a("526d"),Object(g["a"])(Mg,kg,Sg,!1,null,null,null)),Ug=Lg.exports,qg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-tab",{staticClass:"bg-white py-2",scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.title)+" ")]},proxy:!0}])},[a("div",{staticClass:"container-fluid"},[a("form-builder-panel",{attrs:{record:e.record},on:{onCommand:e.onCommandHandler}})],1)])},Bg=[],Gg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fluid-container p-2"},[a("form-type-selection",{attrs:{options:e.formTypes,value:e.selectedFormType},on:{onCommand:e.onCommandHandler,input:function(t){return e.selectFormType(t)}}}),e.selectedFormType?a("form-builder-panel-content",{ref:"formBuilderPanelContent",attrs:{formType:e.selectedFormType,voucher:e.record,participantCount:e.record.participant_count},on:{onCommand:e.onCommandHandler}}):e._e()],1)},Kg=[],zg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"list-group-item mb-1 p-2 d-flex flex-row justify-content-between",attrs:{slot:"header"},slot:"header"},[a("input-obj-button-list",{attrs:{includeInputObjs:e.isQuestionForm},on:{onCommand:e.onCommandHandler}}),a("div",{staticClass:"d-flex flex-row justify-content-end mb-1"},[a("button",{staticClass:"btn btn-danger min-width-100 ml-1 align-self-start no-wrap",staticStyle:{"white-space":"nowrap"},on:{click:e.clearForm}},[a("i",{staticClass:"fas fa-fw fa-times"}),e._v(" Clear Form ")]),a("button",{staticClass:"btn btn-warning min-width-100 ml-1 align-self-start no-wrap",staticStyle:{"white-space":"nowrap"},on:{click:e.exportForm}},[a("i",{staticClass:"fas fa-fw fa-download"}),e._v(" Download ")]),a("xls-file-upload",{staticClass:"align-self-start ml-1",attrs:{inputId:"uploadQuestions",uploadUrl:"/form_questions/upload"},on:{onUploading:e.onUploadingHandler,onUploaded:e.onUploadedHandler}}),a("button",{staticClass:"btn btn-success min-width-100 ml-1 align-self-start no-wrap",staticStyle:{"white-space":"nowrap"},on:{click:e.previewForm}},[a("i",{staticClass:"fas fa-fw fa-mask"}),e._v(" Preview ")])],1)],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-7",staticStyle:{"max-height":"640px","overflow-y":"scroll"}},[a("button",{staticClass:"btn w-100 mb-1 page-attributes-button",class:{"btn-primary":e.selectedInputObj===e.pageInputObj,"btn-light":e.selectedInputObj!==e.pageInputObj},on:{click:function(t){e.selectedInputObj=e.pageInputObj}}},[e._v(" Page Attributes ")]),a("draggable",e._b({staticClass:"input-object-list list-group",attrs:{tag:"ul",value:e.inputObjs,move:e.onMove},on:{input:function(t){return e.updateInputObjOrder(t)},start:function(t){e.isDragging=!0},end:function(t){e.isDragging=!1}}},"draggable",e.dragOptions,!1),e._l(e.inputObjs,(function(t,n){return a("pane-list-item",{key:n,attrs:{selected:e.selectedInputObj==t,inputObj:t},on:{onCommand:e.onCommandHandler}})})),1)],1),a("div",{staticClass:"col-sm-5"},[e.selectedInputObj?a("pane-details",{attrs:{voucher:e.voucher,inputObj:e.selectedInputObj},on:{onCommand:e.onCommandHandler}}):e._e()],1)])]),a("vue-loading",{attrs:{active:e.uploading,"can-cancel":!0},on:{"update:active":function(t){e.uploading=t}}})],1)},Jg=[],Qg=(a("c7cd"),a("310e")),Wg=a.n(Qg),Yg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"list-group-item d-flex flex-row align-items-center",class:{"bg-primary":e.selected,"bg-muted":!e.selected},on:{click:e.selectInputObj}},[a("pane-list-item-info",{attrs:{inputObj:e.inputObj},on:{onCommand:e.onCommandHandler}}),a("div",{staticClass:"pl-3"},[a("button",{staticClass:"btn btn-sm btn-danger btn-circle",on:{click:function(t){return e.deleteObj(e.inputObj)}}},[a("i",{staticClass:"fas fa-times"})])])],1)},Xg=[],Zg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex-grow-1 d-flex flex-row"},[a("input-obj-icon",{attrs:{inputObjType:e.inputObj.inputType}}),a("div",{staticClass:"d-flex flex-column flex-grow-1"},[a("input-obj-title",{attrs:{inputObj:e.inputObj}}),a("div",{staticClass:"d-flex flex-row mt-1"},[a("small",{staticClass:"pr-1"},[e._v(e._s(e.label))]),e.inputObj.question&&""!==e.inputObj.question?a("div",{staticClass:"input-obj-question badge badge-info",domProps:{innerHTML:e._s(e.questionContext)}}):e._e(),"1"===e.inputObj.required&&e.isInput?a("div",{staticClass:"badge badge-danger ml-1"},[a("i",{staticClass:"fas fa-bahai"})]):e._e()]),"output-image"===e.inputObj.inputType&&""!==e.inputObj.question&&null!==e.inputObj.question?a("div",{staticClass:"p-1"},[a("img",{staticClass:"input-obj-image-show",attrs:{src:e.inputObj.question}})]):e._e(),("single-choice"===e.inputObj.inputType||"multiple-choice"===e.inputObj.inputType)&&e.inputObj.options.length>0?a("div",{staticClass:"d-flex flex-row mt-1"},[a("small",{staticClass:"pr-1"},[e._v("Options")]),a("div",{staticClass:"input-obj-options line-height-1"},e._l(e.inputObj.options,(function(t,n){return a("div",{key:n,staticClass:"p-0 m-0",staticStyle:{"margin-bottom":"1px!important"}},[a("div",{staticClass:"input-obj-option m-0 badge badge-secondary"},[e._v(e._s(t))])])})),0)]):e._e(),"output"===e.inputObj.inputType.substr(0,6)?a("div",[e._l(e.inputObj.options,(function(t,n){return a("small",{staticClass:"line-height-1 mt-1 px-1 d-block note-font-size-10"},[e._v(" "+e._s(t)+" ")])})),""!==e.inputObj.note1.trim()?a("div",{staticClass:"d-flex flex-row justify-content-start"},[a("copy-link",{attrs:{link:e.inputObj.note1,variant:"danger"}},[e._v(e._s(e.inputObj.note1))])],1):e._e()],2):e._e(),e._t("default")],2)],1)},ev=[],tv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-object-icon"},[e.isIcon?a("font-awesome-icon",{attrs:{icon:["fas",e.activeInputObjType.newIcon]}}):a("small",[e._v(" "+e._s(e.activeInputObjType?e.activeInputObjType.text:"")+" ")])],1)},av=[],nv={props:{inputObjType:{type:String,default:""}},computed:{inputObjTypes:function(){return this.$store.getters.inputObjTypes},activeInputObjType:function(){for(var e=this,t=null,a=0;a<e.inputObjTypes.length;a++){var n=e.inputObjTypes[a];if(n.type===e.inputObjType){t=n;break}}return t||console.log('The input type "'+e.inputObjType+'" not exist.'),t},isIcon:function(){var e=this,t=!1;return e.activeInputObjType&&(t=""!==e.activeInputObjType.icon),t}}},ov=nv,iv=(a("b86d"),Object(g["a"])(ov,tv,av,!1,null,null,null)),sv=iv.exports,rv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-object-title px-1 d-flex flex-row align-items-center"},[a("div",{staticClass:"badge",class:{"badge-primary":e.isInput,"badge-success":!e.isInput}},[e._v(e._s(e.inputObjTypeLabel))]),e.inputObjType.isInput?a("div",{staticClass:"flex-grow-1 pl-2"},[e._v(e._s(e.inputObj.name)+" ")]):e._e()])},lv=[],cv={props:{inputObj:{type:Object,default:null}},computed:{inputObjTypes:function(){return this.$store.getters.inputObjTypes},inputObjType:function(){for(var e=this,t="(Unknown)",a=0;a<e.inputObjTypes.length;a++){var n=e.inputObjTypes[a];if(n.type===e.inputObj.inputType){t=n;break}}return t},inputObjTypeLabel:function(){return this.inputObjType.label},isInput:function(){return this.inputObjType.isInput}}},dv=cv,uv=(a("fb13"),Object(g["a"])(dv,rv,lv,!1,null,null,null)),mv=uv.exports,pv={components:{inputObjIcon:sv,inputObjTitle:mv,copyLink:sm},props:{inputObj:{type:Object,default:null},label:{type:String,default:""}},computed:{questionContext:function(){for(var e=this,t="|",a=e.inputObj.question.split(t),n=[],o=0;o<a.length;o++)n.push(a[o]);return n.join("<br/>")},isInput:function(){for(var e=this,t=!0,a=0;a<e.inputObjTypes.length;a++){var n=e.inputObjTypes[a];if(n.type===e.inputObj.inputType){t=n.isInput;break}}return t},inputObjType:function(){for(var e=this,t=null,a=0;a<e.inputObjTypes.length;a++)if(e.inputObjTypes[a].type===e.inputObj.inputType){t=e.inputObjTypes[a];break}return t},inputObjTypes:function(){return this.$store.getters.inputObjTypes}}},fv=pv,gv=(a("b1ab"),Object(g["a"])(fv,Zg,ev,!1,null,null,null)),vv=gv.exports,hv={components:{paneListItemInfo:vv},props:{index:{type:Number,default:0},inputObj:{type:Object,default:null},selected:{type:Boolean,default:!1}},computed:{},methods:{deleteObj:function(){var e=this;e.$dialog.confirm(e.$t("messages.areYouSure")).then((function(){e.$emit("onCommand",{command:"deleteInputObj",inputObj:e.inputObj})}))},selectInputObj:function(){var e=this;e.$emit("onCommand",{command:"selectInputObj",value:e.inputObj})},onCommandHandler:function(e){alert("FormInputObj :: onCommandHandler :: unhandled")}}},bv=hv,Cv=(a("bcaf"),Object(g["a"])(bv,Yg,Xg,!1,null,null,null)),_v=Cv.exports,yv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["system-page"===e.inputObj.inputType?a("div",{staticClass:"d-flex flex-column border"},[a("div",{staticClass:"p-2 border bg-primary text-center"},[e._v(" Page Attributes ")]),a("div",{staticClass:"p-2"},[a("attribute-set",{attrs:{attributeSetName:"system-page",options:e.inputObj.options},on:{onCommand:e.onCommandHandler}})],1)]):e._e(),e.isInputElement(e.inputObj)?a("div",{staticClass:"d-flex flex-column border"},[a("pane-details-title",{attrs:{inputObj:e.inputObj}}),a("div",{staticClass:"p-2"},[a("table",{staticClass:"table table-hover details-field-table"},[a("fields-table-row-caption",{attrs:{value:e.inputObj.name},on:{onCommand:e.onCommandHandler}}),a("fields-table-row-question",{attrs:{value:e.inputObj.question},on:{onCommand:e.onCommandHandler}}),a("fields-table-row-yes-no",{attrs:{label:"Required",value:e.inputObj.required,fieldName:"required"},on:{onCommand:e.onCommandHandler}}),a("fields-table-row",{attrs:{label:"Notes",value:e.inputObj.note1,fieldName:"note1"},on:{onCommand:e.onCommandHandler}})],1)])],1):"name"===e.inputObj.inputType?a("div",{staticClass:"d-flex flex-column border"},[a("pane-details-title",{attrs:{inputObj:e.inputObj}}),a("div",{staticClass:"p-2"},[a("table",{staticClass:"table table-hover details-field-table"},[a("fields-table-row-caption",{attrs:{value:e.inputObj.name},on:{onCommand:e.onCommandHandler}}),a("fields-table-row-question",{attrs:{value:e.inputObj.question},on:{onCommand:e.onCommandHandler}}),a("fields-table-row-yes-no",{attrs:{label:"Required",value:e.inputObj.required,fieldName:"required"},on:{onCommand:e.onCommandHandler}}),a("fields-table-row",{attrs:{label:"Notes",value:e.inputObj.note1,notes:"* first name",fieldName:"note1"},on:{onCommand:e.onCommandHandler}}),a("fields-table-row",{attrs:{label:"Notes",value:e.inputObj.note2,notes:"* last name",fieldName:"note2"},on:{onCommand:e.onCommandHandler}})],1)])],1):"phone"===e.inputObj.inputType?a("div",{staticClass:"d-flex flex-column border"},[a("pane-details-title",{attrs:{inputObj:e.inputObj}}),a("div",{staticClass:"p-2"},[a("table",{staticClass:"table table-hover details-field-table"},[a("fields-table-row-caption",{attrs:{value:e.inputObj.name},on:{onCommand:e.onCommandHandler}}),a("fields-table-row-question",{attrs:{value:e.inputObj.question},on:{onCommand:e.onCommandHandler}}),a("fields-table-row-yes-no",{attrs:{label:"Required",value:e.inputObj.required,fieldName:"required"},on:{onCommand:e.onCommandHandler}}),a("fields-table-row",{attrs:{label:"Notes",value:e.inputObj.note2,notes:"* Phone No.",fieldName:"note1"},on:{onCommand:e.onCommandHandler}})],1)])],1):"single-choice"===e.inputObj.inputType||"gender"===e.inputObj.inputType||"multiple-choice"===e.inputObj.inputType?a("div",{staticClass:"d-flex flex-column border"},[a("pane-details-title",{attrs:{inputObj:e.inputObj}}),a("div",{staticClass:"p-2"},[a("table",{staticClass:"table table-hover details-field-table"},[a("fields-table-row-caption",{attrs:{value:e.inputObj.name},on:{onCommand:e.onCommandHandler}}),a("fields-table-row-question",{attrs:{value:e.inputObj.question},on:{onCommand:e.onCommandHandler}}),a("fields-table-row-yes-no",{attrs:{label:"Required",value:e.inputObj.required,fieldName:"required"},on:{onCommand:e.onCommandHandler}}),a("fields-table-row-options",{attrs:{label:"Options",value:e.inputObj.options,fieldName:"options"},on:{onCommand:e.onCommandHandler}})],1)])],1):"output-image"===e.inputObj.inputType?a("div",{staticClass:"d-flex flex-column border"},[a("pane-details-title",{attrs:{inputObj:e.inputObj}}),a("div",{staticClass:"p-2"},[a("table",{staticClass:"table table-hover details-field-table"},[a("fields-table-row-image",{attrs:{label:"Image Link",value:e.inputObj.question,voucher:e.voucher,fieldName:"question"},on:{onCommand:e.onCommandHandler}}),a("fields-table-row",{attrs:{label:"Link",notes:"e.g. http://www.google.com",value:e.inputObj.note1,fieldName:"note1"},on:{onCommand:e.onCommandHandler}})],1),a("attribute-set",{attrs:{attributeSetName:e.inputObj.inputType,options:e.inputObj.options},on:{onCommand:e.onCommandHandler}})],1)],1):"output-remark"===e.inputObj.inputType?a("div",{staticClass:"d-flex flex-column border"},[a("pane-details-title",{attrs:{inputObj:e.inputObj}}),a("div",{staticClass:"p-2"},[a("table",{staticClass:"table table-hover details-field-table"},[a("fields-table-row-textarea",{attrs:{label:"Remark",value:e.inputObj.question.replace("|","\n"),fieldName:"question"},on:{onCommand:e.onCommandHandler}}),a("fields-table-row",{attrs:{label:"Link",notes:"e.g. http://www.google.com",value:e.inputObj.note1,fieldName:"note1"},on:{onCommand:e.onCommandHandler}})],1),a("attribute-set",{attrs:{attributeSetName:"inputObj.inputType",options:e.inputObj.options},on:{onCommand:e.onCommandHandler}})],1)],1):"output-submit"===e.inputObj.inputType?a("div",{staticClass:"d-flex flex-column border"},[a("pane-details-title",{attrs:{inputObj:e.inputObj}}),a("div",{staticClass:"p-2"},[a("table",{staticClass:"table table-hover details-field-table"},[a("fields-table-row",{attrs:{label:"Button Label",placeholder:"Submit",value:e.inputObj.question,fieldName:"question"},on:{onCommand:e.onCommandHandler}})],1),a("attribute-set",{attrs:{attributeSetName:"inputObj.inputType",options:e.inputObj.options},on:{onCommand:e.onCommandHandler}})],1)],1):e._e()])},wv=[],xv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td",{staticClass:"align-middle line-height-1 label-cell"},[a("div",[e._v(e._s(e.label))]),""!==e.notes?a("small",{staticClass:"field-notes"},[e._v(e._s(e.notes))]):e._e()]),a("td",{staticClass:"value-cell"},[a("input",{staticClass:"form-control",attrs:{type:e.type,placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){e.updateField(t.target.value)}}})])])},Tv=[],kv={model:{prop:"value",event:"input"},props:{label:{type:String,value:""},notes:{type:String,value:""},value:{type:String,value:""},type:{type:String,value:"text"},fieldName:{type:String,value:""},scope:{type:String,value:""},placeholder:{type:String,value:""}},methods:{updateField:function(e){var t=this;t.$emit("onCommand",{command:"updateField",scope:t.scope,fieldName:t.fieldName,fieldValue:e})}}},Sv=kv,Ov=(a("a6b7"),Object(g["a"])(Sv,xv,Tv,!1,null,null,null)),$v=Ov.exports,jv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("fields-table-row",{attrs:{label:"Caption",notes:"* used as header of export file",value:e.value,fieldName:"name"},on:{onCommand:e.onCommandHandler}})},Iv=[],Ev={components:{fieldsTableRow:$v},props:{value:{type:String,default:""}},methods:{onCommandHandler:function(e){this.$emit("onCommand",e)}}},Fv=Ev,Pv=Object(g["a"])(Fv,jv,Iv,!1,null,null,null),Av=Pv.exports,Dv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("fields-table-row",{attrs:{label:"Question",value:e.value,fieldName:"question"},on:{onCommand:e.onCommandHandler}})},Hv=[],Nv={components:{fieldsTableRow:$v},props:{value:{type:String,default:""}},methods:{onCommandHandler:function(e){this.$emit("onCommand",e)}}},Rv=Nv,Vv=Object(g["a"])(Rv,Dv,Hv,!1,null,null,null),Mv=Vv.exports,Lv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td",{staticClass:"align-middle line-height-1 label-cell"},[a("div",[e._v(e._s(e.label))]),""!==e.notes?a("small",{staticClass:"field-notes"},[e._v(e._s(e.notes))]):e._e()]),a("td",{staticClass:"value-cell"},[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn",class:{"btn-primary":"1"===e.value,"btn-light":"0"===e.value},attrs:{type:"button"},on:{click:function(t){return e.updateField("1")}}},[e._v("Yes")]),a("button",{staticClass:"btn",class:{"btn-primary":"0"===e.value,"btn-light":"1"===e.value},attrs:{type:"button"},on:{click:function(t){return e.updateField("0")}}},[e._v("No")])])])])},Uv=[],qv={model:{prop:"value",event:"input"},props:{label:{type:String,value:""},notes:{type:String,value:""},value:{type:String,value:"1"},type:{type:String,value:"text"},fieldName:{type:String,value:""}},methods:{updateField:function(e){var t=this;t.$emit("onCommand",{command:"updateField",fieldName:t.fieldName,fieldValue:e})}}},Bv=qv,Gv=(a("2f56"),Object(g["a"])(Bv,Lv,Uv,!1,null,null,null)),Kv=Gv.exports,zv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td",{staticClass:"align-top line-height-1 pt-3 label-cell"},[a("div",[e._v(e._s(e.label))]),""!==e.notes?a("small",{staticClass:"field-notes"},[e._v(e._s(e.notes))]):e._e()]),a("td",{staticClass:"value-cell"},[a("draggable",e._b({staticClass:"input-option-list list-group",attrs:{tag:"ul",value:e.optionItems,move:e.onMove},on:{input:function(t){return e.updateItemOrder(t)},start:function(t){e.isDragging=!0},end:function(t){e.isDragging=!1}}},"draggable",e.dragOptions,!1),e._l(e.optionItems,(function(t){return a("li",{key:t.id,staticClass:"input-option-item list-group-item px-2 py-1"},[a("div",{staticClass:"d-flex flex-row align-items-center"},[a("div",{staticClass:"ml-1 mr-3"},[a("i",{staticClass:"fas fa-align-justify"})]),a("div",{staticClass:"flex-grow-1 pr-2"},[a("input",{staticClass:"w-100",domProps:{value:t.value},on:{mouseenter:function(t){e.editable=!1},mouseleave:function(t){e.editable=!0},input:function(a){return e.updateField(t.id,a.target.value)}}})]),a("button",{attrs:{type:"button"},on:{click:function(a){return e.deleteOption(t.id)}}},[a("i",{staticClass:"fas fa-times"})])])])})),0),a("div",{staticClass:"p-1"},[a("button",{staticClass:"btn btn-primary btn-circle",attrs:{type:"button"},on:{click:e.addOption}},[a("i",{staticClass:"fas fa-plus"})])])],1)])},Jv=[],Qv={data:function(){return{editable:!0,isDragging:!1,delayedDragging:!1}},components:{draggable:Wg.a},model:{prop:"value",event:"input"},watch:{isDragging:function(e){var t=this;e?this.delayedDragging=!0:this.$nextTick((function(){t.delayedDragging=!1}))}},computed:{dragOptions:function(){return{animation:0,group:"description",disabled:!this.editable,ghostClass:"ghost"}},optionItems:function(){for(var e=this,t=[],a=0;a<e.value.length;a++)t.push({id:a+1,value:e.value[a]});return t}},props:{label:{type:String,value:""},notes:{type:String,value:""},value:{type:Array,value:function(){return[]}},type:{type:String,value:"text"},fieldName:{type:String,value:""}},methods:{addOption:function(){var e=this;e.$emit("onCommand",{command:"appendBlankOption"})},updateField:function(e,t){var a=this,n=a.getOptionIndex(e);this.$emit("onCommand",{command:"updateOptionByIndex",index:n,fieldValue:t})},deleteOption:function(e){var t=this,a=t.getOptionIndex(e);t.$emit("onCommand",{command:"removeOptionByIndex",index:a})},getOptionIndex:function(e){for(var t=this,a=-1,n=0;n<t.optionItems.length;n++)if(t.optionItems[n].id===e){a=n;break}return a},onMove:function(e){var t=e.relatedContext,a=e.draggedContext,n=t.element,o=a.element;return(!n||!n.fixed)&&!o.fixed},updateItemOrder:function(e){for(var t=this,a=[],n=0;n<e.length;n++)a.push(e[n].value);t.$emit("onCommand",{command:"updateField",fieldName:t.fieldName,fieldValue:a})}}},Wv=Qv,Yv=(a("0a94"),Object(g["a"])(Wv,zv,Jv,!1,null,null,null)),Xv=Yv.exports,Zv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td",{staticClass:"align-top p-t-3 line-height-1 label-cell"},[a("div",[e._v(e._s(e.label))]),""!==e.notes?a("small",{staticClass:"field-notes"},[e._v(e._s(e.notes))]):e._e()]),a("td",{staticClass:"value-cell"},[a("Textarea",{staticClass:"form-control",attrs:{rows:"10"},on:{input:function(t){e.updateField(t.target.value)}}},[e._v(e._s(e.value)+" ")])],1)])},eh=[],th={model:{prop:"value",event:"input"},props:{label:{type:String,value:""},notes:{type:String,value:""},value:{type:String,value:""},type:{type:String,value:"text"},fieldName:{type:String,value:""}},methods:{updateField:function(e){var t=this;t.$emit("onCommand",{command:"updateField",fieldName:t.fieldName,fieldValue:e})}}},ah=th,nh=(a("7d4c"),Object(g["a"])(ah,Zv,eh,!1,null,null,null)),oh=nh.exports,ih=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td",{staticClass:"align-middle line-height-1 label-cell"},[a("div",[e._v(e._s(e.label))]),""!==e.notes?a("small",{staticClass:"field-notes"},[e._v(e._s(e.notes))]):e._e()]),a("td",{staticClass:"value-cell"},[a("div",{ref:"imageInput",staticClass:"input-group"},[a("input",{staticClass:"form-control",attrs:{type:e.type},domProps:{value:e.value},on:{input:function(t){e.updateField(t.target.value)}}}),a("button",{staticClass:"input-group-append",on:{click:e.selectImage}},[a("i",{staticClass:"fas fa-fw fa-images"})]),a("button",{staticClass:"input-group-append",on:{click:e.uploadImage}},[a("i",{staticClass:"fas fa-fw fa-upload"})]),a("input",{ref:"imageUploader",staticStyle:{width:"1px"},attrs:{id:"image-uploader",type:"file",name:"pic",accept:"image/*"},on:{change:function(t){return e.uploadImageFile(t.target)}}})])])])},sh=[],rh={model:{prop:"value",event:"input"},props:{label:{type:String,default:""},notes:{type:String,default:""},value:{type:String,default:""},type:{type:String,default:"text"},fieldName:{type:String,default:""},voucher:{type:Object,default:null}},methods:{updateField:function(e){var t=this;t.$emit("onCommand",{command:"updateField",fieldName:t.fieldName,fieldValue:e})},selectImage:function(){var e=this;e.$emit("onCommand",{command:"selectImage",fieldName:"question"})},uploadImage:function(){var e=this;e.$refs.imageUploader.click()},uploadImageFile:function(e){var t=this,a=e,n=new FormData;n.append("file",a.files[0]),n.append("scope","local"),n.append("voucherId",t.voucher.id),t.$store.dispatch("AUTH_UPLOAD_IMAGE",n).then((function(e){var a=e.result.imageUrl;t.$emit("onCommand",{command:"updateField",fieldName:"question",fieldValue:a})}),(function(e){t.$toaster.error(t.$t("messages."+e.messageTag))}))}}},lh=rh,ch=(a("9a18"),Object(g["a"])(lh,ih,sh,!1,null,null,null)),dh=ch.exports,uh=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"p-2 border bg-primary"},[a("input-obj-title",{attrs:{inputObj:e.inputObj}})],1)},mh=[],ph={components:{inputObjTitle:mv},props:{inputObj:{type:Object,default:null}}},fh=ph,gh=Object(g["a"])(fh,uh,mh,!1,null,null,null),vh=gh.exports,hh=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._l(e.objAttributeInfo,(function(t,n){return a("div",{key:n,staticClass:"mb-3"},[""!==t.caption?a("u",[e._v(e._s(t.caption))]):e._e(),a("attribute-table",{attrs:{optionIndex:n,keyValues:e.keyValueLists[n],userStyle:e.userStyles[n],attributeKeys:t.attributeKeys},on:{onCommand:e.onCommandHandler}})],1)})),0)},bh=[],Ch=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",{staticClass:"w-100"},[e._l(e.keyValues,(function(t,n){return a("tr",{key:n},[a("td",{staticClass:"label-cell"},[e._v(" "+e._s(e.attributeInfos[t.attributeKey].caption)+" ")]),a("td",{staticClass:"value-cell"},[a("input",{staticClass:"form-control",attrs:{name:"ctrl"+e.optionIndex+"_"+n},domProps:{value:t.value},on:{input:function(a){return e.updateKeyPair(t.attributeKey,a.target.value)}}})])])})),a("tr",[a("td",{staticClass:"label-cell"},[e._v(" Style ")]),a("td",{staticClass:"value-cell"},[a("input",{staticClass:"form-control",domProps:{value:e.userStyle},on:{input:function(t){return e.updateOtherStyle(t.target.value)}}})])])],2)},_h=[],yh={data:function(){return{}},computed:{attributeInfos:function(){return this.$store.getters.attributeInfos}},props:{keyValues:{type:Array,default:function(){return[]}},userStyle:{type:String,default:""},attributeKeys:{type:Array,default:function(){return[]}},optionIndex:{type:Number,default:0}},methods:{updateOtherStyle:function(e){var t=this;t.$emit("onCommand",{command:"updateOtherStyle",optionIndex:t.optionIndex,userStyle:t.userStyle,value:e})},updateKeyPair:function(e,t){var a=this;a.$emit("onCommand",{command:"updateStyle",optionGroup:a.attributeInfos[e].optionGroup,styleName:a.attributeInfos[e].styleName,value:t})},refreshx:function(){var e=this;if(e.keyPairs=[],e.attributeKeys.length>0)for(var t=0;t<e.attributeKeys.length;t++)e.keyPairs.push({key:e.attributeKeys[t],value:""});var a=e.keyPairs.map((function(e){return e.key})),n=[];if(""!==e.inputStyle)for(var o=e.inputStyle.split(";"),i=0;i<o.length;i++){var s=o[i].trim();if(""!==s){var r=s.split(":");r.length>1&&(n[r[0]]=r[1])}}var l=[];if(e.attributeKeys.length>0)for(var c=0;c<e.attributeKeys.length;c++){var d=e.attributeKeys[c],u=e.attributeInfos[e.attributeKeys[c]];if(u){var m=u.styleName,p=a.indexOf(d);e.keyPairs[p].value="",void 0!==n[m]&&(l.push(m),p>=0&&(e.keyPairs[p].value=n[m]))}}}},mounted:function(){}},wh=yh,xh=Object(g["a"])(wh,Ch,_h,!1,null,null,null),Th=xh.exports,kh={components:{attributeTable:Th},computed:{objAttributeInfo:function(){var e=this,t=this.$store.getters.objAttributeGroups[e.attributeSetName];return t||[]},attributeInfos:function(){return this.$store.getters.attributeInfos}},data:function(){return{keyValueLists:[],userStyles:[]}},props:{attributeSetName:{type:String,default:function(){return""}},options:{type:Array,default:function(){return[]}}},watch:{options:function(){this.refresh()}},mounted:function(){var e=this;e.refresh()},methods:{refresh:function(){var e=this,t=0,a=JSON.parse(JSON.stringify(e.options)),n=["",""],o=[{},{}],i=[[],[]];for(t=0;t<a.length;t++)n[t]=a[t];for(o[0]=e.strToKeyValues(n[0]),o[1]=e.strToKeyValues(n[1]),t=0;t<e.objAttributeInfo.length;t++)for(var s=e.objAttributeInfo[t],r=s["attributeKeys"],l=0;l<r.length;l++){var c=r[l],d=e.attributeInfos[c],u=d["styleName"];switch(d["optionGroup"]){case"elementGroup":i[0].push({attributeKey:c,value:o[0][u]}),delete o[0][u];break;case"containerGroup":i[1].push({attributeKey:c,value:o[1][u]}),delete o[1][u];break}}e.userStyles=[e.keyValuesToStr(o[0]),e.keyValuesToStr(o[1])],e.keyValueLists=[i[0],i[1]]},strToKeyValues:function(e){var t={};if(e=e.trim(),""!==e)for(var a=e.split(";"),n=0;n<a.length;n++){var o=a[n].trim();if(""!==o){var i=o.split(":");i.length>1&&(t[i[0]]=i[1])}}return t},keyValuesToStr:function(e,t){"undefined"===typeof t&&(t=!1);var a="";if(Object.keys(e).length>0)for(var n in e)(""!==e[n]||t)&&(a+=n+":"+e[n]+";");return a},onCommandHandler:function(e){var t=this;console.log("AttributeSet :: onCommandHandler :: payload: ",e);var a,n,o,i,r,l,c,d=e.command;switch(d){case"updateOtherStyle":for(var u in a=e.optionIndex,o=t.strToKeyValues(e.userStyle),i=Object.keys(o),r=t.strToKeyValues(e.value),l=Object.keys(r),console.log("AttributeSet :: onCommandHandler :: originalUserKeyValues: ",o),console.log("AttributeSet :: onCommandHandler :: originalUserKeys: ",i),console.log("AttributeSet :: onCommandHandler :: newUserKeyValues: ",r),console.log("AttributeSet :: onCommandHandler :: newUserKeys: ",l),c={},console.log("AttributeSet :: onCommandHandler :: vm.options[optionIndex]: ",t.options[a]),n=t.strToKeyValues(t.options[a]),console.log("AttributeSet :: onCommandHandler :: options keyValues: ",n),n=Object(s["a"])(Object(s["a"])({},n),r),console.log("AttributeSet :: onCommandHandler :: options keyValues + newUserKeyValues: ",n),n)i.indexOf(u)>=0?l.indexOf(u)>=0&&(c[u]=r[u]):l.indexOf(u)>=0?c[u]=r[u]:c[u]=n[u];console.log("AttributeSet :: onCommandHandler :: updatedKeyValues: ",c),t.options[a]=t.keyValuesToStr(c),t.$emit("onCommand",{command:"updateOptions",options:t.options});break;case"updateStyle":switch(e.optionGroup){case"elementGroup":t.updateStyleValue(0,e.styleName,e.value);break;case"containerGroup":t.updateStyleValue(1,e.styleName,e.value);break}break}},updateStyleValue:function(e,t,a){var n=this,o=["",""];if(n.options.length>0)for(var i=0;i<n.options.length;i++)o[i]=JSON.parse(JSON.stringify(n.options[i]));var s=n.strToKeyValues(o[e]);s[t]=a,console.log("updateStyleValue :: styleName = "+t),console.log("updateStyleValue :: value = "+a),o[e]=n.keyValuesToStr(s,!1),console.log("Attribute :: updateStyleValue :: optionIndex = "+e),console.log("Attribute :: updateStyleValue :: "+t+" => "+a),console.log("Attribute :: options: ",o),n.$emit("onCommand",{command:"updateOptions",options:o})}}},Sh=kh,Oh=Object(g["a"])(Sh,hh,bh,!1,null,null,null),$h=Oh.exports,jh={components:{fieldsTableRow:$v,fieldsTableRowCaption:Av,fieldsTableRowQuestion:Mv,fieldsTableRowYesNo:Kv,fieldsTableRowOptions:Xv,fieldsTableRowTextarea:oh,fieldsTableRowImage:dh,paneDetailsTitle:vh,attributeSet:$h},props:{inputObj:{type:Object,default:null},voucher:{type:Object,default:null}},computed:{inputObjTypes:function(){return this.$store.getters.inputObjTypes}},methods:{updateImageLink:function(e){},isInputElement:function(e){var t=["simple-text","number","email","text"];return t.indexOf(e.inputType)>=0},inputObjTypeName:function(e){for(var t=this,a="(Unknown)",n=0;n<t.inputObjTypes.length;n++){var o=t.inputObjTypes[n];if(o.type===e){a=o.label;break}}return a},onCommandHandler:function(e){var t=this;console.log("PanelDetails :: onCommand: payload: ",e),t.$emit("onCommand",e)}}},Ih=jh,Eh=(a("bf7a"),Object(g["a"])(Ih,yv,wv,!1,null,null,null)),Fh=Eh.exports,Ph=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btn-toolbar object-type-list"},e._l(e.inputObjTypes,(function(t){return a("div",{key:t.type},[a("button",{staticClass:"btn btn-primary text-center",class:{"btn-primary":t.isInut,"btn-success":!t.isInput},on:{click:function(a){return e.onButtonClicked(t.type)}}},[t.icon?a("i",{class:t.icon}):a("small",[e._v(e._s(t.text))]),a("br"),a("small",[e._v(e._s(t.label))])]),a("br"),a("div",{staticClass:"text-center",staticStyle:{"font-size":"8pt"}},[e._v(e._s(t.type))])])})),0)},Ah=[],Dh={computed:{inputObjTypes:function(){var e=this;return this.$store.getters.inputObjTypes.filter((function(t){return!t.fixed&&(!t.isInput&&"output-submit"!==t.type||e.includeInputObjs)}))}},props:{includeInputObjs:{type:Boolean,default:!0}},methods:{onButtonClicked:function(e){var t=this;t.$emit("onCommand",{command:"newInputObj",value:e})}}},Hh=Dh,Nh=(a("9efc"),Object(g["a"])(Hh,Ph,Ah,!1,null,null,null)),Rh=Nh.exports,Vh=["vue.draggable","draggable","component","for","vue.js 2.0","based","on","Sortablejs"],Mh={mixins:[xr],name:"FormBuilderPanel",props:{voucher:{type:Object,default:null},formType:{type:Object,default:null},participantCount:{type:Number,default:0}},computed:{formConfigs:function(){var e=this;return e.formType.formConfigs},isQuestionForm:function(){var e=this;return"question"===e.formType.key},pageInputObj:function(){var e=this,t={};return e.formConfigs&&(t=e.formConfigs.inputObjs.find((function(e){return"system-page"===e.inputType}))),t},inputObjs:function(){var e=this,t=[];return e.formConfigs&&(t=e.formConfigs.inputObjs.filter((function(e){return"system-page"!==e.inputType}))),t},dragOptions:function(){return{animation:0,group:"description",disabled:!this.editable,ghostClass:"ghost"}},listString:function(){return JSON.stringify(this.list,null,2)},list2String:function(){return JSON.stringify(this.list2,null,2)},inputObjTypes:function(){return this.$store.getters.inputObjTypes}},components:{draggable:Wg.a,paneListItem:_v,paneDetails:Fh,inputObjButtonList:Rh,xlsFileUpload:Cu},data:function(){return{uploadRoute:"/form_input_objs/upload",uploading:!1,selectedInputObj:null,list:Vh.map((function(e,t){return{name:e,order:t+1,fixed:!1}})),list2:[],editable:!0,isDragging:!1,delayedDragging:!1}},mounted:function(){var e=this;e.selectedInputObj=e.pageInputObj},methods:{updateSelectedInputObj:function(e){var t=this,a=null;if(e&&e["formConfigs"]&&e["formConfigs"]["inputObjs"])for(var n=e["formConfigs"]["inputObjs"],o=0;o<n.length;o++){var i=n[o];if(console.log("updateSelectedInputObj :: inputObj.inputtype = "+i.inputType+", name="+i.name),console.log("updateSelectedInputObj :: selectedInputObj.inputtype = "+t.selectedInputObj.inputType+", name="+t.selectedInputObj.name),t.selectedInputObj.inputType==i.inputType&&t.selectedInputObj.name===i.name&&t.selectedInputObj.question===i.question){a=i;break}}t.selectedInputObj=a},updateInputObjOrder:function(e){var t=this;t.participantCount>0&&"question"===t.formType.key?t.$dialog.alert("Participant exists. Form layout canont be changed!"):(console.log("updateInputObjOrder  :: reorderedInputObjs: ",e),t.$emit("onCommand",{command:"replaceInputObjs",value:e}))},updatePageConfigField:function(e,t){this.$emit("onCommand",{command:"updatePageConfigField",fieldName:e,fieldValue:t})},clearForm:function(){var e=this,t=this;t.confirmDelete((function(){e.$emit("onCommand",{command:"clearForm"}),e.selectedInputObj=e.pageInputObj}))},exportForm:function(){this.$emit("onCommand",{command:"exportFormConfigs"})},previewForm:function(){this.$emit("onCommand",{command:"previewQuestionForm"})},onCommandHandler:function(e){console.log("FormBuilderPanelContent :: onCommandHandler : payload: ",e);var t=this,a=e.command;switch(a){case"selectInputObj":t.selectedInputObj=e.value;break;default:var n=t.getSelectedInputObjIndex(),o=e;switch(a){case"newInputObj":o["objIndex"]=n,o["callback"]=function(e,a){t.selectedInputObj=t.formConfigs.inputObjs[a]};break;case"deleteInputObj":n=t.getInputObjIndex(e.inputObj),o["objIndex"]=n;break;case"updateField":o["command"]="pageConfig"===o["scope"]?"updatePageConfigField":"updateInputObjField",o["objIndex"]=n;break;case"selectImage":o["command"]="selectInputObjImage",o["objIndex"]=n;break;case"appendBlankOption":o["command"]="appendInputObjOption",o["objIndex"]=n;break;case"updateOptions":o["command"]="updateInputObjOptions",o["objIndex"]=n;break;case"updateOptionByIndex":o["command"]="updateInputObjOptionByIndex",o["objIndex"]=n;break;case"removeOptionByIndex":o["command"]="removeInputObjOptionByIndex",o["objIndex"]=n;break}t.$emit("onCommand",o)}},getInputObjIndex:function(e){var t=this,a=-1;if(console.log("getInputObjIndex : inputObj.question = "+e.question),e)for(var n=0;n<t.formConfigs.inputObjs.length;n++)if(console.log("getInputObjIndex : i="+n+": vm.formConfigs.inputObjs[i].question = "+t.formConfigs.inputObjs[n].question),t.formConfigs.inputObjs[n]===e){a=n;break}return a},getSelectedInputObjIndex:function(){var e=this;return e.getInputObjIndex(e.selectedInputObj)},selectInputObj:function(e){var t=this;t.selectedInputObj=e},onMove:function(e){var t=e.relatedContext,a=e.draggedContext,n=t.element,o=a.element;return(!n||!n.fixed)&&!o.fixed},onUploadingHandler:function(){this.uploading=!0},onUploadedHandler:function(e){var t=this;t.$emit("onCommand",{command:"update"}),t.selectedInputObj=null,t.uploading=!1,t.$emit("onCommand",{command:"replaceInputObjs",value:e})}},watch:{"formType.key":function(){for(var e=this,t=!1,a=0;a<e.formConfigs.inputObjs.length;a++)if(e.formConfigs.inputObjs[a]===e.selectedInputObj){t=!0;break}t||(e.selectedInputObj=e.pageInputObj)},pageInputObj:function(e){var t=this;null===t.selectedInputObj&&(t.selectedInputObj=e)},isDragging:function(e){var t=this;e?this.delayedDragging=!0:this.$nextTick((function(){t.delayedDragging=!1}))}}},Lh=Mh,Uh=(a("60d7"),Object(g["a"])(Lh,zg,Jg,!1,null,null,null)),qh=Uh.exports,Bh=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-type-selection btn-group mb-2"},e._l(e.optionsWithAddButton,(function(t){return a("button",{key:t.name,staticClass:"btn py-1 px-2 no-wrap form-type-button",class:{"btn-primary":t===e.value,"btn-light":t!==e.value,"min-width-100":"+"!==t.name},attrs:{type:"button"},on:{mouseleave:function(t){e.showMenu=""},click:function(a){return e.selectOption(t)}}},[a("div",{staticClass:"d-inline-block"},[e._v(e._s(t.name))]),"question"!==t.key&&"+"!==t.name?a("div",{staticClass:"other-actions d-inline-block ml-2 px-1 border-1",on:{click:function(a){e.showMenu=t.key}}},[e._v(" ... "),e.showMenu===t.key?a("div",{staticClass:"dropdown-menu",staticStyle:{position:"absolute",top:"100%",left:"0",display:"block"},attrs:{"aria-labelledby":"dropdownMenuButton"}},[a("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(a){return e.renameOption(t)}}},[e._v("Rename")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(a){return e.deleteOption(t)}}},[e._v("Remove")])]):e._e()]):e._e()])})),0)},Gh=[],Kh={mixins:[xr],data:function(){return{showMenu:""}},model:{prop:"value",event:"input"},computed:{optionsWithAddButton:function(){for(var e=this,t=[],a=0;a<e.options.length;a++)t.push(e.options[a]);return t.push({name:"+",key:"ADD",formConfigs:null}),t}},props:{value:{type:Object,default:null},options:{type:Array,default:function(){return[]}}},methods:{renameOption:function(e){var t=this;t.$emit("onCommand",{command:"renameFormType",formKey:e.key})},deleteOption:function(e){var t=this;t.confirm((function(){t.$emit("onCommand",{command:"removeFormType",formKey:e.key})}))},selectOption:function(e){var t=this;t.$emit("input",e)}}},zh=Kh,Jh=(a("06c1"),Object(g["a"])(zh,Bh,Gh,!1,null,null,null)),Qh=Jh.exports,Wh={components:{formBuilderPanelContent:qh,formTypeSelection:Qh},props:{record:{type:Object,default:function(){return null}}},data:function(){return{selectedFormType:null}},watch:{formTypes:{handler:function(e){var t=this;if(t.selectedFormType){for(var a=t.selectedFormType.key,n=0;n<t.formTypes.length;n++)if(t.formTypes[n].key===a){t.selectedFormType=t.formTypes[n],t.$refs.formBuilderPanelContent.updateSelectedInputObj(t.selectedFormType);break}}else t.selectedFormType=t.formTypes[0],t.$refs.formBuilderPanelContent.updateSelectedInputObj(t.selectedFormType)},deep:!0}},methods:{selectFormType:function(e){var t=this;"ADD"===e.key?t.$emit("onCommand",{command:"newFormType"}):t.selectedFormType=e},onCommandHandler:function(e){var t=this,a=e.command;switch(a){case"renameFormType":case"removeFormType":t.$emit("onCommand",e);break;default:e=Object(s["a"])(Object(s["a"])({},e),{},{key:t.selectedFormType.key}),t.$emit("onCommand",e)}}},computed:{formTypes:function(){for(var e=this,t=[{name:"Question",key:"question",formConfigs:e.record.form_configs}],a=0;a<e.record.custom_forms.length;a++){var n=e.record.custom_forms[a];t.push({name:n.name,key:n.form_key,formConfigs:n.form_configs})}return t}},mounted:function(){var e=this;e.selectedFormType=e.formTypes[0]}},Yh=Wh,Xh=Object(g["a"])(Yh,Gg,Kg,!1,null,null,null),Zh=Xh.exports,eb={components:{formBuilderPanel:Zh},props:{title:{type:String,default:""},record:{type:Object,default:null}},methods:{onCommandHandler:function(e){this.$emit("onCommand",e)}}},tb=eb,ab=Object(g["a"])(tb,qg,Bg,!1,null,null,null),nb=ab.exports,ob=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-tab",{staticClass:"bg-white py-2",scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.title)+" "),e.participantCount>0?a("div",{staticClass:"badge badge-warning"},[e._v(" "+e._s(e.participantCount)+" ")]):e._e()]},proxy:!0}])},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("form-participants-table",{ref:"formParticipantsTable",attrs:{voucherId:e.record.id,inputObjs:e.inputObjs},on:{onCommand:e.onCommandHandler}})],1)])])])},ib=[],sb=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"py-2 px-3 form-participants-table"},[a("div",{staticClass:"toolbar d-flex flex-row justify-content-between mb-1 align-items-end"},[a("search-field",{attrs:{searchValue:e.searchValue,appLoading:e.appLoading}}),a("table",{staticClass:"summary-table"},[a("tr",[e._m(0),a("td",{staticClass:"summary-value"},[e._v(e._s(e.statusSummary.pending))]),e._m(1),a("td",{staticClass:"summary-value"},[e._v(e._s(e.statusSummary.completed))])]),a("tr",[e._m(2),a("td",{staticClass:"summary-value"},[e._v(e._s(e.statusSummary.hold))]),e._m(3),a("td",{staticClass:"summary-value"},[e._v(e._s(e.statusSummary.fails))])])]),a("div",{staticClass:"text-center btn-group mx-3"},[a("button",{staticClass:"btn btn-sm btn-outline-success min-width-100",attrs:{type:"button"},on:{click:function(t){return e.assignCode()}}},[a("font-awesome-icon",{attrs:{icon:"paperclip"}}),a("span",{staticClass:"ml-2"},[e._v("Assign Code")])],1),a("button",{staticClass:"btn btn-sm btn-outline-danger min-width-100",attrs:{type:"button"},on:{click:function(t){return e.clearCodeAssignment()}}},[a("font-awesome-icon",{attrs:{icon:"paperclip"}}),a("span",{staticClass:"ml-2"},[e._v("Clear Assignment")])],1)]),a("div",[a("button",{staticClass:"btn btn-outline-primary min-width-100 mr-1",attrs:{type:"button"},on:{click:function(t){return e.reloadAll()}}},[a("i",{staticClass:"fas fa-recycle"}),a("span",{staticClass:"ml-2"},[e._v("Refresh")])]),a("button",{staticClass:"btn btn-danger min-width-100 mr-1",attrs:{type:"button",disabled:0===e.data.length},on:{click:function(t){return e.deleteAll()}}},[a("i",{staticClass:"fas fa-times"}),a("span",{staticClass:"ml-2"},[e._v(e._s(e.$t("buttons.deleteAll")))])]),a("button",{staticClass:"btn btn-warning min-width-100 mr-1",attrs:{type:"button",disabled:0===e.data.length},on:{click:function(t){return e.exportExcel()}}},[a("i",{staticClass:"fas fa-download"}),a("span",{staticClass:"ml-2"},[e._v("Download")])])])],1),a("div",{staticClass:"freezable-table freeze-last-column freeze-left-three-columns",attrs:{id:"participant-table"}},[a("datatable",e._b({attrs:{columns:e.columns}},"datatable",e.$data,!1))],1),e.loading?a("div",{staticClass:"text-center",attrs:{id:"loadingMask"}},[a("h3",{staticClass:"d-inline-block mr-auto"},[a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}})],1)]):e._e(),a("common-dialog",{ref:"codeAssignmentConfirmationDialog",attrs:{id:"codeAssignmentConfirmationDialog",title:"Code Assignment Confirmation",buttons:e.codeAssignmentConfirmationButtons},on:{onCommand:e.onCommandHandler}})],1)},rb=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{staticClass:"summary-label"},[a("div",{staticClass:"badge badge-info min-width-80"},[e._v("Pending")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{staticClass:"summary-label"},[a("div",{staticClass:"badge badge-success min-width-80"},[e._v("Completed")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{staticClass:"summary-label"},[a("div",{staticClass:"badge badge-muted min-width-80"},[e._v("On Hold")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{staticClass:"summary-label"},[a("div",{staticClass:"badge badge-danger min-width-80"},[e._v("Fails")])])}],lb={mixins:[wa,Ff],components:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Mc),sf),{},{searchField:mf,commonDialog:Tf}),data:function(){return{codeAssignmentConfirmationButtons:[{caption:"Go Ahead",command:"confirmAssignCode",variant:"primary"}],statusSummary:{pending:0,hold:0,completed:0,fails:0},loading:!1,appLoading:!1,columns:[],allData:[],data:[],total:0,query:{filter:"",sort:"",order:"",page:0},xprops:{buttons:["delete","email"],eventbus:new r["default"],actionButtonSize:"xs",optionalChoices:[],firstField:"",statuses:[]},HeaderSettings:!1,selectedRow:null,searchValue:"",searchInputTimer:3e3,filterFields:"*",defaultColumns2:[{title:"general.status",thComp:"ThCommonHeader",thClass:"text-center",tdClass:"align-middle text-center",tdComp:"TdCodeStatus",field:"status",sortable:!0},{title:"general.action",thComp:"ThCommonHeader",tdClass:"align-middle",tdComp:"TdCommonOpt",field:"id"}]}},computed:{userInputObjs:function(){for(var e=this,t=[],a=0;a<e.inputObjs.length;a++){var n=e.inputObjs[a],o=n["inputType"];switch(o){case"output-image":case"output-remark":case"output-submit":case"system-page":continue;default:t.push(n)}}return t}},props:{voucherId:{type:Number,default:0},inputObjs:{type:Array,default:function(){return[]}},record:{type:Object,default:null}},watch:{userInputObjs:{handler:function(e){var t=this;t.setColumns(e),t.query.page=1},deep:!0},voucherId:{handler:function(e){var t=this;0!==t.voucherId&&(console.log("watch(voucherId) :: voucherId = "+e),t.onQueryChangedHandler(e))}},query:{handler:function(e){var t=this;0!==t.voucherId&&t.onQueryChangedHandler(e)},deep:!0},searchValue:function(){var e=this;e.filterFields&&null!==e.filterFields?(0!==e.searchInputTimer&&clearTimeout(e.searchInputTimer),e.searchInputTimer=setTimeout(e.setSearchValue,2e3)):e.alert("No filter fields defined!")}},mounted:function(){var e=this;e.setColumns(e.userInputObjs),e.query.page=1},created:function(){var e=this;e.xprops.eventbus.$on("onRowCommand",e.onRowCommandHandler)},destroyed:function(){var e=this;e.xprops.eventbus.$off("onRowCommand")},methods:{updateStatus:function(e){var t=this;console.log("FormParticipantsTable :: updateStatus :: data: ",e);for(var a=e.statusInfo,n=0;n<t.data.length;n++)if(t.data[n].id===a.participant_id){t.updateStatusByIndex(n,a);break}},updateStatusByIndex:function(e,t){var a=this,n=t.status;switch(a.data[e].status=n,n){case"fails":case"completed":a.data[e].sent_at=t.sent_at,a.data[e].error_message=t.error_message;break;case"hold":case"pending":case"processing":a.data[e].sent_at="",a.data[e].error_message="";break}a.configRowButtonsByIndex(e)},clearCodeAssignment:function(){var e=this;e.$dialog.confirm({title:e.$t("general.confirmation"),body:"All assigned codes will be revoked from all the participants. Are you sure?"}).then((function(){var t={urlCommand:"/vouchers/"+e.voucherId+"/clear_code_assignments"};e.$store.dispatch("AUTH_POST",t).then((function(t){e.showToaster(t),e.reloadAll()}),(function(t){e.showToaster(t)}))}))},assignCode:function(e){var t=this;"undefined"===typeof e&&(e=!1);var a={urlCommand:"/vouchers/"+t.voucherId+"/assign_codes",data:{force:e}};t.$store.dispatch("AUTH_POST",a).then((function(e){console.log("assignCode.then response: ",e),t.showToaster(e),t.reloadAll()}),(function(e){console.log("assignCode.then error: ",e),e.needConfirm?(t.$refs.codeAssignmentConfirmationDialog.setMessage(e.message),t.$bvModal.show("codeAssignmentConfirmationDialog")):t.showToaster(e)}))},deleteParticipant:function(e){var t=this,a={urlCommand:"/vouchers/"+t.voucherId+"/participants/"+e};t.$store.dispatch("AUTH_DELETE",a).then((function(e){console.log("deleteParticipant :: AUTH_DELETE.then : response: ",e),t.reloadAll(),t.$emit("onCommand",{command:"refreshCouponCodes"}),t.$emit("onCommand",{command:"updateField",fieldName:"participant_count",fieldValue:e.participant_count})}),(function(e){console.log("deleteParticipant :: AUTH_DELETE.then : error: ",e)}))},onCommandHandler:function(e){var t=this,a=e.command;switch(a){case"search":t.searchValue=e.searchValue;break;case"confirmAssignCode":t.$bvModal.hide("codeAssignmentConfirmationDialog"),t.assignCode(!0);break}},refresh:function(){console.log("FormParticipantsTable :: refresh()"),this.reloadAll()},exportExcel:function(){var e=this;e.$emit("onCommand",{command:"exportParticipants"})},deleteAll:function(){var e=this;e.$dialog.confirm(e.$t("messages.areYouSure")).then((function(){e.doDeleteAll(),e.$emit("onCommand",{command:"setRecordField",fieldName:"participant_count",fieldValue:0})}))},doDeleteAll:function(){var e=this,t={urlCommand:"/vouchers/"+e.voucherId+"/participants"};e.$store.dispatch("AUTH_DELETE",t).then((function(){e.$toaster.success(e.$t("messages.all_codes_are_removed")),e.onQueryChangedHandler(e.query)}))},setSearchValue:function(e){var t=this;"undefined"===typeof e?e=t.searchValue:t.searchValue=e,t.query.filter=e?t.filterFields+":"+e:"",t.searchInputTimer=0},clearSearch:function(){var e=this;e.query.filter=e.filterFields+":",e.onQueryChangedHandler(e.query)},onQueryChangedHandler:function(e){this.reloadAll(e)},reloadStatusSummary:function(){var e=this;if(e.loading=!0,0!==e.voucherId){var t={urlCommand:"/vouchers/"+e.voucherId+"/status_summary"};e.$store.dispatch("AUTH_GET",t).then((function(t){console.log("FormParticipantsTable :: reloadStatusSummary: response: ",t),e.statusSummary=t.status_summary,e.loading=!1}))}else alert("vm.voucherId = 0")},reloadAll:function(e){var t=this;t.reloadData(e),t.reloadStatusSummary()},reloadData:function(e){var t=this;if(t.loading=!0,"undefined"===typeof e&&(e=t.query),0!==t.voucherId){var a={urlCommand:"/vouchers/"+t.voucherId+"/participants",query:e};t.$store.dispatch("AUTH_GET",a).then((function(e){t.total=e.total,t.$emit("onCommand",{command:"updateField",fieldName:"participant_count",fieldValue:t.total}),t.data=t.parseCodeInfoData(e.data),t.configRowButtons(t.data),t.$forceUpdate(),t.loading=!1}))}},parseCodeInfoData:function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];n["buttons"]=[],t.push(n)}return t},onRowCommandHandler:function(e){var t=this;switch(e.command){case"delete":t.$dialog.confirm(t.$t("messages.areYouSure")).then((function(){var a=e.row.id;t.deleteParticipant(a)}));break;case"changeStatus":t.changeStatus(e);break;case"email":t.sendEmail(e.row);break;case"update":t.saveCodeInfo(e.row);break;case"updateField":t.setCodeFieldValue(e.row,e.fieldName,e.fieldValue);break}},sendEmail:function(e){var t=this,a={urlCommand:"/participants/"+e.id+"/send_email"},n="email:"+e.id;t.addXpropsStatus(n),t.$store.dispatch("AUTH_POST",a).then((function(e){console.log("FormParticipantsTable :: sendEmail :: response: ",e),t.removeXpropsStatus(n)}),(function(a){e["error_message"]=a["message"],e["sent_at"]=a["sent_at"],e["status"]=a["status"],t.$toaster.warning(a["message"]),t.removeXpropsStatus(n),t.configRowButtons()}))},changeStatus:function(e){var t=this;console.log("FormParticipantsTable :: changeStatus :: payload: ",e);var a={urlCommand:"/participants/"+e.row.id+"/change_status/"+e.status};t.$store.dispatch("AUTH_POST",a).then((function(a){for(var n={status:e.status,sent_at:"",error_message:""},o=0;o<t.data.length;o++)if(t.data[o].id===e.row.id){t.updateStatusByIndex(o,n);break}t.statusSummary=a.status_summary}))},getInputObjOption:function(e,t){var a=this,n=!1;if(e.options.length>0){var o=a.strToKeyValues(e.options[0]);Object.keys(o).indexOf("twoFields")>=0&&(n=o["twoFields"])}return n},configRowButtonsByIndex:function(e){var t=this,a=t.data[e],n=[];a.locked&&n.push("delete"),a&&""!==a.email.trim()&&"fails"!==a.status&&"completed"!==a.status||n.push("email"),t.data[e].buttons=t.xprops.buttons.filter((function(e){return-1===n.indexOf(e)}))},configRowButtons:function(e){var t=this;"undefined"===typeof e&&(e=t.data);for(var a=0;a<e.length;a++)t.configRowButtonsByIndex(a)},setColumns:function(e){var t=this;t.xprops["optionalChoices"]={},t.columns=[{title:t.$t("general.number"),thComp:"ThSimpleHeader",tdComp:"TdCommonIndex",tdClass:"text-center align-middle",thClass:"text-center",field:"id"}];for(var a=0;a<e.length;a++){var n=e[a],o=n["inputType"],i="field"+a;if(0===a)if("name"===o){var s=t.getInputObjOption(n,"twoFields");t.xprops.firstField=s?i+"_0":i}else t.xprops.firstField=i;switch(o){case"simple-text":t.columns.push({title:n.name,tdClass:"text-left align-middle",thClass:"text-left",thComp:"ThParticipantBadgeHeader",tdComp:"TdParticipantField",field:i});break;case"number":t.columns.push({title:n.name,tdClass:"text-center align-middle",thClass:"text-center",thComp:"ThParticipantBadgeHeader",tdComp:"TdParticipantField",field:i});break;case"email":t.columns.push({title:n.name,tdClass:"text-left align-middle",thClass:"text-left",thComp:"ThParticipantBadgeHeader",tdComp:"TdParticipantField",field:i});break;case"text":t.columns.push({title:n.name,tdClass:"text-left align-middle",thClass:"text-left",thComp:"ThParticipantBadgeHeader",tdComp:"TdParticipantField",field:i});break;case"name":n.options;var r=t.getInputObjOption(n,"twoFields");if(r){var l="",c="";if(""!==n.name.trim()){var d=n.name.split(",");d.length>0&&(l=d[0]),d.length>1?c=d[1]:(c=l+" [2]",l+=" [1]")}t.columns.push({title:l,tdClass:"text-left align-middle",thClass:"text-left",thComp:"ThParticipantBadgeHeader",tdComp:"TdParticipantField",field:i+"_0"}),t.columns.push({title:c,tdClass:"text-left align-middle",thClass:"text-left",thComp:"ThParticipantBadgeHeader",tdComp:"TdParticipantField",field:i+"_1"})}else t.columns.push({title:n.name,tdClass:"text-left align-middle",thClass:"text-left",thComp:"ThParticipantBadgeHeader",tdComp:"TdParticipantField",field:i});break;case"phone":t.columns.push({title:n.name,tdClass:"text-left align-middle",thClass:"text-left",thComp:"ThParticipantBadgeHeader",tdComp:"TdParticipantField",field:i});break;case"gender":t.columns.push({title:n.name,tdClass:"text-center align-middle",thClass:"text-center",thComp:"ThParticipantBadgeHeader",tdComp:"TdSingleChoice",field:i}),t.xprops["optionalChoices"][i]=n.options;break;case"single-choice":t.columns.push({title:n.name,tdClass:"text-left align-middle",thClass:"text-left",thComp:"ThParticipantBadgeHeader",tdComp:"TdSingleChoice",field:i}),t.xprops["optionalChoices"][i]=n.options;break;case"multiple-choice":t.columns.push({title:n.name,tdClass:"text-left align-middle",thClass:"text-left",thComp:"ThParticipantBadgeHeader",tdComp:"TdMultipleChoice",field:i});break}}for(var u=0;u<t.defaultColumns2.length;u++)t.columns.push(t.defaultColumns2[u])}}},cb=lb,db=(a("0416"),Object(g["a"])(cb,sb,rb,!1,null,null,null)),ub=db.exports,mb={components:{formParticipantsTable:ub},props:{title:{type:String,default:"No Title"},record:{type:Object,default:null}},computed:{participantCount:function(){var e=this,t=0;return e.record&&e.record.participant_count>0&&(t=e.record.participant_count),t},inputObjs:function(){var e=this,t=[];if(console.log("inputObjs"),e.record)switch(console.log("inputObjs :: vm.record"),e.record.voucher_type){case"form":console.log("inputObjs :: vm.record.voucher_type === form"),e.record.form_configs&&e.record.form_configs.inputObjs&&(t=e.record.form_configs.inputObjs);break;case"voucher":console.log("inputObjs :: vm.record.voucher_type === voucher"),e.record.participant_configs&&e.record.participant_configs.inputObjs&&(t=e.record.participant_configs.inputObjs);break;default:console.log("inputObjs :: vm.voucher_type unknown")}return console.log("computed(inputObjs) :: inputObjs.length = "+e.record.partipiant-length),t}},methods:{onCommandHandler:function(e){this.$emit("onCommand",e)}}},pb=mb,fb=Object(g["a"])(pb,ob,ib,!1,null,null,null),gb=fb.exports,vb=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("validation-observer",{ref:"infoPageObserver",scopedSlots:e._u([{key:"default",fn:function(t){t.invalid;return[a("div",{staticClass:"row pt-2"},[a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"form-group mb-1"},[a("label",{attrs:{for:"description"}},[e._v(" "+e._s(e.$t("vouchers.title"))+" ")]),a("validation-provider",{attrs:{rules:"required",immediate:!0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.record.description,expression:"record.description"}],staticClass:"form-control",class:{"has-error":n.length>0},attrs:{id:"description",name:"description",type:"text"},domProps:{value:e.record.description},on:{input:function(t){t.target.composing||e.$set(e.record,"description",t.target.value)}}})]}}],null,!0)}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.record.notes,expression:"record.notes"}],staticClass:"form-control mt-1",staticStyle:{padding:"0.25rem 0.75rem","line-height":"1.2",height:"1.4rem"},attrs:{placeholder:e.$t("vouchers.sub_title"),id:"notes",name:"notes",type:"text"},domProps:{value:e.record.notes},on:{input:function(t){t.target.composing||e.$set(e.record,"notes",t.target.value)}}})],1)]),a("data-input-date",{attrs:{width:"2",id:"activate_date",labelTag:"vouchers.activation_date"},model:{value:e.record.activation_date,callback:function(t){e.$set(e.record,"activation_date",t)},expression:"record.activation_date"}}),a("data-input-date",{attrs:{width:"2",id:"expiry_date",labelTag:"vouchers.expiry_date"},model:{value:e.record.expiry_date,callback:function(t){e.$set(e.record,"expiry_date",t)},expression:"record.expiry_date"}}),a("data-input-readonly",{attrs:{width:"2",id:"status",labelTag:"general.status",value:e.$t("status."+e.record.status)}})],1),a("div",{staticClass:"row pt-3"},[e.isAgentOwner?a("data-input-select",{attrs:{width:"2",id:"agent_id",labelTag:"agents.agent",options:e.agents,optionLabelField:"name"},model:{value:e.record.agent_id,callback:function(t){e.$set(e.record,"agent_id",t)},expression:"record.agent_id"}}):a("div",{staticClass:"col-sm-2"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"agent_id"}},[e._v("Agent")]),a("input",{staticClass:"form-control",attrs:{readonly:"",id:"agent_id",name:"agent_id"},domProps:{value:e.record.agent.name}}),a("input",{staticClass:"form_control",attrs:{type:"hidden",id:"agent_id",name:"agent_id"},domProps:{value:e.record&&e.record.agent&&e.record.agent_id}})])]),a("div",{staticClass:"col-sm-2"},[a("div",{staticClass:"d-flex flex-row justify-content-between"},[a("label",[e._v("QR Code "),a("copy-token",{attrs:{token:"qrcode"}})],1)]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.qrcodeConfig.composition,expression:"qrcodeConfig.composition"}],staticClass:"form-control",domProps:{value:e.qrcodeConfig.composition},on:{input:function(t){t.target.composing||e.$set(e.qrcodeConfig,"composition",t.target.value)}}}),a("div",{staticClass:"d-flex flex-row align-items-center"},[a("small",{staticClass:"line-height-1 d-inline mr-1"},[e._v("Size")]),a("vue-range-slider",{ref:"slider",staticStyle:{width:"100%"},attrs:{min:5,max:20},scopedSlots:e._u([{key:"tooltip",fn:function(t){var n=t.value;return a("div",{staticClass:"diy-tooltip"},[e._v(" "+e._s(n)+" ")])}}],null,!0),model:{value:e.qrcodeConfig.width,callback:function(t){e.$set(e.qrcodeConfig,"width",t)},expression:"qrcodeConfig.width"}}),a("div",{staticClass:"line-height-1 text-nowrap"},[e._v(e._s(e.qrcodeConfig.width)+" px")])],1)]),a("div",{staticClass:"col-sm-2"},[a("div",{staticClass:"d-flex flex-row justify-content-between"},[a("label",[e._v("Barcode "),a("copy-token",{attrs:{token:"barcode"}})],1)]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.barcodeConfig.composition,expression:"barcodeConfig.composition"}],staticClass:"form-control",domProps:{value:e.barcodeConfig.composition},on:{input:function(t){t.target.composing||e.$set(e.barcodeConfig,"composition",t.target.value)}}}),a("div",{staticClass:"d-flex flex-row align-items-center"},[a("small",{staticClass:"text-nowrap line-height-1 d-inline mr-1"},[e._v("Width/bar")]),a("vue-range-slider",{ref:"slider",staticStyle:{width:"100%"},attrs:{min:1,max:5},scopedSlots:e._u([{key:"tooltip",fn:function(t){var n=t.value;return a("div",{staticClass:"diy-tooltip"},[e._v(" "+e._s(n)+" ")])}}],null,!0),model:{value:e.barcodeConfig.width,callback:function(t){e.$set(e.barcodeConfig,"width",t)},expression:"barcodeConfig.width"}}),a("div",{staticClass:"line-height-1 text-nowrap"},[e._v(e._s(e.barcodeConfig.width))])],1),a("div",{staticClass:"d-flex flex-row align-items-center"},[a("small",{staticClass:"text-nowrap line-height-1 d-inline mr-1"},[e._v("Height")]),a("vue-range-slider",{ref:"slider",staticStyle:{width:"100%"},attrs:{min:30,max:99},scopedSlots:e._u([{key:"tooltip",fn:function(t){var n=t.value;return a("div",{staticClass:"diy-tooltip"},[e._v(" "+e._s(n)+" ")])}}],null,!0),model:{value:e.barcodeConfig.height,callback:function(t){e.$set(e.barcodeConfig,"height",t)},expression:"barcodeConfig.height"}}),a("div",{staticClass:"line-height-1 text-nowrap"},[e._v(e._s(e.barcodeConfig.height))])],1)]),a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"d-flex flex-row"},[a("label",[e._v("Voucher Type")])]),a("div",{staticClass:"d-flex flex-row justify-content-between align-items-start voucher-type-selection"},[a("div",{staticClass:"flex-grow-1"},[a("button",{staticClass:"btn w-100 mr-1",class:{"btn-primary":"voucher"===e.record.voucher_type,"btn-light":"voucher"!==e.record.voucher_type},attrs:{type:"button"},on:{click:function(t){e.record.voucher_type="voucher"}}},[a("img",{staticClass:"voucher-type-icon",attrs:{"data-toggle":"tooltip",title:"Voucher",src:"/img/voucher.png"}}),a("img",{staticClass:"voucher-type-icon white-icon",attrs:{"data-toggle":"tooltip",title:"Voucher",src:"/img/voucher-w.png"}})])]),a("div",{staticClass:"flex-grow-1 p-l-1"},[a("button",{staticClass:"btn w-100 ml-1",class:{"btn-success":"form"===e.record.voucher_type,"btn-light":"form"!==e.record.voucher_type},attrs:{type:"button"},on:{click:function(t){e.record.voucher_type="form"}}},[a("div",{staticClass:"d-flex flex-row justify-content-center align-items-center"},[a("img",{staticClass:"voucher-type-icon flex-grow-1",attrs:{"data-toggle":"tooltip",title:"Form Filling",src:"/img/form.png"}}),a("img",{staticClass:"voucher-type-icon flex-grow-1 white-icon",attrs:{"data-toggle":"tooltip",title:"Form Filling",src:"/img/form-w.png"}}),a("i",{staticClass:"fa fa-play"}),a("img",{staticClass:"voucher-type-icon flex-grow-1",attrs:{"data-toggle":"tooltip",title:"Voucher",src:"/img/voucher.png"}}),a("img",{staticClass:"voucher-type-icon flex-grow-1 white-icon",attrs:{"data-toggle":"tooltip",title:"Voucher",src:"/img/voucher-w.png"}})])])])])])],1)]}}])})],1)},hb=[],bb=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"col-sm-"+e.width},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:e.id}},[e._v(e._s(e.inputLabel))]),a("input",{staticClass:"form-control",attrs:{id:e.id,name:e.id,type:e.type},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}})])])},Cb=[],_b={model:{prop:"value",event:"input"},props:{type:{type:String,default:"text"},id:{type:String,default:""},label:{type:String,default:""},labelTag:{type:String,default:""},value:{type:[String,Number],default:""},width:{type:String,default:""}},computed:{inputLabel:function(){var e=this,t=e.label;return""!==e.labelTag&&(t=e.$t(e.labelTag)),t}}},yb=_b,wb=Object(g["a"])(yb,bb,Cb,!1,null,null,null),xb=wb.exports,Tb=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data-input-date",class:"col-sm-"+e.width},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:e.id}},[e._v(e._s(e.$t(e.labelTag)))]),a("date-picker",{staticClass:"w-100",attrs:{value:e.value,valueType:"format"},on:{input:function(t){return e.$emit("input",t)}}})],1)])},kb=[],Sb={components:{datePicker:Ll["a"]},model:{prop:"value",event:"input"},props:{id:{type:String,default:""},labelTag:{type:String,default:""},value:{type:String,default:""},width:{type:String,default:""}},methods:{onInput:function(e){}}},Ob=Sb,$b=(a("4c18"),Object(g["a"])(Ob,Tb,kb,!1,null,null,null)),jb=$b.exports,Ib=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"col-sm-"+e.width},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:e.id}},[e._v(e._s(e.inputLabel))]),a("div",{staticClass:"input-group"},[a("input",{staticClass:"form-control",attrs:{id:e.id,name:e.id,type:e.inputType},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),a("button",{staticClass:"input-group-append",on:{click:e.toggleShowingPassword}},[e.showingPassword?a("font-awesome-icon",{staticClass:"fa-fw",attrs:{icon:"eye"}}):a("font-awesome-icon",{staticClass:"fa-fw",attrs:{icon:"eye-slash"}})],1)])])])},Eb=[],Fb={data:function(){return{inputType:"password",showingPassword:!1}},model:{prop:"value",event:"input"},props:{id:{type:String,default:""},label:{type:String,default:""},labelTag:{type:String,default:""},value:{type:[String,Number],default:""},width:{type:String,default:""}},computed:{inputLabel:function(){var e=this,t=e.label;return""!==e.labelTag&&(t=e.$t(e.labelTag)),t}},methods:{toggleShowingPassword:function(){var e=this;e.showingPassword=!e.showingPassword,e.showingPassword?e.inputType="text":e.inputType="password"}}},Pb=Fb,Ab=Object(g["a"])(Pb,Ib,Eb,!1,null,null,null),Db=Ab.exports,Hb=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"col-sm-"+e.width},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:e.id}},[e._v(e._s(e.$t(e.labelTag)))]),a("input",{staticClass:"form-control",attrs:{readonly:"",id:e.id,name:e.id,type:"text"},domProps:{value:e.value}})])])},Nb=[],Rb={model:{prop:"value",event:"input"},props:{id:{type:String,default:""},labelTag:{type:String,default:""},value:{type:String,default:""},width:{type:String,default:""}}},Vb=Rb,Mb=Object(g["a"])(Vb,Hb,Nb,!1,null,null,null),Lb=Mb.exports,Ub=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"col-sm-"+e.width},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:e.id}},[e._v(e._s(e.$t(e.labelTag)))]),a("select",{staticClass:"form-control",attrs:{id:e.id,name:e.id},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",parseInt(t.target.value))}}},e._l(e.options,(function(t){return a("option",{key:t[e.optionValueField],domProps:{value:t[e.optionValueField]}},[e._v(e._s(t[e.optionLabelField])+" ")])})),0)])])},qb=[],Bb={model:{prop:"value",event:"input"},props:{id:{type:String,default:""},labelTag:{type:String,default:""},value:{type:Number,default:0},width:{type:String,default:""},options:{type:Array,default:function(){return[]}},optionLabelField:{type:String,default:"label"},optionValueField:{type:String,default:"id"}}},Gb=Bb,Kb=Object(g["a"])(Gb,Ub,qb,!1,null,null,null),zb=Kb.exports,Jb=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-3"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t(e.labelTag)))]),a("div",{staticClass:"form-control d-flex flex-row"},[a("vue-range-slider",{ref:"slider",staticStyle:{width:"100%"},attrs:{min:e.min,max:e.max,value:e.value},on:{input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"tooltip",fn:function(t){var n=t.value;return a("div",{staticClass:"diy-tooltip"},[e._v(" "+e._s(n)+" ")])}}])}),a("div",{staticClass:"line-height-1 text-nowrap"},[e._v(e._s(e.value)+" px")])],1)])])},Qb=[],Wb=a("c7e3"),Yb=a.n(Wb),Xb={component:{vueRangeSlider:Yb.a},model:{prop:"value",event:"input"},props:{labelTag:{type:String,default:""},id:{type:String,default:""},min:{type:Number,default:100},max:{type:Number,default:300},value:{type:Number,default:100}}},Zb=Xb,eC=(a("007d"),Object(g["a"])(Zb,Jb,Qb,!1,null,null,null)),tC=eC.exports,aC=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"col-sm-"+e.width},[a("validation-provider",{ref:"provider",attrs:{rules:e.rules},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;t.invalid;return[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:e.id}},[e._v(e._s(e.inputLabel))]),a("input",{staticClass:"form-control",class:{"border-danger":n.length>0},attrs:{id:e.id,name:e.id,autocomplete:"false",type:e.type},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}})])]}}])})],1)},nC=[],oC={model:{prop:"value",event:"input"},props:{rules:{type:String,default:""},type:{type:String,default:"text"},id:{type:String,default:""},label:{type:String,default:""},labelTag:{type:String,default:""},value:{type:[String,Number],default:""},width:{type:String,default:""}},computed:{inputLabel:function(){var e=this,t=e.label;return""!==e.labelTag&&(t=e.$t(e.labelTag)),t}}},iC=oC,sC=Object(g["a"])(iC,aC,nC,!1,null,null,null),rC=sC.exports,lC=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"col-sm-"+e.width},[a("validation-provider",{ref:"provider",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;t.invalid;return[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:e.id}},[e._v(e._s(e.inputLabel))]),a("div",{staticClass:"input-group"},[a("input",{staticClass:"form-control",class:{"border-danger":n.length>0},attrs:{id:e.id,name:e.id,type:e.inputType,autocomplete:"new-password"},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),a("button",{staticClass:"input-group-append",on:{click:e.toggleShowingPassword}},[e.showingPassword?a("font-awesome-icon",{staticClass:"fa-fw",attrs:{icon:"eye"}}):a("font-awesome-icon",{staticClass:"fa-fw",attrs:{icon:"eye-slash"}})],1)])])]}}])})],1)},cC=[],dC={data:function(){return{inputType:"password",showingPassword:!1}},model:{prop:"value",event:"input"},props:{rules:{type:String,default:""},id:{type:String,default:""},label:{type:String,default:""},labelTag:{type:String,default:""},value:{type:[String,Number],default:""},width:{type:String,default:""}},computed:{inputLabel:function(){var e=this,t=e.label;return""!==e.labelTag&&(t=e.$t(e.labelTag)),t}},methods:{toggleShowingPassword:function(){var e=this;e.showingPassword=!e.showingPassword,e.showingPassword?e.inputType="text":e.inputType="password"}}},uC=dC,mC=Object(g["a"])(uC,lC,cC,!1,null,null,null),pC=mC.exports,fC={dataInput:xb,dataInputDate:jb,dataInputPassword:Db,dataInputReadonly:Lb,dataInputSelect:zb,dataInputSlider:tC,dataRadioToggle:Pu,vDataInput:rC,vDataInputPassword:pC},gC={components:Object(s["a"])({DataRadioToggle:Pu,copyToken:Lm,copyLink:sm,vueRangeSlider:Yb.a},fC),props:{record:{type:Object,default:null},qrcodeConfig:{type:Object,default:null},barcodeConfig:{type:Object,default:null}},computed:{isAgentOwner:function(){var e=this,t=!0,a=e.agents.map((function(e){return e.id}));return e.record&&(t=a.indexOf(e.record.agent_id)>=0),t},isOwner:function(){var e=this,t=!1;return e.record&&(t=e.user.id===e.record.user_id),t},user:function(){var e=this;return e.$store.getters.user},customLink:function(){var e=this;return e.$store.getters.appHost+"/q/"+e.record.custom_link_key},agents:function(){return this.$store.getters.agents}},data:function(){return{showRedemptionCode:!1,redemptionOptions:[{name:"Use Password",value:"password"},{name:"None",value:"none"}]}},methods:{validate:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.abrupt("return",a.$refs.infoPageObserver.validate());case 2:case"end":return t.stop()}}),t)})))()}}},vC=gC,hC=Object(g["a"])(vC,vb,hb,!1,null,null,null),bC=hC.exports,CC=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("template-editor",{ref:"templateEditor",attrs:{voucher:e.voucher,id:"templateEditor",content:e.voucher.template,templateTagGroups:e.templateTagGroups},on:{onCommand:e.onCommandHandler}})],1)])},_C=[],yC={data:function(){return{defaultTemplateTagGroups:[],templateTagGroups:[]}},computed:{codeFields:function(){var e=this,t=[];if(null!==e.voucher.code_fields&&""!==e.voucher.code_fields){var a=ae.getKeyPairArray(e.voucher.code_fields);t=a.map((function(e){return e[0]}))}return t.push("ticket_link"),t}},mounted:function(){var e=this;e.fetchDefaultTemplateKeys()},methods:{getTemplateTagGroups:function(){var e=this,t=[];if(e.defaultTemplateTagGroups){t=JSON.parse(JSON.stringify(e.defaultTemplateTagGroups)),e.codeFields.length>0&&t.push({name:"code",tags:[]});for(var a=t.length-1,n=0;n<e.codeFields.length;n++){var o=ae.str2token("code_",e.codeFields[n]);t[a]["tags"].push(o)}"function"===typeof e.onTemplateTagGroupsReady&&(t=e.onTemplateTagGroupsReady(t))}return t},fetchDefaultTemplateKeys:function(){var e=this;e.defaultTemplateTagGroups=[],e.$store.dispatch("AUTH_GET","/template_keys").then((function(t){for(var a=function(a){var n=t[a],o=n.category,i=n.key,s=e.defaultTemplateTagGroups.find((function(e){return e.name===o}));s?s.tags.push(i):e.defaultTemplateTagGroups.push({name:o,tags:[i]})},n=0;n<t.length;n++)a(n);e.templateTagGroups=e.getTemplateTagGroups()}),(function(){e.showSessionExpired("template keys")}))}}},wC=yC,xC=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex flex-row align-items-stretch"},[a("div",{staticClass:"flex-grow-1"},[a("div",{staticClass:"toolbar p-1 text-right d-flex flex-row align-items-end justify-content-end"},[a("div",{staticClass:"btn-group mx-3"},[a("button",{staticClass:"btn btn-outline-info btn-sm",on:{click:e.copyContent}},[a("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"copy"}}),e._v("Copy")],1),a("button",{staticClass:"btn btn-outline-info btn-sm",on:{click:function(t){return e.pasteContent(t)}}},[a("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"paint-brush"}}),e._v("Paste")],1)]),a("button",{staticClass:"btn btn-danger min-width-100",attrs:{type:"button"},on:{click:e.clearTemplate}},[a("i",{staticClass:"fas fa-trash mr-1"}),e._v("Clear ")]),a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:e.copyFrom}},[a("i",{staticClass:"fas fa-copy mr-1"}),e._v("Copy From ... ")]),a("button",{staticClass:"btn btn-primary",staticStyle:{"border-bottom-right-radius":"0","border-top-right-radius":"0","border-right":"1px darkgray solid"},attrs:{type:"button"},on:{click:e.gotoBeeFreeIo}},[a("i",{staticClass:"fas fa-cubes mr-1"}),e._v("Bee")]),a("xls-file-upload",{staticStyle:{"margin-left":"0","border-top-left-radius":"0","border-bottom-left-radius":"0"},attrs:{inputId:"uploadTemplate",uploadUrl:"/html_file/upload_zip",fileType:"zip",postData:{}},on:{onUploading:e.onUploadingHandler,onUploaded:e.onUploadedHandler}}),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:e.showPreview}},[a("i",{staticClass:"fas fa-mask mr-1"}),e._v("Preview ")])],1),a("html-editor",{ref:"htmlEditor",attrs:{id:"emailTemplateEditor",content:e.content,voucher:e.voucher},on:{onCommand:e.onCommandHandler,input:function(t){return e.updateContent(t)}}})],1),e.isFullScreenEditorMode?a("div",{staticClass:"fullscreen-token-list-panel d-flex flex-column"},[a("invalid-tag-list",{staticClass:"flex-grow-0 p-2 bg-danger ml-2",attrs:{invalidTags:e.invalidTags},on:{onCommand:e.onCommandHandler}}),a("template-tag-list",{staticClass:"flex-grow-0 p-2 bg-muted ml-2",attrs:{templateTagGroups:e.templateTagGroups},on:{onCommand:e.onCommandHandler}})],1):a("div",[a("invalid-tag-list",{staticClass:"flex-grow-0 p-2 bg-danger ml-2",attrs:{invalidTags:e.invalidTags},on:{onCommand:e.onCommandHandler}}),a("template-tag-list",{staticClass:"flex-grow-0 p-2 bg-muted ml-2",attrs:{templateTagGroups:e.templateTagGroups,met:""},on:{onCommand:e.onCommandHandler}})],1)])},TC=[],kC=(a("99af"),a("a1f0"),a("2909")),SC=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"template-tag-list d-flex flex-column align-items-stretch"},[e.templateTagGroups.length>0?a("h6",{staticClass:"text-center"},[e._v("Tag List")]):e._e(),e._l(e.templateTagGroups,(function(t){return a("div",{key:t["name"]},[e._v(" "+e._s(e.$t("vouchers."+t["name"]))+" "),a("ul",{staticClass:"token-list list-unstyled px-2 mb-1"},e._l(t.tags,(function(t){return a("li",{key:t},[a("div",{staticClass:"badge badge-warning",on:{click:function(a){return e.insertTag(t)}}},[a("i",{staticClass:"fas fa-plus"}),e._v(" "+e._s("{"+t+"}")+" ")])])})),0)])}))],2)},OC=[],$C={props:{templateTagGroups:{type:Array,default:function(){return[]}}},methods:{insertTag:function(e){this.$emit("onCommand",{command:"insertTag",value:e})}}},jC=$C,IC=(a("5c5c"),Object(g["a"])(jC,SC,OC,!1,null,null,null)),EC=IC.exports,FC=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"invalid-tag-list"},[a("button",{staticClass:"btn btn-outline-warning w-100",on:{click:function(t){return e.$emit("onCommand",{command:"checkTags"})}}},[e._v("Check Validity")]),e.invalidTags&&Object.keys(e.invalidTags).length>0?a("div",[a("h6",{staticClass:"mt-2 text-center"},[e._v("Invalid Tag List")]),a("ul",{staticClass:"my-2 px-1"},e._l(e.invalidTags,(function(t,n){return a("li",{key:n},[a("div",{staticClass:"badge badge-warning"},[e._v(e._s(n))]),t>1?a("span",{staticClass:"ml-1"},[e._v("x "+e._s(t))]):e._e()])})),0)]):a("div",{staticClass:"mt-2 text-center"},[a("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"check"}}),e._v(" No invalid Tags. ")],1)])},PC=[],AC={props:{invalidTags:{type:Object,default:function(){return null}}}},DC=AC,HC=(a("92f6"),Object(g["a"])(DC,FC,PC,!1,null,null,null)),NC=HC.exports,RC={components:{htmlEditor:Ag,templateTagList:EC,invalidTagList:NC,xlsFileUpload:Cu},props:{id:{type:String,default:"customTemplate"},content:{type:String,default:""},templateTagGroups:{type:Array,default:function(){return[]}},voucher:{type:Object,default:null}},computed:{agents:function(){return this.$store.getters.agents},agent:function(){var e=this,t={name:"",web:""};if(e.voucher&&0!==e.voucher.agent_id){var a=e.agents.find((function(t){return t.id==e.voucher.agent_id}));a&&(t.name=a.name,t.web=a.web)}return t}},data:function(){return{isFullScreenEditorMode:!1,invalidTags:null}},methods:{getAllTags:function(){for(var e=this,t=[],a=0;a<e.templateTagGroups.length;a++)t=[].concat(Object(kC["a"])(t),Object(kC["a"])(e.templateTagGroups[a]["tags"]));return t},onPaste:function(e){console.log("pasteContent : $event: ",e),e.preventDefaults(),e.stopPropagation()},copyContent:function(){var e=this;e.$copyText(e.content),e.$toaster.success("Template content copyied to clipboard successfull")},pasteContent:function(e){var t=this;""!==t.content.trim()?t.$dialog.confirm("It will overwrite existing content. Are you sure?").then((function(){t.doPasteContent()})):t.doPasteContent()},doPasteContent:function(){var e=this;navigator.clipboard.readText().then((function(t){e.setContent(t)})).catch((function(t){e.$toaste.error("Error: cannot paste content in clipboard!")}))},onUploadingHandler:function(){},onUploadedHandler:function(e){var t=this;""===t.content.trim()?t.setContent(e.content):t.$dialog.confirm(t.$t("messages.existingContentWillBeCleared")).then((function(){t.setContent(e.content)}))},setContent:function(e){var t=this;t.$emit("onCommand",{command:"updateTemplateContent",fieldValue:e})},copyFrom:function(){var e=this;e.$emit("onCommand",{command:"copyTemplate"})},uploadBeeFile:function(){},showPreview:function(){var e=this;e.checkTags(),e.previewTemplate()},previewTemplate:function(){var e=this;e.$emit("onCommand",{command:"save",callback:e.doPreviewTemplate})},doPreviewTemplate:function(){var e=this,t={urlCommand:"/templates/create_preview",data:{content:e.content,tagListGroups:e.templateTagGroups,voucherId:e.voucher.id,tagValues:{qrcode:"12345678",barcode:"12345678",voucher_description:e.voucher.description,voucher_activation_date:e.voucher.activation_date,voucher_expiry_date:e.voucher.expiry_date,agent_name:e.agent.name,agent_web:e.agent.web}}};e.$store.dispatch("AUTH_POST",t).then((function(t){var a=t.key,n=e.$store.getters.appHost+"/t/preview/_"+a;window.open(n,"_blank")}))},updateContent:function(e){var t=this;t.$emit("onCommand",{command:"updateTemplateContent",fieldValue:e})},updateTemplateName:function(e){var t=this;t.$emit("onCommand",{command:"updateTemplateName",id:t.customTemplate.id,value:e})},updateTemplateContent:function(e){var t=this;t.$emit("onCommand",{command:"updateTemplateContent",id:t.customTemplate.id,value:e})},clearTemplate:function(){var e=this;e.$dialog.confirm(e.$t("messages.areYouSure")).then((function(){e.$emit("onCommand",{command:"clearTemplate",callback:function(){e.$refs.htmlEditor.clearContent()}})}))},checkTags:function(){var e=this,t=Object(kC["a"])(e.content.matchAll(/{([^:^}^;]+?)}/g)),a=t.map((function(e){return e[1]})),n=e.getAllTags();console.log("checkTags :: userTags: ",a),console.log("checkTags :: allTags: ",n);var o=a.filter((function(e){return-1===n.indexOf(e)})).map((function(e){return"{"+e+"}"})).sort();e.invalidTags={};for(var i=0;i<o.length;i++){var s=o[i];-1===Object.keys(e.invalidTags).indexOf(s)?e.invalidTags[s]=1:e.invalidTags[s]++}console.log("checkTags :: invalidTags: ",e.invalidTags)},onCommandHandler:function(e){var t=this;switch(e.command){case"checkTags":t.checkTags();break;case"changeEditorFullscreenState":t.isFullScreenEditorMode=e.isFullScreen;break;case"insertTag":t.$refs.htmlEditor.insertTag(e.value);break;default:t.$emit("onCommand",e)}},gotoBeeFreeIo:function(){window.open("https://beefree.io/templates/","_blank")}}},VC=RC,MC=Object(g["a"])(VC,xC,TC,!1,null,null,null),LC=MC.exports,UC={mixins:[wC],components:{templateEditor:LC},props:{voucher:{type:Object,default:null}},methods:{updateContent:function(e){var t=this;this.$emit("onCommand",{command:"updateTemplate",templateIndex:t.selectedIndex,content:e})},onCommandHandler:function(e){var t=this;switch(e.command){case"copyTemplate":console.log("TicketsPage :: onCommandHandler :: payload: ",e),t.$emit("onCommand",{command:"copyTemplate",copyTemplateFor:"voucher_template"});break;case"updateTemplateContent":t.$emit("onCommand",{command:"updateField",fieldName:"template",fieldValue:e.fieldValue});break;case"clearTemplate":t.$emit("onCommand",{command:"updateField",fieldName:"template",fieldValue:"",callback:e.callback});break;case"changeEditorFullscreenState":t.isFullScreenEditorMode=e.isFullScreen;break;default:t.$emit("onCommand",e)}}}},qC=UC,BC=Object(g["a"])(qC,CC,_C,!1,null,null,null),GC=BC.exports,KC=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row pt-2"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"form-group mb-3"},[a("label",[e._v("Redemption Method")]),a("div",{staticClass:"form-control p-0 border-0"},[a("data-radio-toggle",{attrs:{options:e.redemptionOptions,btnClass:"min-width-80"},model:{value:e.record.redemption_method,callback:function(t){e.$set(e.record,"redemption_method",t)},expression:"record.redemption_method"}})],1)])])]),["qrcode","qrcode_password"].indexOf(e.record.redemption_method)>=0?a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 position-relative d-flex flex-row justify-content-between align-items-end"},[a("label",[e._v("Locations")]),a("div",{staticClass:"position-absolute",staticStyle:{right:"0"}},[a("button",{staticClass:"btn btn-outline-primary min-width mr-1",on:{click:e.refresh}},[a("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"sync"}}),e._v(" Refresh ")],1),a("button",{staticClass:"btn btn-info min-width mr-1",on:{click:e.useDefault}},[a("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"check-circle"}}),e._v(" Use Default ")],1),a("button",{staticClass:"btn btn-warning min-width mr-1",on:{click:e.exportLocationSummary}},[a("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"download"}}),e._v(" Download ")],1),a("button",{staticClass:"btn btn-primary min-width mr-1",on:{click:e.newRecord}},[a("font-awesome-icon",{attrs:{icon:"plus"}})],1)])]),a("div",{staticClass:"col-sm-12"},[a("redemption-location-table",{ref:"redemptionLocationTable",attrs:{pusherChannel:e.pusherChannel,redemptionMethod:e.record.redemption_method,record:e.record},on:{onCommand:e.onCommandHandler}})],1)]):e._e(),"password"===e.record.redemption_method?a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4 col-md-3 col-lg-2"},[a("label",[e._v("Password")]),a("div",{staticClass:"input-group"},["checkbox"===(e.showRedemptionCode?"text":"password")?a("input",{directives:[{name:"model",rawName:"v-model",value:e.record.redemption_code,expression:"record.redemption_code"}],staticClass:"form-control ",attrs:{id:"redemptionCode",name:"redemptionCode",autocomplete:"new-password",type:"checkbox"},domProps:{checked:Array.isArray(e.record.redemption_code)?e._i(e.record.redemption_code,null)>-1:e.record.redemption_code},on:{change:function(t){var a=e.record.redemption_code,n=t.target,o=!!n.checked;if(Array.isArray(a)){var i=null,s=e._i(a,i);n.checked?s<0&&e.$set(e.record,"redemption_code",a.concat([i])):s>-1&&e.$set(e.record,"redemption_code",a.slice(0,s).concat(a.slice(s+1)))}else e.$set(e.record,"redemption_code",o)}}}):"radio"===(e.showRedemptionCode?"text":"password")?a("input",{directives:[{name:"model",rawName:"v-model",value:e.record.redemption_code,expression:"record.redemption_code"}],staticClass:"form-control ",attrs:{id:"redemptionCode",name:"redemptionCode",autocomplete:"new-password",type:"radio"},domProps:{checked:e._q(e.record.redemption_code,null)},on:{change:function(t){return e.$set(e.record,"redemption_code",null)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.record.redemption_code,expression:"record.redemption_code"}],staticClass:"form-control ",attrs:{id:"redemptionCode",name:"redemptionCode",autocomplete:"new-password",type:e.showRedemptionCode?"text":"password"},domProps:{value:e.record.redemption_code},on:{input:function(t){t.target.composing||e.$set(e.record,"redemption_code",t.target.value)}}}),a("button",{staticClass:"input-group-append"},[a("font-awesome-icon",{staticClass:"position-absolute",attrs:{icon:e.showRedemptionCode?"eye":"eye-slash"},on:{click:function(t){e.showRedemptionCode=!e.showRedemptionCode}}})],1)])])]):e._e()])},zC=[],JC=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"py-2 px-0 redemption-location-table"},[e.loading?e._e():a("div",{staticClass:"freezable-table freeze-last-column freeze-left-three-columns",attrs:{id:"code-table"}},[a("datatable",e._b({attrs:{columns:e.columns}},"datatable",e.$data,!1))],1),a("vue-loading",{attrs:{active:e.uploading,"can-cancel":!0},on:{"update:active":function(t){e.uploading=t}}}),e.loading?a("div",{staticClass:"text-center loading-mask d-flex flex-column justify-content-center align-items-center"},[a("h3",{staticClass:"d-inline-block"},[a("font-awesome-icon",{staticClass:"fa-spin fa-3x",attrs:{icon:"spinner"}})],1)]):e._e(),a("redemption-location-dialog",{ref:"redemptionLocationDialog",attrs:{params:e.redemptionLocationDialogParams},on:{onCommand:e.onCommandHandler},model:{value:e.showingRedemptionLocationDialog,callback:function(t){e.showingRedemptionLocationDialog=t},expression:"showingRedemptionLocationDialog"}})],1)},QC=[],WC=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-dialog",{attrs:{id:"redemptionLocationDialog",title:e.dialogTitle,size:"md",modalType:"confirmation",okButtonState:!0,value:e.value},on:{onCommand:e.onCommandHandler,input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"dialogBody",fn:function(){return[a("validation-observer",{ref:"observer",attrs:{tag:"form",autocomplete:"off"},scopedSlots:e._u([{key:"default",fn:function(t){t.invalid,t.passes,t.reset;return[a("div",{staticClass:"container-fluid"},[e.redemptionLocation?a("div",{staticClass:"row"},[a("v-data-input",{attrs:{id:"name",rules:"required",width:"12",label:"Name"},model:{value:e.redemptionLocation.name,callback:function(t){e.$set(e.redemptionLocation,"name",t)},expression:"redemptionLocation.name"}}),a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"row"},[a("v-data-input",{attrs:{id:"qrcode",label:"QR Code",rules:"required",width:"12"},model:{value:e.redemptionLocation.qrcode,callback:function(t){e.$set(e.redemptionLocation,"qrcode",t)},expression:"redemptionLocation.qrcode"}}),a("v-data-input",{attrs:{id:"locationCode",label:"Location Code",rules:"required",width:"12"},model:{value:e.redemptionLocation.location_code,callback:function(t){e.$set(e.redemptionLocation,"location_code",t)},expression:"redemptionLocation.location_code"}}),a("v-data-input-password",{attrs:{id:"password",label:"Password",rules:"required",width:"12"},model:{value:e.redemptionLocation.password,callback:function(t){e.$set(e.redemptionLocation,"password",t)},expression:"redemptionLocation.password"}})],1)]),a("div",{staticClass:"col-sm-6 mt-3 text-center"},[a("qrcode-vue",{attrs:{value:e.qrcodeLink,size:120,level:"M"}})],1)],1):a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 text-center"},[a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}})],1)])])]}}])})]},proxy:!0}])})},YC=[],XC={data:function(){return{showingPassword:!1,redemptionLocation:null}},components:Object(s["a"])(Object(s["a"])({baseDialog:Ou},fC),{},{qrcodeVue:Up["a"]}),props:{value:{type:Boolean,default:!1},params:{type:Object,default:null}},model:{prop:"value",event:"input"},computed:{qrcodeLink:function(){var e=this;return e.$store.getters.appHost+"/redeem/"+btoa(e.redemptionLocation.qrcode)},dialogTitle:function(){var e=this,t=[];return e.redemptionLocation&&(t.push(e.redemptionLocation.name),0===e.redemptionLocation.id&&t.push("[NEW]")),0===t.length?"":t.join(" ")}},watch:{params:{handler:function(e){var t=this,a=this;a.redemptionLocation=JSON.parse(JSON.stringify(e.redemptionLocation)),requestAnimationFrame((function(){t.$refs.observer.reset()}))},deep:!0}},mounted:function(){var e=this,t=this;console.log("RedemptionLocationDialog :: mounted :: vm.params: ",t.params),t.params&&t.params.redemptionLocation&&(console.log("RedemptionLocationDialog :: mounted :: vm.params.redemptionLocation: ",t.params.redemptionLocation),t.redemptionLocation=JSON.parse(JSON.stringify(t.params.redemptionLocation)),requestAnimationFrame((function(){e.$refs.observer.reset()})))},methods:{onCommandHandler:function(e){var t=this;switch(e.command){case"ok":t.$refs.observer.validate().then((function(e){e?(t.$emit("onCommand",{command:"redemptionLocationDialogConfirm",redemptionLocation:t.redemptionLocation}),t.closeDialog()):t.$dialog.alert("Some field(s) is missing!")}));break}},closeDialog:function(){var e=this;e.$emit("input",!1),e.$bvModal.hide("redemptionLocationDialog")}}},ZC=XC,e_=Object(g["a"])(ZC,WC,YC,!1,null,null,null),t_=e_.exports,a_={mixins:[Ff],components:Object(s["a"])(Object(s["a"])(Object(s["a"])({redemptionLocationDialog:t_},Mc),sf),{},{dataRadioToggle:Pu}),data:function(){return{showingRedemptionLocationDialog:!1,redemptionLocationDialogParams:null,channel:null,appLoading:!1,uploading:!1,loading:!1,columns:[],COLUMNS_NO_PASSWORD:[{title:"general.number",thComp:"ThCommonHeader",tdComp:"TdCommonIndex",field:"id"},{title:"general.name",thComp:"ThCommonHeader",tdComp:"TdCommon",field:"name"},{title:"general.location_code",thComp:"ThCommonHeader",tdComp:"TdCommon",field:"location_code"},{title:"general.qrcode",thComp:"ThCommonHeader",thClass:"text-center",tdComp:"TdQrcode",field:"qrcode"},{title:"general.redemption_count",thComp:"ThCommonHeader",thClass:"text-center",tdComp:"TdCommon",tdClass:"text-center",field:"redemption_count"},{title:"general.action",thComp:"ThCommonHeader",tdComp:"TdCommonOpt",field:"id"}],COLUMNS_WITH_PASSWORD:[{title:"general.number",thComp:"ThCommonHeader",tdComp:"TdCommonIndex",field:"id"},{title:"general.name",thComp:"ThCommonHeader",tdComp:"TdCommon",field:"name"},{title:"general.location_code",thComp:"ThCommonHeader",tdComp:"TdCommon",field:"location_code"},{title:"general.qrcode",thComp:"ThCommonHeader",thClass:"text-center",tdComp:"TdQrcode",field:"qrcode"},{title:"general.password",thComp:"ThCommonHeader",thClass:"text-center",tdComp:"TdPassword",tdClass:"text-center",field:"password"},{title:"general.redemption_count",thComp:"ThCommonHeader",thClass:"text-center",tdComp:"TdCommon",tdClass:"text-center",field:"redemption_count"},{title:"general.action",thComp:"ThCommonHeader",tdComp:"TdCommonOpt",field:"id"}],allData:[],data:[],total:0,query:{filter:"",limit:10,offset:0,sort:"",order:"",page:0},xprops:{buttons:["edit","delete"],eventbus:new r["default"],actionButtonSize:"xs",statuses:[]},HeaderSettings:!1,selectedRow:null,searchValue:"",searchInputTimer:3e3,filterFields:"*"}},computed:{pusher:function(){return this.$store.getters.pusher},voucherId:function(){var e=this,t=0;return e.record&&(t=e.record.id),t},codeFieldsStr:function(){var e=this;return e.record.code_fields},codeFieldNamesStr:function(){var e=this,t="",a=[];if(e.codeFieldsStr&&""!==e.codeFieldsStr){a=e.codeFieldsStr.split("|");for(var n=[],o=0;o<a.length;o++){var i=a[o].split(":"),s=0===o?"code":"code-other";n.push(i[0]+":"+s)}t=n.join("|")}return t},participantFieldNamesStr:function(){var e=this,t=[];if(e.record.participant_configs&&e.record.participant_configs["inputObjs"])for(var a=e.record.participant_configs["inputObjs"],n=0;n<a.length;n++)t.push(a[n].name);return t.join("|")}},props:{record:{type:Object,default:null},redemptionMethod:{type:String,default:"qrcode"}},watch:{redemptionMethod:function(e){var t=this;t.setColumns(e)},pusher:function(e){var t=this;e&&t.initPusherChannel()},files:{handler:function(){var e=this;0===e.voucherId&&(alert("voucherId === 0"),e.$emit("onCommand",{command:"save",callback:function(t){e.voucherId=t.id}}))},deep:!0},codeFieldsStr:function(e){},voucherId:{handler:function(e){var t=this;0!==t.voucherId&&t.onQueryChangedHandler(e)}},query:{handler:function(e){var t=this;0!==t.voucherId&&t.onQueryChangedHandler(e)},deep:!0},searchValue:function(){var e=this;e.filterFields&&null!==e.filterFields?(0!==e.searchInputTimer&&clearTimeout(e.searchInputTimer),e.searchInputTimer=setTimeout(e.setSearchValue,2e3)):e.alert("No filter fields defined!")}},mounted:function(){var e=this;e.initPusherChannel(),e.setColumns(e.redemptionMethod),e.query.page=1,e.xprops.record=e.record},created:function(){var e=this;e.xprops.eventbus.$on("onRowCommand",e.onRowCommandHandler)},beforeDestroy:function(){var e=this;e.xprops.eventbus.$off("onRowCommand"),e.unbindEvents()},destroyed:function(){var e=this;e.xprops.eventbus.$off("onRowCommand")},methods:{setColumns:function(e){var t=this;switch(e){case"qrcode":t.columns=t.COLUMNS_NO_PASSWORD;break;case"qrcode_password":t.columns=t.COLUMNS_WITH_PASSWORD;break}},newRecord:function(){var e=this;e.redemptionLocationDialogParams={redemptionLocation:{id:0,name:"",location_code:"",qrcode:"",password:""}},e.$bvModal.show("redemptionLocationDialog")},delete:function(e){var t=this,a={urlCommand:"/vouchers/"+record.id+"/redemption_locations"+e};t.$store.dispatch("AUTH_DELETE",a).then((function(e){t.reloadAll()}))},update:function(e){var t=this,a={urlCommand:"/vouchers/"+t.record.id+"/redemption_locations/"+e.id,data:e};t.$store.dispatch("AUTH_PUT",a).then((function(e){t.reloadAll()}))},updateOneCodeMode:function(e,t){var a=this;switch(e){case"has_one_code":var n=1===t;n?a.record.code_count>1?a.$dialog.confirm("Only first code will remain. Are you sure?",{customClass:"confirm-keep-one-code"}).then((function(){console.log("confirm removal of others except first one"),a.$emit("onCommand",{command:"keepOnlyOneCode",callback:function(){a.$emit("onCommand",{command:"updateField",fieldName:e,fieldValue:t}),console.log("AgentCodeTable :: updateOneCodeMode => refresh"),a.$emit("onCommand",{command:"updateField",fieldName:"code_count",fieldValue:1}),console.log("AgentCodeTable :: updateOneCodeMode :: callback"),a.refresh()}})})):(a.$emit("onCommand",{command:"keepOnlyOneCode",callback:function(){a.$emit("onCommand",{command:"updateField",fieldName:e,fieldValue:t}),a.$emit("onCommand",{command:"updateField",fieldName:"code_count",fieldValue:1}),a.refresh()}}),a.refresh()):a.$emit("onCommand",{command:"useMultipleCodes",callback:function(){a.$emit("onCommand",{command:"updateField",fieldName:e,fieldValue:t}),a.refresh()}});break}},listen:function(){var e=this,t="voucher"+e.record.id+".channel";window.Echo.channel(t).listen(".App.Events.VoucherCodeViewsUpdated",(function(e){console.log("*** event: VoucherCodeViewsUpdated: data: ",e)}))},download:function(){var e=this;e.showingCodeExportDialog=!0},onVoucherCodeRedeemed:function(e){var t=this;console.log("onVoucherCodeRedeemed: data: ",e);for(var a=e.voucherCode,n=0;n<t.data.length;n++)if(t.data[n].id===a.id){t.data[n].redeemed_on=a.redeemed_on;break}t.$emit("onCommand",{command:"updateField",fieldName:"total_redeemed",fieldValue:e.totalRedeemed})},onVoucherCodeViewsUpdated:function(e){for(var t=this,a=e.voucherCode,n=0;n<t.data.length;n++)if(t.data[n].id===a.id){t.data[n].views=a.views;break}t.$emit("onCommand",{command:"updateField",fieldName:"total_views",fieldValue:e.totalViews})},updateStatus:function(e){for(var t=this,a=e.statusInfo,n=0;n<t.data.length;n++)if(t.data[n].id===a.code_id){t.updateStatusByIndex(n,a);break}},onVoucherCodeStatusUpdated:function(e){for(var t=this,a=e.voucherCode,n=0;n<t.data.length;n++)if(t.data[n].id===a.id){switch(t.data[n].status=a.status,a.status){case"processing":t.data[n].error_message="",t.data[n].sent_on="";break;case"completed":case"fails":t.data[n].error_message=a.error_message,t.data[n].sent_on=a.sent_on}break}},initPusherChannel:function(){var e=this;e.pusher&&e.record&&(e.unbindEvents(),e.pusherChannel=e.pusher.subscribe("voucher"+e.record.id+".channel"),e.pusherChannel.bind("VoucherCodeViewsUpdated",(function(t){e.onVoucherCodeViewsUpdated(t)})),e.pusherChannel.bind("VoucherCodeRedeemed",(function(t){e.onVoucherCodeRedeemed(t)})))},unbindEvents:function(){var e=this;e.pusherChannel&&(e.pusherChannel.unbind("VoucherCodeViewsUpdated"),e.pusherChannel.unbind("VoucherCodeRedeemed"))},onCommandHandler:function(e){var t=this,a=e.command;switch(a){case"search":t.searchValue=e.searchValue;break;case"confirmCodeImport":t.onParsingCodes(e);break;case"deleteAllCodes":t.doDeleteAll(),"function"===typeof e.callback&&e.callback();break;case"exportCodesOnly":t.$emit("onCommand",{command:a}),t.$refs.codeExportDialog.close();break;case"exportCodesWithParticipants":t.$emit("onCommand",{command:a}),t.$refs.codeExportDialog.close();break;case"deleteAllCodesAndParticipants":t.doDeleteAll(),t.doDeleteAllParticipants(),"function"===typeof e.callback&&e.callback();break;case"redemptionLocationDialogConfirm":console.log("onCommandHandler :: redemptionLocationDialogConfirm"),t.update(e.redemptionLocation);break}},saveCodeInfo:function(e){var t=this,a=t.row2CodeInfo(e),n={urlCommand:"/vouchers/"+t.voucherId+"/codes/"+e.id,data:a};t.$store.dispatch("AUTH_PUT",n).then((function(){t.$toaster.success(t.$t("messages.saved_successfully"))})).catch((function(){t.$toaster.danger(t.$t("messages.saved_failed"))}))},exportExcel:function(){var e=this;e.$emit("onCommand",{command:"exportCodesWithParticipants"})},deleteAll:function(){var e=this;e.record.participant_count>0?e.$bvModal.show("deleteAllCodesDialog"):e.$dialog.confirm(e.$t("messages.areYouSure")).then((function(){e.doDeleteAll(),e.$emit("onCommand",{command:"setRecordField",fieldName:"code_count",fieldValue:0})}))},doDeleteAllParticipants:function(){var e=this,t={urlCommand:"/vouchers/"+e.voucherId+"/participants"};e.$store.dispatch("AUTH_DELETE",t).then((function(){e.$toaster.success(e.$t("messages.all_participants_are_removed")),e.onQueryChangedHandler(e.query),e.$emit("onCommand",{command:"setRecordField",fieldName:"participant_count",fieldValue:0})}))},doDeleteAll:function(){var e=this,t={urlCommand:"/vouchers/"+e.voucherId+"/codes"};e.$store.dispatch("AUTH_DELETE",t).then((function(){e.$toaster.success(e.$t("messages.all_codes_are_removed")),e.$emit("onCommand",{command:"setQrCodeAndBarcodeComposition",data:""}),e.$emit("onCommand",{command:"setCodeFields",value:""}),e.$emit("onCommand",{command:"setRecordField",fieldName:"code_count",fieldValue:0}),e.reloadAll()}))},setSearchValue:function(e){var t=this;"undefined"===typeof e?e=t.searchValue:t.searchValue=e,t.query.filter=e?t.filterFields+":"+e:"",t.searchInputTimer=0},clearSearch:function(){var e=this;e.query.filter=e.filterFields+":",e.onQueryChangedHandler(e.query)},getFilterValue:function(e){for(var t=e.split(";"),a="",n=0;n<t.length;n++){var o=t[n].split(":");if("*"===o[0]){a=o[1];break}}return a},onQueryChangedHandler:function(e){var t=this;t.reloadRedemptionLocations(e)},refresh:function(){var e=this;e.reloadRedemptionLocations()},reloadAll:function(){var e=this;e.reloadRedemptionLocations()},reloadRedemptionLocations:function(e){var t=this;if(t.loading=!0,"undefined"===typeof e&&(e=t.query),0!==t.voucherId){var a={urlCommand:"/vouchers/"+t.voucherId+"/redemption_locations",query:e};t.$store.dispatch("AUTH_GET",a).then((function(e){t.total=e.total,t.data=e.data,t.loading=!1}))}else alert("vm.voucherId = 0")},row2CodeInfo:function(e){for(var t=this,a=t.getCodeFieldsFromStr(t.codeFieldsStr),n=a.length,o=e["field0"],i=[],s=1;s<n;s++){var r="field"+s;i.push(e[r])}return{id:e.id,order:e.order,code:o,extra_fields:i.join("|"),key:e.key,remark:e.remark,sent_on:e.sent_on,status:e.status}},onRowCommandHandler:function(e){var t=this;switch(console.log("RedemptionLocationTable :: onRowCommandHandler :: payload: ",e),e.command){case"edit":console.log("onRowCommandHandler :: payload.command = edit"),t.redemptionLocationDialogParams={redemptionLocation:JSON.parse(JSON.stringify(e.row))},t.$bvModal.show("redemptionLocationDialog");break;case"delete":t.$dialog.confirm(t.$t("messages.areYouSure")).then((function(){t.delete(t.data[e.index].id)}));break}}}},n_=a_,o_=(a("8842"),Object(g["a"])(n_,JC,QC,!1,null,null,null)),i_=o_.exports,s_={components:Object(s["a"])(Object(s["a"])({DataRadioToggle:Pu,copyToken:Lm,copyLink:sm,vueRangeSlider:Yb.a},fC),{},{redemptionLocationTable:i_}),props:{record:{type:Object,default:null},pusherChannel:{type:Object,default:null}},computed:{agents:function(){return this.$store.getters.agents}},data:function(){return{showRedemptionCode:!1,redemptionOptions:[{name:"None",value:"none"},{name:"Password",value:"password"},{name:"QR Code",value:"qrcode"}]}},methods:{newRecord:function(){var e=this;console.log("RedemptionPage :: newRecord :: vm.$refs.redemptionLocationTable : ",e.$refs.redemptionLocationTable),e.$refs.redemptionLocationTable.newRecord()},refresh:function(){var e=this;e.$refs.redemptionLocationTable.reloadAll()},useDefault:function(){},exportLocationSummary:function(){},validate:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.abrupt("return",a.$refs.infoPageObserver.validate());case 2:case"end":return t.stop()}}),t)})))()},onCommandHandler:function(e){}}},r_=s_,l_=Object(g["a"])(r_,KC,zC,!1,null,null,null),c_=l_.exports,d_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("sharing-context-box",{staticClass:"col-sm-6",attrs:{title:"Voucher Sharing Link",record:e.record,sharingType:"coupons",sharingTitleField:"sharing_title",sharingDescriptionField:"sharing_description",sharingImageIdField:"sharing_image_id"},on:{onCommand:e.onCommandHandler}}),a("sharing-context-box",{staticClass:"col-sm-6",attrs:{title:"Form Sharing Link",record:e.record,sharingType:"forms",sharingTitleField:"form_sharing_title",sharingDescriptionField:"form_sharing_description",sharingImageIdField:"form_sharing_image_id"},on:{onCommand:e.onCommandHandler}}),e._m(0)],1)},u_=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-12 mt-4 px-5 d-flex flex-column"},[a("h6",[e._v("Reference")]),a("ul",[a("li",[a("a",{staticClass:"useful-link",attrs:{href:"https://developers.facebook.com/tools/debug",target:"_blank"}},[e._v("Facebook Sharing Debugger (Link Validator)")])])])])}],m_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sharing-context-box"},[e.title?a("div",{staticClass:"pt-2 px-2"},[a("div",{staticClass:"mx-1"},[a("h4",{staticClass:"bg-dark mx-2 my-0 px-2 py-1"},[e._v(e._s(e.title))])])]):e._e(),a("div",{staticClass:"p-2 d-flex flex-row justify-content-start"},[a("div",{staticClass:"mx-1 d-inline-block"},[a("div",{staticClass:"image-wrapper m-2"},[a("div",{staticClass:"image-bkgd"},[a("img",{attrs:{src:e.sharingImageSrc}})])]),a("div",{staticClass:"btn-toolbar mt-1 justify-content-center"},[a("file-upload",{ref:e.sharingImageIdField,staticClass:"btn btn-primary",attrs:{extensions:"jpg,jpeg,gif,png",accept:"image/png,image/gif,image/jpeg,image/webp","input-id":e.sharingImageIdField,name:"file","post-action":e.sharingImagePostAction,drop:!e.editingUploadFile,data:{id:e.record.id},headers:e.authHeaders},on:{"input-filter":e.inputFilter,"input-file":e.inputImageFile},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}},[a("font-awesome-icon",{attrs:{icon:"upload"}}),e._v(" Upload ")],1),a("button",{staticClass:"btn btn-danger m-x-1",attrs:{type:"button"},on:{click:e.removeSharingImage}},[a("i",{staticClass:"fas fa-times"}),e._v(" Remove ")])],1),e._m(0)]),a("div",{staticClass:"mx-2 flex-grow-1"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"form-group mb-1"},[e._m(1),a("label",{attrs:{for:"sharingTitle"}},[e._v(e._s(e.$t("general.title"))+" "),a("div",{staticClass:"badge badge-primary"},[e._v(e._s(e.sharingTitleCharCount))])]),a("input",{staticClass:"form-control",attrs:{name:"sharingTitle",type:"text"},domProps:{value:e.record[e.sharingTitleField]},on:{input:function(t){return e.updateField(e.sharingTitleField,t.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"form-group mb-1"},[e._m(2),a("label",{attrs:{for:"sharingDescription"}},[e._v(e._s(e.$t("general.description"))+" "),a("div",{staticClass:"badge badge-primary"},[e._v(e._s(e.sharingDescriptionCharCount))])]),a("textarea",{staticClass:"form-control",attrs:{rows:"6",name:"sharingDescription",type:"text"},domProps:{value:e.record[e.sharingDescriptionField]},on:{input:function(t){return e.updateField(e.sharingDescriptionField,t.target.value)}}})])])]),e.record?a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"d-flex flex-row justify-content-start align-items-center",on:{click:function(t){return e.copySharingLink()}}},[a("div",{staticClass:"pr-2"},[e._v(" Link for testing ")]),a("div",{staticClass:"badge badge-info test-link-url"},[e._v(" Copy Test Link "),a("font-awesome-icon",{staticClass:"ml-1",attrs:{icon:"copy"}})],1)])])]):e._e()])])])},p_=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mx-2"},[a("small",[e._v("* Safe resolution: 256x256")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"float-right"},[a("small",[e._v("* max. 35 chars for safety.")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"float-right"},[a("small",[e._v("* max. 65 chars for safety.")])])}],f_={components:{fileUpload:gu.a},data:function(){return{editingUploadFile:!1,files:[],testLink:""}},props:{imageKey:{type:String,default:"imageFile"},title:{type:String,default:""},record:{type:Object,default:null},sharingTitleField:{type:String,default:""},sharingDescriptionField:{type:String,default:""},sharingImageIdField:{type:String,default:""},sharingType:{type:String,default:"coupons"}},computed:{sharingImagePostAction:function(){var e=this;return e.$store.getters.apiUrl+"/media/upload"},authHeaders:function(){var e=this;return{Authorization:"bearer "+e.$store.getters.accessToken}},sharingImageSrc:function(){var e=this,t="";return e.record&&(t=e.$store.getters.appHost+"/media/image/"+e.record[e.sharingImageIdField]),t},sharingTitleCharCount:function(){var e=this,t=0;return e.record&&(t=e.record[e.sharingTitleField].length),t},sharingDescriptionCharCount:function(){var e=this,t=0;return e.record&&(t=e.record[e.sharingDescriptionField].length),t}},mounted:function(){var e=this;e.createTestLink()},methods:{createTestLink:function(){var e=this;e.testLink=e.$store.getters.appHost+"/"+e.sharingType+"/"+e.record.id+"/"+(new Date).getTime()},copySharingLink:function(){var e=this;e.$emit("onCommand",{command:"save",callback:function(){e.createTestLink(),e.$copyText(e.testLink),e.$toaster.info(e.$t("messages.link_copied_to_clipboard"))}})},updateField:function(e,t){var a=this;a.$emit("onCommand",{command:"updateField",fieldName:e,fieldValue:t})},removeSharingImage:function(){var e=this,t={urlCommand:"/medias/"+e.record[e.sharingImageIdField],data:{type:"temp"}};e.$store.dispatch("AUTH_PUT",t).then((function(){e.$toaster.success(e.$t("messages.deleteSuccessfully")),e.$emit("onCommand",{command:"setRecordField",fieldName:e.sharingImageIdField,fieldValue:0})}))},inputFilter:function(e,t,a){var n=this;if(e&&!t&&!/\.(jpg|jpeg|png|gif)$/i.test(e.name))return n.$toaster.warning("Invalid Image File Format!"),a()},inputImageFile:function(e,t){var a=this;console.log("SharingContextBox :: inputImageFile :: vm.sharingImageIdField = "+a.sharingImageIdField),console.log("inputImageFile"),e&&!t&&this.$nextTick((function(){this.editingUploadFile=!0,this.uploading=!0,this.$refs[a.sharingImageIdField].active=!0})),!e&&t&&(this.edit=!1),e&&e.success&&a.onUploaded(e.response.result)},onUploaded:function(e){var t=this;console.log("onUploaded :: result: ",e),t.$emit("onCommand",{command:"cropImage",imageType:t.sharingType,imageId:e.imageId,imageIdField:t.sharingImageIdField})}}},g_=f_,v_=(a("bd89"),Object(g["a"])(g_,m_,p_,!1,null,null,null)),h_=v_.exports,b_={components:{sharingContextBox:h_},props:{record:{type:Object,default:null}},methods:{onCommandHandler:function(e){var t=this;t.$emit("onCommand",e)}}},C_=b_,__=(a("e462"),Object(g["a"])(C_,d_,u_,!1,null,null,null)),y_=__.exports,w_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"mb-1 d-flex flex-row align-items-center"},[a("table",[a("tr",[a("td",{staticClass:"pr-2"},[e._v("Target Type")]),a("td",[a("data-radio-toggle",{staticClass:"mb-2",attrs:{value:e.record.goal_type,options:e.goalOptions},on:{input:e.updateGoalType}})],1)]),"fixed"===e.record.goal_type?a("tr",[a("td",{staticClass:"pr-2"},[e._v("Target Count")]),a("td",[a("input",{staticClass:"form-control w-50",attrs:{type:"number"},domProps:{value:e.record.goal_count},on:{input:function(t){return e.updateGoalCount(t.target.value)}}})])]):e._e(),"codes"===e.record.goal_type?a("tr",[a("td",{staticClass:"pr-2"},[e._v("Target Count")]),a("td",[a("div",{staticClass:"form-control w-50",attrs:{type:"number",readonly:""}},[e._v(" "+e._s(e.record.code_count)+" ")])])]):e._e()])])]),a("div",{staticClass:"mb-3 col-sm-12 form-filling-workflow"},[a("h5",{staticClass:"mb-1"},[e._v("Workflow (before Target)")]),a("workflow-radio-button",{attrs:{tag:"actionTypeBeforeGoal",selectedActionType:e.record.action_type_before_goal,selectedCustomFormKey:e.record.custom_form_key_before_goal,customForms:e.record.custom_forms,options:["form_voucher","form_custom","custom"]},on:{onCommand:e.onCommandHandler}}),a("h5",{staticClass:"mb-1"},[e._v("Workflow (after Target)")]),a("workflow-radio-button",{attrs:{tag:"actionTypeAfterGoal",selectedActionType:e.record.action_type_after_goal,selectedCustomFormKey:e.record.custom_form_key_after_goal,customForms:e.record.custom_forms,options:["form_custom","custom","none"]},on:{onCommand:e.onCommandHandler}})],1)])},x_=[],T_={components:{dataRadioToggle:Pu,testComp:Xf,workflowRadioButton:_g},data:function(){return{entrancePageKey:"questionnaire",quotaType:"fixed",quotaCount:0,entrancePageKeyAfterQuota:"questionnaire",optionsAfterGoal:[{name:"Continue Filling Form",value:"questionnaire"},{name:"Goto Page",value:"custom"},{name:"None",value:"none"}]}},props:{title:{type:String,default:""},record:{type:Object,default:null}},computed:{goalOptions:function(){var e=[];return e.push({name:"Fixed",value:"fixed"}),e.push({name:"No. of Coupon Codes",value:"codes"}),e.push({name:"Unlimited",value:"none"}),e},customFormOptions:function(){for(var e=this,t=[],a=0;a<e.record.custom_forms.length;a++){var n=e.record.custom_forms[a];t.push({name:n.name,value:n.id})}return t},customLink:function(){var e=this;return e.$store.getters.apiUrl+"/q/"+e.record.questionnaire_key},customLinkName:function(){var e=this,t="none";if(0!==e.record.custom_form_id)for(var a=0;a<e.record.custom_forms.length;a++)if(e.record.custom_forms[a].id===e.record.custom_form_id){t=e.record.custom_forms[a].name;break}return t}},methods:{updateField:function(e,t){var a=this;a.$emit("onCommand",{command:"updateField",fieldName:e,fieldValue:t})},updateActionTypeAfterGoal:function(e){this.updateField("action_type_after_goal",e)},updateGoalCount:function(e){this.updateField("goal_count",e)},updateGoalType:function(e){this.updateField("goal_type",e)},onCommandHandler:function(e){var t=this;t.$emit("onCommand",e)},copyCustomLink:function(){var e=this;e.$copyText(e.questionnaireLink),e.$toaster.info(e.$t("messages.link_copied_to_clipboard"))}}},k_=T_,S_=(a("eb99"),Object(g["a"])(k_,w_,x_,!1,null,null,null)),O_=S_.exports,$_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("form-type-selection",{attrs:{options:e.formTypes,value:e.selectedFormType},on:{onCommand:e.onCommandHandler,input:function(t){return e.selectFormType(t)}}}),e.selectedFormType?a("form-builder-panel-content",{ref:"formBuilderPanelContent",attrs:{formType:e.selectedFormType,voucher:e.record,participantCount:e.record.participant_count},on:{onCommand:e.onCommandHandler}}):e._e()],1)])},j_=[],I_={components:{formBuilderPanelContent:qh,formTypeSelection:Qh},props:{record:{type:Object,default:function(){return null}}},data:function(){return{selectedFormType:null}},watch:{formTypes:{handler:function(e){var t=this;if(t.selectedFormType){for(var a=t.selectedFormType.key,n=0;n<t.formTypes.length;n++)if(t.formTypes[n].key===a){t.selectedFormType=t.formTypes[n],t.$refs.formBuilderPanelContent.updateSelectedInputObj(t.selectedFormType);break}}else t.selectedFormType=t.formTypes[0],t.$refs.formBuilderPanelContent.updateSelectedInputObj(t.selectedFormType)},deep:!0}},methods:{selectFormType:function(e){var t=this;"ADD"===e.key?t.$emit("onCommand",{command:"newFormType"}):t.selectedFormType=e},onCommandHandler:function(e){var t=this;console.log("CustomFormsPage :: onCommandHandler :: payload: ",e);var a=e.command;switch(a){case"renameFormType":case"removeFormType":t.$emit("onCommand",e);break;default:e=Object(s["a"])(Object(s["a"])({},e),{},{key:t.selectedFormType.key}),t.$emit("onCommand",e)}}},computed:{formTypes:function(){for(var e=this,t=[{name:"Question",key:"question",formConfigs:e.record.form_configs}],a=0;a<e.record.custom_forms.length;a++){var n=e.record.custom_forms[a];t.push({name:n.name,key:n.form_key,formConfigs:n.form_configs})}return t}},mounted:function(){var e=this;e.selectedFormType=e.formTypes[0]}},E_=I_,F_=Object(g["a"])(E_,$_,j_,!1,null,null,null),P_=F_.exports,A_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("form-participants-table",{ref:"formParticipantsTable",attrs:{record:e.record,voucherId:e.record.id,inputObjs:e.inputObjs},on:{onCommand:e.onCommandHandler}})],1)])},D_=[],H_={components:{formParticipantsTable:ub},props:{record:{type:Object,default:null}},data:function(){return{inputObjs:[]}},mounted:function(){var e=this;e.setInputObjs()},methods:{updateStatus:function(e){var t=this;t.$refs.formParticipantsTable.updateStatus(e)},refresh:function(){var e=this;e.$refs.formParticipantsTable.refresh()},updateInputObjs:function(){var e=this;e.setInputObjs()},onCommandHandler:function(e){this.$emit("onCommand",e)},setInputObjs:function(){var e=this;if(e.record)switch(e.record.voucher_type){case"form":e.record.form_configs&&e.record.form_configs.inputObjs&&(e.inputObjs=e.record.form_configs.inputObjs);break;case"voucher":e.record.participant_configs&&e.record.participant_configs.inputObjs&&(e.inputObjs=e.record.participant_configs.inputObjs);break;default:alert("Invalid voucher_type: "+e.record.voucher_type)}}},watch:{"record.form_configs":function(){var e=this;"form"===e.record.voucher_type&&e.setInputObjs()},"record.participant_configs":function(){var e=this;"voucher"===e.record.voucher_type&&e.setInputObjs()}},computed:{participantCount:function(){var e=this,t=0;return e.record&&e.record.participant_count>0&&(t=e.record.participant_count),t},inputObjs2:function(){var e=this,t=[];if(e.record)switch(e.record.voucher_type){case"form":e.record.form_configs&&e.record.form_configs.inputObjs&&(t=e.record.form_configs.inputObjs);break;case"voucher":e.record.participant_configs&&e.record.participant_configs.inputObjs&&(t=e.record.participant_configs.inputObjs);break;default:console.log("inputObjs :: vm.voucher_type unknown")}return t}}},N_=H_,R_=Object(g["a"])(N_,A_,D_,!1,null,null,null),V_=R_.exports,M_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"authorization-page"},[a("div",{staticClass:"row pt-2"},[e._m(0),a("div",{staticClass:"col-sm-12 mb-2"},[a("div",{staticClass:"input-group",staticStyle:{"max-width":"320px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{placeholder:"Type in the email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),a("button",{staticClass:"input-group-append",class:{"btn-primary":""!==e.email,"btn-muted":""===e.email},attrs:{type:"button",disabled:""===e.email},on:{click:e.addUser}},[a("font-awesome-icon",{attrs:{icon:"plus"}})],1)])])]),a("hr"),a("div",{staticClass:"container-fluid"},e._l(e.authorizedUsers,(function(t){return a("authorized-user-item",{key:t.id,staticClass:"col-sm-6 col-lg-4",attrs:{selected:e.selectedUser=t,user:t},on:{onCommand:e.onCommandHandler}})})),1)])},L_=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"form-group mb-3"},[a("label",[e._v("Authorized Users")])])])}],U_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"py-1 px-2 w-100 d-flex flex-row justify-content-start align-items-center rounded",staticStyle:{"background-color":"lightskyblue","line-height":"1.4"}},[a("div",{staticClass:"mr-2 bg-white d-flex flex-column justify-content-center align-items-center p-1",staticStyle:{"border-radius":"24px",width:"48px",height:"48px"}},[a("font-awesome-icon",{staticClass:"fa-fw fa-2x",attrs:{icon:"user"}})],1),a("div",{staticClass:"d-flex flex-column flex-grow-1 align-items-start"},[e._v(" "+e._s(e.user.name)+" "),a("div",{staticClass:"badge badge-primary d-inline-block"},[e._v(" "+e._s(e.user.email)+" ")])]),a("button",{staticClass:"ml-2 btn-circle btn btn-danger",attrs:{type:"button"},on:{click:e.deleteUser}},[a("font-awesome-icon",{attrs:{icon:"times"}})],1)])},q_=[],B_={props:{user:{type:Object,default:null}},methods:{deleteUser:function(){var e=this;e.$dialog.confirm("Are you sure?").then((function(t){e.doDelete()})).catch((function(){}))},doDelete:function(){var e=this;console.log("doDelete"),this.$emit("onCommand",{command:"deleteUser",row:e.user})}}},G_=B_,K_=Object(g["a"])(G_,U_,q_,!1,null,null,null),z_=K_.exports,J_={components:{draggable:Wg.a,authorizedUserItem:z_},props:{record:{type:Object,default:null}},data:function(){return{email:"",authorizedUsers:[],isDragging:!1}},computed:{dragOptions:function(){return{animation:0,group:"description",disabled:!this.editable,ghostClass:"ghost"}}},mounted:function(){var e=this;e.refresh()},methods:{onMove:function(e){var t=e.relatedContext,a=e.draggedContext,n=t.element,o=a.element;return(!n||!n.fixed)&&!o.fixed},newRecord:function(){var e=this;console.log("RedemptionPage :: newRecord :: vm.$refs.redemptionLocationTable : ",e.$refs.redemptionLocationTable),e.$refs.redemptionLocationTable.newRecord()},refresh:function(){var e=this,t={urlCommand:"/vouchers/"+e.record.id+"/authorized_users"};e.$store.dispatch("AUTH_GET",t).then((function(t){e.authorizedUsers=t}))},useDefault:function(){},exportLocationSummary:function(){},validate:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.abrupt("return",a.$refs.infoPageObserver.validate());case 2:case"end":return t.stop()}}),t)})))()},onCommandHandler:function(e){var t=this;switch(console.log("onCommandHandler :: payload: ",e),e.command){case"deleteUser":t.deleteUser(e.row);break}},addUser:function(){var e=this,t={urlCommand:"/vouchers/"+e.record.id+"/authorized_users",data:{email:e.email}};e.$store.dispatch("AUTH_POST",t).then((function(t){e.refresh()}),(function(t){e.$dialog.alert(t.message)}))},deleteUser:function(e){var t=this;console.log("AuthorizationPage :: deleteUser"),console.log("AuthorizationPage :: deleteUser :: vm.record: ",t.record);var a={urlCommand:"/vouchers/"+t.record.id+"/authorized_users/"+e.id};t.$store.dispatch("AUTH_DELETE",a).then((function(e){t.refresh()}))}}},Q_=J_,W_=(a("9b2d"),Object(g["a"])(Q_,M_,L_,!1,null,null,null)),Y_=W_.exports,X_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex flex-row m-2"},[a("div",{staticClass:"d-flex flex-column"},e._l(e.sections,(function(t){return a("div",{key:t.key,staticClass:"section-icon-item",class:{active:e.activeSection===t},on:{click:function(a){return e.updateActiveSection(t)}}},[a("div",{staticClass:"smtp-server-icon-container"},[e.activeSection===t?a("img",{attrs:{src:t.iconSrc}}):a("img",{staticStyle:{opacity:"0.3"},attrs:{src:t.iconOffSrc}})]),a("div",{staticClass:"smtp-server-title"},[e._v(" "+e._s(t.caption)+" ")])])})),0),a("div",{staticClass:"ml-3 rounded border flex-grow-1 d-flex flex-column justify-content-stretch overflow-hidden"},[a("div",{staticClass:"p-0"},[e.activeSection?a("h3",{staticClass:"m-0 py-1 px-2 app-heading"},[e._v(e._s(e.activeSection.caption))]):e._e()]),e.activeSection?a("div",["send-emails"==e.activeSection.key?a("send-emails-section",{ref:"sendEmailsSection",attrs:{voucher:e.record,smtpServer:e.activeSmtpServer,pusherChannel:e.pusherChannel},on:{onCommand:e.onCommandHandler}}):e._e(),"email-servers"===e.activeSection.key?a("voucher-smtp-servers-section",{attrs:{voucher:e.record,smtpServers:e.smtpServers},on:{onCommand:e.onCommandHandler}}):e._e(),"email-basic-info"===e.activeSection.key?a("email-basic-info-section",{attrs:{voucher:e.record},on:{onCommand:e.onCommandHandler}}):e._e(),"email-template"===e.activeSection.key?a("email-template-section",{attrs:{voucher:e.record,smtpServer:e.activeSmtpServer},on:{onCommand:e.onCommandHandler}}):e._e()],1):e._e()])])},Z_=[],ey=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"d-flex flex-row line-height-1 mt-3 px-3"},[a("div",{staticClass:"d-flex flex-column flex-grow-1"},[a("div",{staticClass:"d-flex flex-row align-items-end"},[a("div",{staticClass:"huge-font"},[e._v(e._s(e.percentCompleted)+"%")]),a("div",{staticClass:"ml-4 flex-grow-1"},[a("div",{staticClass:"huge-font2 badge badge-warning"},[e._v(e._s(e.processedCount)+" / "+e._s(e.totalCount)+"*")])]),a("div",{staticClass:"align-self-stretch text-right px-2 d-flex flex-row justify-content-end text-muted align-items-end"},[e.voucher.has_one_code?a("small",{staticClass:"text-muted"},[e._v(" * Single Code Mode: All participants are assigned same code. ")]):a("small",{staticClass:"text-muted"},[e._v(" * Only participants (not on hold) having codes assigned are included. ")])])]),a("yoov-progress-bar",{staticClass:"px-1 py-3",attrs:{progress:e.percentCompleted,completed:!1,notes:e.notes,tempo:50}})],1),e.smtpServer?a("icon-item",{attrs:{iconKey:"smtp-server",item:e.smtpServer,description:e.smtpServer.description}}):a("icon-item",{attrs:{iconKey:"smtp-server",disabled:!0,hasFault:!0,description:"No Smtp Server Specified!"}}),a("div",{},["sending"!==e.voucher.status&&0===e.processedCount&&e.totalCount>0||0==e.totalCount?a("big-border-button",{staticClass:"mb-1",attrs:{disabled:!e.smtpServerReady||0===e.totalCount,variant:"success",command:"start",caption:"Start"},on:{onCommand:e.onCommandHandler}}):e._e(),"sending"===e.voucher.status?a("big-border-button",{staticClass:"mb-1",attrs:{disabled:!e.smtpServerReady,variant:"danger",command:"pause",caption:"Pause"},on:{onCommand:e.onCommandHandler}}):e._e(),"sending"!==e.voucher.status&&e.processedCount>0&&e.processedCount<e.totalCount?a("big-border-button",{staticClass:"mb-1",attrs:{disabled:!e.smtpServerReady,variant:"info",command:"continue",caption:"Continue"},on:{onCommand:e.onCommandHandler}}):e._e(),e.processedCount===e.totalCount&&0!==e.totalCount?a("big-border-button",{staticClass:"mb-1",attrs:{disabled:!0,variant:"muted",caption:"Finished"}}):e._e(),a("button",{staticClass:"btn btn-danger btn-sm",attrs:{disabled:"completed"!==e.voucher.status&&"pending"!==e.voucher.status&&0===e.processedCount||0===e.totalCount||"sending"===e.voucher.status},on:{click:e.resetAll}},[e._v(" Reset All ")])],1)],1),a("div",{staticClass:"mx-4 my-0 d-flex flex-row"},[a("h4",{staticClass:"mb-2 text-info"},[e._v("Sent:")]),a("h4",{staticClass:"mx-3 text-black-50"},[e._v(e._s(e.processedCount))]),a("h4",{staticClass:"text-black-50"},[e._v("(")]),a("h4",{staticClass:"mb-2 text-success"},[e._v("Success:")]),a("h4",{staticClass:"mx-3 text-black-50"},[e._v(e._s(e.mailingSummary.completed))]),a("div",{staticClass:"mb-3 ml-0 "},[a("div",{staticClass:"d-flex flex-row"},[a("h4",{staticClass:"text-danger"},[e._v("Failed:")]),a("h4",{staticClass:"ml-3 text-black-50"},[e._v(e._s(e.mailingSummary.fails))])]),a("button",{staticClass:"btn btn-sm btn-outline-danger",attrs:{disabled:0===e.mailingSummary.fails},on:{click:e.doResetFails}},[a("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"redo"}}),e._v(" Resend ")],1)]),a("h4",{staticClass:"text-black-50"},[e._v(")")])]),e._e(),a("serious-confirm-dialog",{ref:"seriousConfirmDialog",attrs:{id:"resetAllDialog"},on:{onCommand:e.onCommandHandler},model:{value:e.showingConfirmResetAllDialog,callback:function(t){e.showingConfirmResetAllDialog=t},expression:"showingConfirmResetAllDialog"}})],1)},ty=[],ay=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid",attrs:{id:"progressbar"}},[a("div",{staticClass:"progress m-0 p-0"},[a("div",{staticClass:"progress-bar progress-bar-striped",style:{width:e.progress+"%"},attrs:{role:"progressbar","aria-valuenow":e.progress,"aria-valuemin":"0","aria-valuemax":"100"}},[e._v(" "+e._s(e.progress)+"% ")])]),a("div",{staticClass:"position-absolute mt-1 m-0 p-0",domProps:{innerHTML:e._s(e.notes)}})])},ny=[],oy={props:{progress:{type:Number,default:0},completed:{type:Boolean,default:!1},tempo:{type:Number,default:0},notes:{type:String,default:""}}},iy=oy,sy=Object(g["a"])(iy,ay,ny,!1,null,null,null),ry=sy.exports,ly=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btn-container",class:"border-"+e.variant},[a("button",{staticClass:"btn btn-xlg min-width-200",class:"btn-"+e.variant,attrs:{type:"button",disabled:e.disabled},on:{click:function(t){return e.$emit("onCommand",{command:e.command})}}},[e._v(" "+e._s(e.caption)+" ")])])},cy=[],dy={props:{disabled:{type:Boolean,default:!1},variant:{type:String,default:"primary"},command:{type:String,default:""},caption:{type:String,default:""}}},uy=dy,my=(a("a5b7"),Object(g["a"])(uy,ly,cy,!1,null,null,null)),py=my.exports,fy=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"icon-wrapper",class:{active:e.selected,disabled:e.disabled},on:{click:function(t){return e.$emit("click",e.item)}}},[a("div",{staticClass:"icon-img-container"},[a("img",{attrs:{src:e.imgSrc}}),e.hasFault?a("div",{staticClass:"position-absolute question-mark text-danger d-flex flex-column justify-content-center"},[e._v(" ? ")]):e._e(),""!==e.tagText?a("div",{staticClass:"icon-tag position-absolute",staticStyle:{left:"2px",top:"2px"}},[a("div",{staticClass:"badge",class:{"badge-warning":!e.disabled,"badge-muted":e.disabled}},[e._v(e._s(e.tagText))])]):e._e()]),a("div",{staticClass:"icon-img-title"},[e._v(" "+e._s(e.description)+" ")]),a("div",{staticClass:"icon-notes text-center"},[e._v(" "+e._s(e.notes)+" ")])])},gy=[],vy={props:{hasFault:{type:Boolean,default:!1},item:{type:Object,default:null},notes:{type:String,default:""},iconKey:{type:String,default:"smtp-server"},description:{type:String,default:""},selected:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},tag:{tyep:String,default:""}},computed:{tagText:function(){var e=this,t="";return""!==e.tag?t=e.tag:e.item&&(t=e.item.tag),t},imgSrc:function(){var e=this,t="";switch(e.iconKey){case"smtp-server":t=e.disabled?"/img/smtp_server_disabled.png":"/img/smtp_server.png";break}return t}}},hy=vy,by=(a("0335"),Object(g["a"])(hy,fy,gy,!1,null,null,null)),Cy=by.exports,_y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-dialog",{attrs:{id:e.id,title:e.params.title,modalType:"confirmation",okButtonState:e.userMessage.toLowerCase()===e.params.confirmWord.toLowerCase(),size:"sm",value:e.value},on:{onCommand:e.onCommandHandler,input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"dialogBody",fn:function(){return[a("p",[e._v(e._s(e.params.message))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userMessage,expression:"userMessage"}],staticClass:"form-control text-lowercase",domProps:{value:e.userMessage},on:{input:function(t){t.target.composing||(e.userMessage=t.target.value)}}}),a("small",[e._v(e._s(e.$t("messages.type__to_proceed",{word:e.params.confirmWord})))])]},proxy:!0}])})},yy=[],wy={components:{baseDialog:Ou},props:{id:{type:String,default:""},title:{type:String,default:""},message:{type:String,default:""},confirmWord:{type:String,default:""},command:{type:String,default:""},value:{type:Boolean,default:!1}},data:function(){return{userMessage:"",params:{title:"",message:"",confirmWord:"",command:""}}},watch:{value:function(e){var t=this;console.log("watch(value) : newValue: ",e),console.log("watch(value) : vm.id = "+t.id),e?t.$bvModal.show(t.id):t.$bvModal.hide(t.id)}},model:{prop:"value",event:"input"},mounted:function(){var e=this;""!==e.title&&(e.params.title=e.title),""!==e.title&&(e.params.message=e.message),""!==e.title&&(e.params.confirmWord=e.confirmWord),""!==e.title&&(e.params.command=e.command)},methods:{closeDialog:function(){var e=this;e.$emit("input",!1),e.$bvModal.hide(e.id)},init:function(e){var t=this;t.params.title=e.title,t.params.message=e.message,t.params.confirmWord=e.confirmWord,t.params.command=e.command,t.userMessage=e.inputValue},onCommandHandler:function(e){var t=this;switch(console.log("onCommandHandler :: payload: ",e),e.command){case"ok":t.$emit("onCommand",{command:t.params.command,callback:function(){t.$emit("input",!1),t.$bvModal.hide(t.id)}})}}}},xy=wy,Ty=Object(g["a"])(xy,_y,yy,!1,null,null,null),ky=Ty.exports,Sy={components:{yoovProgressBar:ry,bigBorderButton:py,iconItem:Cy,seriousConfirmDialog:ky},computed:{pusher:function(){return this.$store.getters.pusher},notes:function(){var e=this,t="",a=[];return""!==e.sendingToEmail&&a.push(e.sendingToEmail),""!==e.sendingToName&&a.push("("+e.sendingToName+")"),a.length>0&&(t='Sending ... <div class="badge badge-info">'+a.join(" ")+"</div>"),t},percentCompleted:function(){var e=this,t=0;return 0!==e.totalCount&&(t=100*e.processedCount/e.totalCount,t=Math.round(t)),t},processedCount:function(){var e=this,t=e.mailingSummary.completed+e.mailingSummary.fails;return t},totalCount:function(){var e=this,t=e.mailingSummary.completed+e.mailingSummary.fails+e.mailingSummary.pending+e.mailingSummary.processing;return t},smtpServerReady:function(){var e=this;return!!e.smtpServer},systemConfigs:function(){return this.$store.getters.systemConfigs},systemSmtpServer:function(){var e=this,t=null;return e.systemConfigs&&e.systemConfigs.smtp_server&&(t=e.systemConfigs.smtp_server),t}},props:{voucher:{type:Object,default:null},smtpServer:{type:Object,default:null},pusherChannel:{type:Object,default:null}},watch:{pusher:function(e){var t=this;e&&t.initPusherChannel()}},mounted:function(){var e=this;e.initPusherChannel(),e.refreshSummary(),e.showingConfirmResetAllDialog=!1},beforeDestroy:function(){var e=this;this.timer&&clearInterval(this.timer),e.unbindEvents()},methods:{resetAll:function(){this.$refs.seriousConfirmDialog.init({title:"Reset All Mailing Status",message:"All mailing status (completed or fails) will be lost. Are you sure?",confirmWord:"reset",command:"resetAll",inputValue:""}),this.showingConfirmResetAllDialog=!0},setVoucherStatus:function(e){var t=this,a={urlCommand:"/vouchers/"+t.voucher.id+"/status/"+e};t.$store.dispatch("AUTH_POST",a).then((function(e){t.$toaster.success("Signal has been sent to server.")}))},initPusherChannel:function(){var e=this;e.pusher&&e.voucher&&(e.unbindEvents(),e.pusherChannel=e.pusher.subscribe("voucher"+e.voucher.id+".channel"),e.pusherChannel.bind("VoucherMailingStatusUpdated",(function(t){e.onVoucherMailingStatusUpdated(t)})),e.pusherChannel.bind("VoucherParticipantStatusUpdated",(function(t){e.onVoucherParticipantStatusUpdated(t)})))},unbindEvents:function(){var e=this;e.pusherChannel&&(e.pusherChannel.unbind("VoucherMailingStatusUpdated"),e.pusherChannel.unbind("VoucherCodeStatusUpdated"))},onVoucherMailingStatusUpdated:function(e){this.setMailingSummary(e.mailingSummary.summary)},onVoucherParticipantStatusUpdated:function(e){var t=this,a=e.voucherCode;"processing"===a.status&&(t.sendingToName=a.participant_name,t.sendingToEmail=a.participant_email)},setMailingSummary:function(e){var t=this;t.mailingSummary.pending=e.pending,t.mailingSummary.processing=e.processing,t.mailingSummary.completed=e.completed,t.mailingSummary.fails=e.fails,0===t.mailingSummary.processing&&(t.sendingToName="",t.sendingToEmail="")},refreshSummary:function(){var e=this;if(e.voucher){var t={urlCommand:"/vouchers/"+e.voucher.id+"/mailing_summary"};e.$store.dispatch("AUTH_GET",t).then((function(t){e.setMailingSummary(t.summary)}),(function(e){return console.log(e)}))}},pauseOperation:function(){},doResetFails:function(){var e=this,t={urlCommand:"/vouchers/"+e.voucher.id+"/reset_failed_participants"};e.$store.dispatch("AUTH_POST",t).then((function(t){e.setMailingSummary(t.summary),e.$toaster.info("All failed entries have been reset."),e.setVoucherStatus("sending")}))},doResetAll:function(e){var t=this,a={urlCommand:"/vouchers/"+t.voucher.id+"/reset_participants_mailing_status"};t.$store.dispatch("AUTH_POST",a).then((function(a){t.setMailingSummary(a.summary),t.$toaster.info("All mailing status have been reset."),"function"===typeof e&&e()}))},onCommandHandler:function(e){var t=this,a=e.command;switch(a){case"resetAll":t.doResetAll((function(){"function"===typeof e.callback&&e.callback()}));break;case"start":t.setVoucherStatus("sending");break;case"pause":t.setVoucherStatus("pending");break;case"continue":t.setVoucherStatus("sending");break}}},data:function(){return{showingConfirmResetAllDialog:!1,fetching:!1,timer:null,mailingSummary:{pending:0,completed:0,fails:0,processing:0},sendingToName:"",sendingToEmail:"",columns:function(){var e=[{title:"general.number",thComp:"ThCommonHeader",tdComp:"TdCommonIndex",field:"id"},{title:"general.name",thComp:"ThCommonHeader",tdComp:"TdCommon",field:"name"},{title:"general.email",thComp:"ThCommonHeader",tdComp:"TdCommon",field:"email"},{title:"general.tel_no",thComp:"ThCommonHeader",tdComp:"TdCommon",field:"tel_no"},{title:"general.action",thComp:"ThCommonHeader",tdComp:"TdCommonOpt",field:"id"}];return e}(),data:[],total:0,query:{filter:"",sort:"",order:"",page:0},xprops:{buttons:["delete"],eventbus:new r["default"],actionButtonSize:"xs"},HeaderSettings:!1,progressBarOptions:{text:{color:"#FFFFFF",shadowEnable:!0,shadowColor:"#000000",fontSize:14,fontFamily:"Helvetica",dynamicPosition:!1,hideText:!1},progress:{color:"#2dbd2d",backgroundColor:"#333333"},layout:{height:25,width:"100%",verticalTextAlign:70,horizontalTextAlign:43,zeroOffset:0,strokeWidth:50,progressPadding:0,type:"line"}}}}},Oy=Sy,$y=(a("de85"),Object(g["a"])(Oy,ey,ty,!1,null,null,null)),jy=$y.exports,Iy=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid"},e._l(e.smtpServers,(function(t){return a("icon-item",{key:t.id,attrs:{iconKey:"smtp-server",disabled:e.voucher.smtp_server_id!==t.id,tag:t.tag,item:t,description:t.description},on:{click:e.onServerClicked}})})),1)},Ey=[],Fy={components:{iconItem:Cy},props:{voucher:{type:Object,default:null},smtpServers:{type:Array,default:function(){return[]}}},mounted:function(){},methods:{onServerClicked:function(e){var t=this;t.$emit("onCommand",{command:"updateField",fieldName:"smtp_server_id",fieldValue:e.id})}}},Py=Fy,Ay=Object(g["a"])(Py,Iy,Ey,!1,null,null,null),Dy=Ay.exports,Hy=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pl-2"},[a("validation-observer",{ref:"sendEmailInfoObserver",scopedSlots:e._u([{key:"default",fn:function(t){t.invalid;return[a("div",{staticClass:"row form-inline"},[a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"form-group my-1"},[a("label",{staticClass:"mr-2",attrs:{for:"subject"}},[e._v("Subject")]),a("validation-provider",{staticClass:"d-inline-block flex-grow-1",attrs:{name:"Subject",rules:"required",immediate:!0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("input",{staticClass:"w-100 flex-grow-1 form-control",class:{"has-error":n.length>0},attrs:{type:"text"},domProps:{value:e.voucher.email_subject},on:{input:function(t){return e.updateValue("email_subject",t.target.value)}}})]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-3"},[a("div",{staticClass:"form-group my-1"},[a("label",{staticClass:"mr-2",attrs:{for:"cc"}},[e._v("cc")]),a("input",{staticClass:"flex-grow-1 form-control",attrs:{type:"text"},domProps:{value:e.voucher.email_cc},on:{input:function(t){return e.updateValue("email_cc",t.target.value)}}})])]),a("div",{staticClass:"col-sm-3"},[a("div",{staticClass:"form-group my-1"},[a("label",{staticClass:"mr-2",attrs:{for:"bcc"}},[e._v("bcc")]),a("input",{staticClass:"flex-grow-1 form-control",attrs:{type:"text"},domProps:{value:e.voucher.email_bcc},on:{input:function(t){return e.updateValue("email_bcc",t.target.value)}}})])]),a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"form-group my-1"},[a("label",{staticClass:"mr-2",attrs:{for:"testEmail"}},[e._v("Email Testing")]),a("div",{staticClass:"input-group"},[a("validation-provider",{staticClass:"d-inline-block flex-grow-1",attrs:{name:"Email",rules:"required|email",immediate:!0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.testEmail,expression:"testEmail"}],staticClass:"flex-grow-1 form-control",class:{"has-error":n.length>0},attrs:{type:"mail"},domProps:{value:e.testEmail},on:{blur:function(t){return e.updateTestEmail(t.target.value)},input:function(t){t.target.composing||(e.testEmail=t.target.value)}}})]}}],null,!0)}),a("button",{staticClass:"input-group-append",on:{click:e.sendTestEmail}},[e.sendingTestEmail?a("font-awesome-icon",{staticClass:"mr-1 fa-spin",attrs:{icon:"spinner"}}):a("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"paper-plane"}})],1)],1),e.sendingTestEmailResult?a("div",{staticClass:"ml-3",class:{"text-danger":!e.sendingTestEmailResult["status"]}},[e._v(e._s(e.sendingTestEmailResult["message"]))]):e._e()])])])]}}])}),a("hr",{staticClass:"my-1"}),a("template-editor",{ref:"emailTemplateEditor",attrs:{voucher:e.voucher,id:"emailTemplateEditor",content:e.voucher.email_template,templateTagGroups:e.templateTagGroups},on:{onCommand:e.onCommandHandler}})],1)},Ny=[],Ry=(a("5377"),{mixins:[wC],components:{templateEditor:LC},data:function(){return{sendingTestEmail:!1,sendingTestEmailResult:null,testEmail:""}},props:{voucher:{type:Object,default:null},smtpServer:{type:Object,default:null}},watch:{userSettings:{handler:function(e){var t=this;t.testEmail=e["test_email"]},deep:!0}},mounted:function(){var e=this;e.testEmail=e.userSettings["test_email"]},computed:{userSettings:function(){return this.$store.getters.userSettings},participantTags:function(){var e=this,t=[];if(e.voucher&&e.voucher.participant_configs)for(var a=e.voucher.participant_configs["inputObjs"],n=0;n<a.length;n++){var o=a[n];t.push(o.name.toLowerCase().replace(" ","_"))}return t}},methods:{updateTestEmail:function(e){var t=this;t.$store.dispatch("UPDATE_USER_SETTING",{keyName:"test_email",keyValue:t.testEmail})},validate:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.abrupt("return",a.$refs.sendEmailInfoObserver.validate());case 2:case"end":return t.stop()}}),t)})))()},sendTestEmail:function(){var e=this,t=e.$refs.sendEmailInfoObserver.flags.invalid;if(console.log("sendTestEmail: flags: ",e.$refs.sendEmailInfoObserver.flags),t){var a=[];for(var n in e.$refs.sendEmailInfoObserver.errors)for(var o=e.$refs.sendEmailInfoObserver.errors[n],i=0;i<o.length;i++)a.push(o[i].replace("This field",n));e.$toaster.warning(a.join("\n"))}else e.smtpServer?e.testEmail?(e.sendingTestEmail=!0,e.$emit("onCommand",{command:"save",callback:function(){e.doSendTestEmail()}})):e.$toaster.warning("Email not defined!"):e.$toaster.warning("SMTP server not defined")},doSendTestEmail:function(){var e=this,t={urlCommand:"/email_templates/send_test_email",data:{voucherId:e.voucher.id,template:e.voucher.email_template,email:e.testEmail,smtpServer:e.smtpServer,tagGroups:e.templateTagGroups,subject:e.voucher.email_subject,cc:e.voucher.email_cc,bcc:e.voucher.email_bcc}};e.$store.dispatch("AUTH_POST",t).then((function(t){console.log("sendTestEmail: response: ",t),e.sendingTestEmail=!1,e.$dialog.alert("Test email sent successfully.")}),(function(t){e.sendingTestEmail=!1,e.$dialog.alert(t.message)}))},onTemplateTagGroupsReady:function(e){var t=this;return e.push({name:"participant",tags:t.participantTags}),e},updateValue:function(e,t){var a=this;a.$emit("onCommand",{command:"updateField",fieldName:e,fieldValue:t})},onCommandHandler:function(e){var t=this;switch(e.command){case"copyTemplate":console.log("EmailTemplateSection :: onCommandHandler :: payload: ",e),t.$emit("onCommand",{command:"copyTemplate",copyTemplateFor:"email_template"});break;case"updateTemplateContent":t.$emit("onCommand",{command:"updateField",fieldName:"email_template",fieldValue:e.fieldValue});break;case"clearTemplate":t.$emit("onCommand",{command:"updateField",fieldName:"email_template",fieldValue:"",callback:e.callback});break;case"changeEditorFullscreenState":t.isFullScreenEditorMode=e.isFullScreen;break;default:t.$emit("onCommand",e)}}}}),Vy=Ry,My=Object(g["a"])(Vy,Hy,Ny,!1,null,null,null),Ly=My.exports,Uy={components:{sendEmailsSection:jy,voucherSmtpServersSection:Dy,emailTemplateSection:Ly},props:{record:{type:Object,default:null},activeSectionKey:{type:String,default:""},pusherChannel:{type:Object,default:null}},data:function(){return{agentTag:"",smtpServers:[],sections:[{caption:"Send Emails",iconSrc:"/img/send_email.png",iconOffSrc:"/img/send_email_off.png",key:"send-emails"},{caption:"Email Servers",iconSrc:"/img/email-servers.png",iconOffSrc:"/img/email-servers_off.png",key:"email-servers"},{caption:"Email Template",iconSrc:"/img/email_template.png",iconOffSrc:"/img/email_template_off.png",key:"email-template"}]}},computed:{activeSection:function(){for(var e=this,t=null,a=0;a<e.sections.length;a++)if(e.sections[a].key===e.activeSectionKey){t=e.sections[a];break}return t},activeSmtpServer:function(){var e=this,t=null;if(e.smtpServers)for(var a=0;a<e.smtpServers.length;a++)if(e.smtpServers[a].id===e.record.smtp_server_id){t=e.smtpServers[a];break}return t}},methods:{updateStatus:function(e){var t=this;t.$refs.sendEmailsSection.updateStatus(e)},updateActiveSection:function(e){this.$emit("onCommand",{command:"updateEmailPageSectionKey",value:e.key})},onCommandHandler:function(e){this.$emit("onCommand",e)},loadAgentSmtpServers:function(e){var t=this;if(t.record&&0!==t.record.agent_id){var a={urlCommand:"/agents/"+t.record.agent_id+"/smtp_servers"};t.$store.dispatch("AUTH_GET",a).then((function(a){for(var n=[],o=0;o<a.smtpServers.length;o++){var i=a.smtpServers[o];i["is_system"]=0,i["tag"]="",n.push(i)}for(var s=0;s<a.systemSmtpServers.length;s++){i=a.systemSmtpServers[s];i["is_system"]=1,i["tag"]="SYSTEM",n.push(i)}t.smtpServers=n,t.agentTag=a.tag,"function"===typeof e&&e()}),(function(e){console.log("error: "),console.log(e)}))}else"function"===typeof e&&e()}},mounted:function(){var e=this;e.loadAgentSmtpServers((function(){""===e.activeSectionKey&&e.$emit("onCommand",{command:"updateEmailPageSectionKey",value:e.sections[0].key})}))}},qy=Uy,By=(a("9775"),Object(g["a"])(qy,X_,Z_,!1,null,null,null)),Gy=By.exports,Ky=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"toolbar-button-wrapper",class:{selected:e.selected},on:{click:e.onClicked}},[a("div",{staticClass:"toolbar-button-icon text-center"},[a("img",{attrs:{src:e.imgSrc}})]),a("div",{staticClass:"toolbar-button-title text-center"},[e._v(" "+e._s(e.caption)+" "),e.badge?a("div",{staticClass:"badge badge-warning"},[e._v(e._s(e.badge))]):e._e()])])},zy=[],Jy={props:{badge:{type:Number,default:0},caption:{type:String,default:"(Unspecified)"},imgSrc:{type:String,default:""},selected:{type:Boolean,default:!1}},methods:{onClicked:function(){var e=this;e.$emit("click")}}},Qy=Jy,Wy=(a("cd09"),Object(g["a"])(Qy,Ky,zy,!1,null,null,null)),Yy=Wy.exports,Xy={computed:{inputObjTypes:function(){return this.$store.getters.inputObjTypes},DEFAULT_FORM_CONFIGS:function(){return this.$store.getters.DEFAULT_FORM_CONFIGS},DEFAULT_PAGE_CONFIGS:function(){return this.$store.getters.DEFAULT_PAGE_CONFIGS}},methods:{newFormKey:function(){return(Date.now()+Math.random()).toString(36).replace(".","")},getSelectedObjIndex:function(e,t){for(var a=-1,n=0;n<t.inputObjs.length;n++)if(t.inputObjs[n].id===e){a=n;break}return a},getInputObjType:function(e){for(var t=this,a=null,n=0;n<t.inputObjTypes.length;n++){var o=t.inputObjTypes[n];if(o.type===e){a=o;break}}return a},getNewInputObj:function(e){var t=this,a=t.getInputObjType(e),n={name:a.label,fixed:!1,inputType:e,question:"",required:"1",options:[],note1:"",note2:""};return a.default&&(n["name"]=a.default.caption,n["question"]=a.default.question,a.default.note1&&(n["note1"]=a.default.note1),a.default.note2&&(n["note2"]=a.default.note2),a.default.options&&(n["options"]=a.default.options)),n},onInputObjCommandHandler:function(e){var t=this,a=e.command,n=t.getFormConfigsByKey(e.key);if(n)switch(a){case"newInputObj":t.newInputObj(e,n);break;case"selectInputObjImage":t.selectInputObjImage(e,n);break;case"deleteInputObj":t.deleteInputObj(e,n);break;case"updateInputObjField":t.updateInputObjField(e,n);break;case"removeInputObjOption":t.removeInputObjOption(e,n);break;case"appendInputObjOption":t.appendInputObjOption(e,n);break;case"updateInputObjOptions":t.updateInputObjOptions(e,n);break;case"updateInputObjOptionByIndex":t.updateInputObjOptionByIndex(e,n);break;case"removeInputObjOptionByIndex":t.removeInputObjOptionByIndex(e,n);break;case"replaceInputObjs":t.replaceInputObjs(e,n);break;case"updatePageConfigField":t.updatePageConfigField(e,n);break;case"exportFormConfigs":t.exportFormConfigs(e,n);break;case"clearForm":t.clearForm(e.key);break;case"previewQuestionForm":t.previewQuestionForm(e,n);break}},clearForm:function(e){var t=this;switch(e){case"question":t.record.form_configs=JSON.parse(JSON.stringify(t.DEFAULT_FORM_CONFIGS));break;default:for(var a=0;a<t.record.custom_forms.length;a++){var n=t.record.custom_forms[a];if(n.form_key===e){t.record.custom_forms[a].form_configs=JSON.parse(JSON.stringify(t.DEFAULT_FORM_CONFIGS));break}}}},exportFormConfigs:function(e,t){var a=this,n={urlCommand:"/form_questions/temp/create",data:{formConfigs:t}};a.$store.dispatch("AUTH_POST",n).then((function(e){var t=a.$store.getters.appHost+"/d/_"+e.key;window.open(t,"_blank")}),(function(e){a.$toaster.error(e.message)}))},getFormConfigsByKey:function(e){var t=this,a=null;switch(e){case"question":a=t.record.form_configs;break;default:for(var n=0;n<t.record.custom_forms.length;n++){var o=t.record.custom_forms[n];if(o.form_key===e){a=o.form_configs;break}}}return a},previewQuestionForm:function(e,t){var a=this;a.$store.commit("addState","preview"),a.save((function(){var e={urlCommand:"/form_questions/temp/create",data:{formConfigs:t}};a.$store.dispatch("AUTH_POST",e).then((function(e){var t=a.$store.getters.appHost+"/q/_"+e.key;window.open(t,"_blank"),a.$store.commit("removeState","preview")}),(function(e){a.$toaster.error(e.message),a.$store.commit("removeState","preview")}))}))},newInputObj:function(e,t){var a=this,n=e.value,o=a.getNewInputObj(n),i=e.objIndex,s=JSON.parse(JSON.stringify(t.inputObjs)),r=-1;-1===i?(s.push(o),r=inputObj.length-1):(s.splice(i+1,0,o),r=i+1),t.inputObjs=s,"function"===typeof e.callback&&e.callback(o,r)},selectInputObjImage:function(e,t){var a=this,n=e.objIndex;console.log("selectInputObjImage: payload: ",e),console.log("selectInputObjImage: formConfigs: ",t),console.log("selectInputObjImage :: currentIndex = "+n),-1!==n&&(a.selectedFormConfigs=t,a.selectedInputObjIndex=n,a.imageScope="inputObj",a.$refs.imageSelectDialog.refresh(),a.$bvModal.show("imageSelectDialog"))},deleteInputObj:function(e,t){var a=e.objIndex;-1!==a&&t.inputObjs.splice(a,1)},updateInputObjField:function(e,t){var a=e.objIndex;if(-1!==a){var n="";n=Array.isArray(e.fieldValue)?e.fieldValue:e.fieldValue.replace(/[\n\r]/g,"|"),t.inputObjs[a][e.fieldName]=n}},removeInputObjOption:function(e,t){var a=this,n=a.getSelectedObjIndex(e.id,t),o=e.objIndex;-1!==n&&o<=t.inputObjs[n].options.length&&t.inputObjs[n].options.splice(o,1)},appendInputObjOption:function(e,t){var a=e.objIndex,n=e.value?e.value:"";-1!==a&&t.inputObjs[a].options.push(n)},updateInputObjOptions:function(e,t){var a=e.objIndex;-1!==a&&(t.inputObjs[a].options=e.options)},removeInputObjOptionByIndex:function(e,t){var a=e.index,n=e.objIndex;if(-1!==n){var o=JSON.parse(JSON.stringify(t.inputObjs[n].options));o.splice(a,1),t.inputObjs[n].options=o}},updateInputObjOptionByIndex:function(e,t){var a=e.index,n=e.objIndex;if(-1!==n){var o=JSON.parse(JSON.stringify(t.inputObjs[n].options));-1!==a&&a<=o.length&&(o[a]=e.fieldValue),t.inputObjs[n].options=o}},getSystemPageConfigs:function(e){for(var t=null,a=0;a<e.length;a++){var n=e[a];if("system-page"===n.inputType){t=n;break}}return t},replaceInputObjs:function(e,t){var a=this,n=e.value,o=a.getSystemPageConfigs(n);o||n.push(a.DEFAULT_PAGE_CONFIGS),t.inputObjs=JSON.parse(JSON.stringify(n))},updatePageConfigField:function(e,t){t.pageConfig[e.fieldName]=e.fieldValue}}},Zy=Xy,ew=a("1157"),tw=a.n(ew),aw=(a("411c"),{mixins:[qu,wa,Zy],components:{imageCropperDialog:ym,voucherSelectDialog:Wu,imageSelectDialog:fm,singleFieldDialog:Om,uploadButton:Lu,infoPage:bC,agentCodePage:Mf,ticketsPage:GC,redemptionPage:c_,sharingPage:y_,formFillingPage:O_,customFormsPage:P_,participantsPage:V_,authorizationPage:Y_,emailPage:Gy,agentCodeTab:Bf,voucherToolbarButton:Yy,tinymce:Bu["a"],titleRow:cu,formPageTemplatesTab:Ug,formFillingTab:Tg,customFormsTab:nb,formParticipantsTab:gb,sharingContextBox:h_,copyLink:sm},data:function(){return{pusherChannel:null,emailPageSectionKey:"",apiPath:"/vouchers",titleField:"description",record:null,loading:!1,defaultTemplateKeyGroups:[],allVouchers:[],agentVouchers:[],showingCopyTemplateDialog:!1,copyTemplateFor:"voucher_template",showingImageSelectDialog:!1,showingImageCropperDialog:!1,imageScope:"",selectedTempMediaId:0,selectedTempMediaIdField:"",processingButtons:[],qrcodeConfig:{composition:"",width:0,height:0},barcodeConfig:{composition:"",width:0,height:0},testLink:"",inputObjs:[],selectedFormConfigs:null,selectedInputObjIndex:-1,activePage:"",FIRST_PAGE_TO_SHOW:"info",IMAGE_PATH_INFO:"/img/64x64/info.png",IMAGE_PATH_CODES:"/img/64x64/codes.png",IMAGE_PATH_TICKETS:"/img/64x64/tickets.png",IMAGE_PATH_REDEMPTION:"/img/64x64/redemption.png",IMAGE_PATH_SHARING:"/img/64x64/sharing.png",IMAGE_PATH_FORM_FILLING:"/img/64x64/form_filling.png",IMAGE_PATH_CUSTOM_FORMS:"/img/64x64/form_builder.png",IMAGE_PATH_PARTICIPANTS:"/img/64x64/participants.png",IMAGE_PATH_EMAIL:"/img/64x64/email.png",IMAGE_PATH_AUTHORIZATION:"/img/64x64/authorization.png",tabButtons:[{caption:"Info",imgSrc:"/img/64x64/info.png",tab:"info"},{caption:"Codes",imgSrc:"/img/64x64/codes.png",tab:"codes",badge:0},{caption:"Tickets",imgSrc:"/img/64x64/tickets.png",tab:"tickets",badge:0},{caption:"Sharing",imgSrc:"/img/64x64/sharing.png",tab:"sharing",badge:0},{caption:"Form Filling",imgSrc:"/img/64x64/form_filling.png",tab:"form_filling",badge:0},{caption:"Custom Forms",imgSrc:"/img/64x64/form_builder.png",tab:"custom_forms",badge:0},{caption:"Participants",imgSrc:"/img/64x64/participants.png",tab:"participants",badge:0},{caption:"Email",imgSrc:"/img/64x64/email.png",tab:"email",badge:0}]}},props:{recordId:{type:Number,default:0}},computed:(yt={user:function(){return this.$store.getters.user},isOwner:function(){var e=this,t=!1;return e.record&&e.user&&(t=e.record.user_id===e.user.id),t},customLink:function(){var e=this;return e.$store.getters.appHost+"/q/"+e.record.custom_link_key},infoPageError:function(){var e=this;return e.record&&""===e.record.description},pusher:function(){return this.$store.getters.pusher},agentName:function(){var e=this,t="";if(e.record&&0!==e.record.agent_id){var a=e.agents.find((function(t){return t.id===e.record.agent_id}));a&&(t=a.name)}return t}},Object(T["a"])(yt,"customLink",(function(){var e=this;return e.$store.getters.appHost+"/q/"+e.record.custom_link_key})),Object(T["a"])(yt,"allTemplates",(function(){var e=this,t=[];t.push({id:0,name:"Questionnaire",content:e.record.questionnaire,system:!0});for(var a=0;a<e.record.custom_templates.length;a++){var n=e.record.custom_templates[a];t.push({id:n.id,name:n.name,content:n.content,system:!1})}return t})),Object(T["a"])(yt,"agents",(function(){return this.$store.getters.agents})),Object(T["a"])(yt,"otherVouchers",(function(){var e=this,t=[];return e.record&&(t=e.allVouchers.filter((function(t){return t.id!==e.record.id}))),d,t})),Object(T["a"])(yt,"templateKeyGroups",(function(){var e=this,t=JSON.parse(JSON.stringify(e.defaultTemplateKeyGroups));e.codeFields.length>0&&t.push({name:"code",keys:[]});for(var a=t.length-1,n=0;n<e.codeFields.length;n++){var o=ae.str2token("code_",e.codeFields[n]);t[a]["keys"].push(o)}return t})),Object(T["a"])(yt,"codeFields",(function(){var e=this,t=[];if(null!==e.record.code_fields&&""!==e.record.code_fields){var a=ae.getKeyPairArray(e.record.code_fields);t=a.map((function(e){return e[0]}))}return t})),yt),watch:{pusher:function(e){var t=this;e&&t.initPusherChannel()},recordId:function(e){var t=this;t.refresh(e),t.initPusherChannel()}},mounted:function(){var e=this;e.initPusherChannel(),e.activePage||(e.activePage=e.FIRST_PAGE_TO_SHOW),e.showingCopyTemplateDialog=!1,e.showingImageSelectDialog=!1,e.showingImageCropperDialog=!1,e.$store.dispatch("FETCH_AGENTS"),e.fetchVouchers(),e.refresh(e.recordId),e.testLink=window.location.origin+"/coupons/"+e.recordId+"/"+(new Date).getTime()},beforeDestroy:function(){var e=this;e.unbindEvents()},methods:{onVoucherStatusUpdated:function(e){var t=this;t.record&&(t.record.status=e.voucher.status)},onVoucherParticipantStatusUpdated:function(e){var t=this;switch(t.activePage){case"codes":t.$refs.agentCodePage.updateStatus(e);break;case"participants":t.$refs.participantsPage.updateStatus(e);break;case"email":t.$refs.emailPage.updateStatus(e);break}},initPusherChannel:function(){var e=this;if(e.pusher&&0!==e.recordId){e.unbindEvents();var t="voucher"+e.recordId+".channel";e.pusherChannel=e.pusher.subscribe(t),e.pusherChannel.bind("VoucherStatusUpdated",(function(t){e.onVoucherStatusUpdated(t)})),e.pusherChannel.bind("VoucherParticipantStatusUpdated",(function(t){e.onVoucherParticipantStatusUpdated(t)}))}},unbindEvents:function(){var e=this;e.pusherChannel&&(e.pusherChannel.unbind("VoucherStatusUpdated"),e.pusherChannel.unbind("VoucherParticipantStatusUpdated"))},onPageSelected:function(e){this.activePage=e},selectTab:function(e){var t=this;console.log("selectTab : tab: ",e),t.activeTabButton=e},copyCustomLink:function(){var e=this;e.$copyText(e.customLink),e.$toaster.info(e.$t("messages.link_copied_to_clipboard"))},onUploaded:function(e){var t=this;t.selectedTempMediaId=e.imageId,t.$bvModal.show("imageCropperDialog"),t.$nextTick((function(){t.$refs.imageCropperDialog.startCrop()}))},onRefreshed:function(){var e=this;e.record.sharing_title||(e.record.sharing_title=""),e.record.sharing_description||(e.record.sharing_description=""),e.record.form_sharing_title||(e.record.form_sharing_title=""),e.record.form_sharing_description||(e.record.form_sharing_description=""),null!==e.record.form_configs&&0!==e.record.form_configs.length||(e.record.form_configs=JSON.parse(JSON.stringify(e.DEFAULT_FORM_CONFIGS))),0===e.record.custom_forms.length&&(e.record.custom_forms.push({id:0,form_key:e.newFormKey(),name:"Thank you",type:"general",form_configs:JSON.parse(JSON.stringify(e.DEFAULT_FORM_CONFIGS))}),e.record.custom_forms.push({id:0,form_key:e.newFormKey(),name:"Sorry",type:"general",form_configs:JSON.parse(JSON.stringify(e.DEFAULT_FORM_CONFIGS))})),null===e.record.thankyou_configs&&(e.record.thankyou_configs=JSON.parse(JSON.stringify(e.DEFAULT_FORM_CONFIGS))),null===e.record.sorry_configs&&(e.record.sorry_configs=JSON.parse(JSON.stringify(e.DEFAULT_FORM_CONFIGS))),e.qrcodeConfig=e.getCodeConfig("qrcode",{id:0,composition:"",code_group:"qrcode",code_type:"QRCODE",width:160,height:160}),e.barcodeConfig=e.getCodeConfig("barcode",{id:0,composition:"",code_group:"barcode",code_type:"C128",width:3,height:12})},getCodeConfig:function(e,t){var a=this,n=t,o=a.record.code_configs.filter((function(t){return t.code_group===e}));return o&&o.length>0&&(n=o[0]),n},copyTemplate:function(e){var t=this;switch(console.log("VoucherRecord :: copyTemplate :: vm.copyTemplateFor = "+t.copyTemplateFor),console.log("VoucherRecord :: copyTemplate :: selectedVoucher: ",e),t.$bvModal.hide("voucherSelectDialog"),t.showingCopyTemplateDialog=!1,t.copyTemplateFor){case"voucher_template":t.copyTemplateForVoucher(e);break;case"email_template":t.copyTemplateForEmail(e);break}},copyTemplateForVoucher:function(e){var t=this;console.log("VoucherRecord :: copyTemplateForVoucher"),t.record.template&&""!==t.record.template.trim()?t.$dialog.confirm(t.$t("messages.overwrite_existing_content")+"?").then((function(){t.getVoucherTemplate(e.id,(function(e){t.record.template=e,t.$toaster.success(t.$t("messages.voucher_template_copied_successfully")),console.log("voucher_template: "+e)}))})):t.getVoucherTemplate(e.id,(function(e){t.record.template=e,t.$toaster.success(t.$t("messages.voucher_template_copied_successfully")),console.log("voucher_template: "+e)}))},copyTemplateForEmail:function(e){var t=this;console.log("VoucherRecord :: copyTemplateForEmail"),t.record.email_template&&""!==t.record.email_template.trim()?t.$dialog.confirm(t.$t("messages.overwrite_existing_content")+"?").then((function(){t.getVoucherTemplate(e.id,(function(e){t.record.email_template=e,t.$toaster.success(t.$t("messages.email_template_copied_successfully")),console.log("email_template: "+e)}))})):t.getVoucherTemplate(e.id,(function(e){t.record.email_template=e,t.$toaster.success(t.$t("messages.email_template_copied_successfully")),console.log("email_template: "+e)}))},getVoucherTemplate:function(e,t){var a=this,n={urlCommand:"/vouchers/"+e,options:{params:{select:"template"}}};a.$store.dispatch("AUTH_GET",n).then((function(e){"function"===typeof t?t(e.data.template):a.record.template=e.data.template}))},insertTag:function(e){tinyMCE.get("yoovEditor").execCommand("mceInsertContent",!1,"{"+e+"}")},onEditorInit:function(){var e=this;tinyMCE.get("yoovEditor").setContent(e.record.template?e.record.template:""),tinyMCE.get("yoovEditor").save(),tinyMCE.get("yoovEditor").on("fullscreenStateChanged",(function(t){e.tinyMCEInFullScreen=t.state}));var t=tinyMCE.get("yoovEditor");t.on("blur",(function(e){t.selection.collapse(!1)})),e.addTinyMCEButtonEvents(tinyMCE.get("yoovEditor"))},addTinyMCEButtonEvents:function(e){var t=this,a=tw()("#yoovEditor"),n=tw()(a).parent().find("input#tinymce-uploader");tw()(n).off("change").on("change",(function(){t.uploadImage(n,e)}));var o=tw()("#yoovEditor").prev(".mce-tinymce"),i=tw()(o).find(".mce-select-image button");tw()(i).off("click").on("click",(function(){t.imageScope="tinymce",t.showingImageSelectDialog=!0}))},uploadImage:function(e,t){var a=this,n=e.get(0),o=new FormData;o.append("file",n.files[0]),o.append("scope","tinymce");var i=a.$store.getters.apiUrl+"/media/upload_image",s="bearer "+a.$store.getters.accessToken;tw.a.ajax({headers:{Authorization:s},url:i,type:"POST",data:o,processData:!1,contentType:!1,success:function(e,a,n){var o=e.result;t.insertContent('<img class="content-img" src="'+o.imageUrl+'"/>')},error:function(e,t,a){if(e.responseText){var n=JSON.parse(e.responseText).errors;alert("Error uploading image: "+n.join(", ")+". Make sure the file is an image and has extension jpg/jpeg/png.")}}})},addTinyMCEButtonEmbedImage:function(e,t){},fetchVouchers:function(){var e=this,t={urlCommand:"/vouchers",options:{params:{select:"description,id,agent.name,agent_id,template"}}};e.$store.dispatch("AUTH_GET",t).then((function(t){e.allVouchers=t}),(function(){e.showSessionExpired("vouchers")}))},getCodeInfoFromRow:function(e){for(var t=this,a=t.record.code_fields,n=a.split("|").length,o=[],i=1;i<n;i++)o.push(e["field"+i]);return{id:e["id"],code:e["field0"],extra_fields:o.join("|"),key:e["key"]}},createTempLeaflet:function(e){var t=this,a=JSON.parse(JSON.stringify(t.record));delete a["code_infos"];var n=[t.qrcodeConfig,t.barcodeConfig];a.code_configs=n;var o={urlCommand:"/templates/create_temp",data:{record:a,codeInfo:t.getCodeInfoFromRow(e)}};t.$store.dispatch("AUTH_POST",o).then((function(e){var t=e,a=window.location.origin+"/coupons/temp/"+t;window.open(a,"_blank")}))},showLeaflet:function(e){var t=this,a=t.$store.getters.appHost+"/coupons/"+e;window.open(a,"_blank")},getCustomFormByKey:function(e){for(var t=this,a=null,n=0;n<t.record.custom_forms.length;n++){var o=t.record.custom_forms[n];if(o.form_key===e){a=o;break}}return a},useMultipleCodes:function(e){var t=this,a={urlCommand:"/vouchers/"+t.record.id+"/update_field/has_one_code/0"};t.$store.dispatch("AUTH_POST",a).then((function(a){console.log("VoucherRecord :: keepOnlyOneCode.then"),"function"===typeof e&&e(),t.$toaster.success(a.message)}),(function(e){}))},keepOnlyOneCode:function(e){var t=this,a={urlCommand:"/vouchers/"+t.record.id+"/update_field/has_one_code/1"};t.$store.dispatch("AUTH_POST",a).then((function(a){console.log("VoucherRecord :: keepOnlyOneCode.then"),"function"===typeof e&&e(),t.$toaster.success(a.message)}),(function(e){}))},onCommandHandler:function(e){var t=this;console.log("VoucherRecord :: onCommandHandler :: payload: ",e);var a=null;switch(e.command){case"useMultipleCodes":t.useMultipleCodes((function(){"function"===typeof e.callback&&e.callback()}));break;case"keepOnlyOneCode":t.keepOnlyOneCode((function(){"function"===typeof e.callback&&e.callback()}));break;case"onUploadCompleted":switch(t.activePage){case"participants":t.$refs.participantsPage.refresh();break;case"codes":t.$refs.agentCodePage.refresh();break}break;case"gotoLink":t.save((function(){window.open(e.link,"_blank")}));break;case"copyTemplate":console.log("VoucherRecord :: onCommandHandler :: payload: ",e),t.$bvModal.show("voucherSelectDialog"),t.showingCopyTemplateDialog=!0,t.copyTemplateFor=e.copyTemplateFor;break;case"updateEmailPageSectionKey":t.emailPageSectionKey=e.value;break;case"cropImage":t.selectedTempMediaId=e.imageId,t.selectedTempMediaIdField=e.imageIdField,t.$bvModal.show("imageCropperDialog"),t.$nextTick((function(){t.$refs.imageCropperDialog.startCrop()}));break;case"selectCustomForm":switch(e.tag){case"actionTypeBeforeGoal":t.record.custom_form_key_before_goal=e.formKey;break;case"actionTypeAfterGoal":t.record.custom_form_key_after_goal=e.formKey;break}break;case"selectActionType":switch(e.tag){case"actionTypeBeforeGoal":t.record.action_type_before_goal=e.actionType;break;case"actionTypeAfterGoal":t.record.action_type_after_goal=e.actionType;break}break;case"removeFormType":for(var n=0;n<t.record.custom_forms.length;n++)a=t.record.custom_forms[n],a.form_key===e.formKey&&t.record.custom_forms.splice(n,1);break;case"newFormType":a=t.getCustomFormByKey(e.formKey),t.$refs.singleFieldDialog.init("New","onNewFormType",{formKey:"ADD"},"");break;case"onNewFormType":""===e.fieldValue?t.$toaster.warn("No name specified!"):t.record.custom_forms.push({form_key:t.newFormKey(),form_configs:JSON.parse(JSON.stringify(t.DEFAULT_FORM_CONFIGS)),id:0,name:e.fieldValue,type:"general",voucher_id:t.record.id});break;case"renameFormType":a=t.getCustomFormByKey(e.formKey),t.$refs.singleFieldDialog.init("Rename","onRenameFormName",{formKey:e.formKey},a.name);break;case"onRenameFormName":var o=e.idParams["formKey"];a=t.getCustomFormByKey(o),a.name=e.fieldValue;break;case"showImageSelectDialog":console.log("VoucherRecord :: onCommandHandler :: showImageSelectDialog : payload: ",e),t.imageScope=e.imageScope,t.$bvModal.show("imageSelectDialog");break;case"onImageSelected":switch(e.imageScope){case"tinymce":t.$refs.ticketsPage.insertImage(e.imageId);break;case"inputObj":t.selectedFormConfigs&&t.selectedInputObjIndex>=0&&t.$nextTick((function(){var a=JSON.parse(JSON.stringify(t.selectedFormConfigs.inputObjs));a[t.selectedInputObjIndex]["question"]=t.$store.getters.appHost+"/media/image/"+e.imageId,t.$set(t.selectedFormConfigs,"inputObjs",a)})),t.showingImageSelectDialog=!1,t.$bvModal.hide("imageSelectDialog");break}break;case"showCopyTemplateDialog":t.showingCopyTemplateDialog=!0;break;case"copySelectedTemplate":t.copyTemplate(e.voucher);break;case"exportParticipants":t.exportParticipants();break;case"exportCodesOnly":t.exportCodes();break;case"exportCodesWithParticipants":t.exportCodesWithParticipants();break;case"refreshCouponCodes":t.$refs.agentCodePage.refresh();break;case"select_voucher":alert("voucher selected");break;case"delete_code_info":t.record.code_infos.splice(e.index,1);break;case"save":t.save(e.callback);break;case"save_and_back":t.save((function(){t.$router.go(-1)}));break;case"updateField":var i=e.fieldName,s=e.fieldValue;t.record[e.fieldName]=JSON.parse(JSON.stringify(s)),"smtp_server_id"===i&&t.save(),"function"===typeof e.callback&&e.callback();break;case"setRecordField":t.record[e.fieldName]=JSON.parse(JSON.stringify(e.fieldValue)),"participant_count"===e.fieldName&&0===e.fieldValue&&"voucher"===t.record.voucher_type&&(t.record.participant_configs={inputObjs:[]});break;case"setCodeFields":t.record.code_fields=e.value;break;case"setCodeDataRows":t.updateCodeInfos(e.value);break;case"setQrCodeAndBarcodeComposition":""!==t.qrcodeConfig.composition&&""!==e.data||(t.qrcodeConfig.composition=e.data),""!==t.barcodeConfig.composition&&""!==e.data||(t.barcodeConfig.composition=e.data);break;default:t.onInputObjCommandHandler(e)}},exportParticipants:function(){var e=this,t={urlCommand:"/vouchers/"+e.record.id+"/participants/export",options:{data:{description:e.record.description}}};e.$store.dispatch("AUTH_POST",t).then((function(t){window.open(e.$store.getters.apiUrl+"/files/"+t.key)}),(function(){e.$toaster.warning(e.$t("message.some_errors_occurred_during_export"))}))},exportCodes:function(){alert("exportCodes : not implemented!")},exportCodesWithParticipants:function(){var e=this,t={urlCommand:"/vouchers/"+e.record.id+"/codes_with_participants/export",options:{data:{description:e.record.description}}};e.$store.dispatch("AUTH_POST",t).then((function(t){window.open(e.$store.getters.apiUrl+"/files/"+t.key)}),(function(){e.$toaster.warning(e.$t("message.some_errors_occurred_during_export"))}))},getCodeInfo:function(e){for(var t=this,a=null,n=0;n<t.record.code_infos.length;n++){var o=t.record.code_infos[n];if(o["code"]===e["code"]&&o["extra_fields"]===e["extra_fields"]){a=o;break}}return a},updateCodeInfos:function(e){var t=this,a=[];t.record.code_infos?a=t.record.code_infos.map((function(e){return e.code})):t.record.code_infos=[];for(var n=0;n<e.length;n++){for(var o=[],i=e[n][0],s=1;s<e[n].length;s++){var r=e[n][s];o.push(r)}var l=a.indexOf(i);l>=0?t.record.code_infos[l].extra_fields=o.join("|"):(t.record.code_infos.push({id:0,code:i,extra_fields:o.join("|"),sent_on:"",remark:"",order:0,key:"",status:"pending"}),a.push(i))}for(var c=0;c<t.record.code_infos.length;c++)t.record.code_infos[c].order=c+1},createCodeInfos:function(e){for(var t=[],a=0;a<e.length;a++){for(var n=[],o=0;o<e[a].length;o++)n.push(e[a][o]);t.push({id:0,code_details:n.join("|"),sent_on:"",remark:"",status:"pending"})}return t},createCodeFieldStr:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a]["title"]+":"+e[a]["type"]);return t.join("|")},certifyFormConfigs:function(){var e=this,t=e.record.form_configs;if(t["inputObjs"])for(var a=t["inputObjs"],n=0;n<a.length;n++){var o=a[n];switch(o["inputType"]){case"single-choice":case"multiple-choice":for(var i=JSON.parse(JSON.stringify(o["options"])),s=[],r=0;r<i.length;r++)""!==i[r].trim()&&s.push(i[r]);t["inputObjs"][n]["options"]=s;break}}},save:function(e){var t=this;return Object(le["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t,n.infoPageError){a.next=5;break}return a.abrupt("return",n.doSave(e));case 5:n.$toaster.warning("Some field is essential but missing.");case 6:case"end":return a.stop()}}),a)})))()},doSave:function(e){var t=this,a=[t.qrcodeConfig,t.barcodeConfig];t.record.code_configs=a,t.certifyFormConfigs();var n={urlCommand:t.apiPath+(0===t.record.id?"":"/"+t.record.id),data:t.record};t.loading=!0,t.$forceUpdate();var o=0===t.record.id?"AUTH_POST":"AUTH_PUT";t.$store.dispatch(o,n).then((function(a){var n=t.$t("messages.saved_successfully");t.$toaster.success(n),t.loading=!1,t.record.id=a.id,t.refresh(t.record.id),"function"===typeof e&&e()}),(function(e){t.$toaster.error(t.$t("messages."+e.messageTag))}))}}}),nw=aw,ow=(a("4080"),a("6928"),Object(g["a"])(nw,Wd,Yd,!1,null,null,null)),iw=ow.exports,sw={mixins:[sd],components:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Mc),Qd),{},{dataRecord:iw}),data:function(){return{agents:[],tableId:"voucher-table",moduleNameTag:"menu.vouchers",apiPath:"/vouchers",routeName:"vouchers",columns:function(){var e=[{title:"general.number",thComp:"ThCommonHeader",tdComp:"TdCommonIndex",field:"id"},{title:"general.description",thComp:"ThCommonHeader",tdComp:"TdDescription",tdClass:"vertical-middle",field:"description"},{title:"agents.agent",thComp:"ThCommonHeader",tdComp:"TdAgent",tdClass:"vertical-middle",field:"agent"},{title:"general.type",thComp:"ThCommonHeader",thClass:"text-center",tdComp:"TdType",tdClass:"text-center vertical-middle",field:"voucher_type"},{title:"general.qr_barcode",thComp:"ThCommonHeader",thClass:"text-center",tdComp:"TdCodes",field:"id"},{title:"vouchers.activation_date",thComp:"ThCommonHeader",tdComp:"TdCommonDate",thClass:"text-center",tdClass:"text-center",field:"activation_date"},{title:"general.expiry_date",thComp:"ThCommonHeader",tdComp:"TdCommonDate",thClass:"text-center",tdClass:"text-center",field:"expiry_date"},{title:"general.created_at",thComp:"ThCommonHeader",tdComp:"TdCreatedInfo",thClass:"text-center",tdClass:"text-center",field:"created_at"},{title:"vouchers.participants",thComp:"ThCommonHeader",thClass:"text-center",tdClass:"text-center vertical-middle",tdComp:"TdParticipantCount",field:"participant_count"},{title:"vouchers.codes",thComp:"ThCommonHeader",thClass:"text-center",tdClass:"text-center",tdComp:"TdCommon",field:"code_count"},{title:"general.status",thComp:"ThCommonHeader",tdComp:"TdCommonStatus",field:"status"},{title:"general.action",thComp:"ThCommonHeader",tdComp:"TdCommonOpt",field:"id"}];return e}(),breadcrumb:[{labelTag:"general.home",routeName:"dashboard"},{labelTag:"menu.vouchers",routeName:""}]}},watch:{agents:function(e){this.setTableFilters()},selectedFilter:function(e){var t=this;t.query.filter=0===e?"":"agent_id:"+e}},methods:{onDataLoaded:function(e){for(var t=this,a=0;a<e.length;a++){var n=e[a],o=["edit"];t.user.id===n.user_id&&o.push("delete"),e[a].buttons=o}return e},setTableFilters:function(){var e=this,t=[{caption:"All",value:0}],a={urlCommand:"/user/voucher_agents"};e.$store.dispatch("AUTH_GET",a).then((function(a){if(a&&a.length>0)for(var n=0;n<a.length;n++)t.push({caption:a[n].name,value:a[n].id});e.tableFilters=t}))},onMounting:function(){var e=this;this.xprops.buttons=["edit","delete"],e.setTableFilters()},onRecordCreated:function(e){var t=this,a=e.data;0!==t.selectedFilter&&(a["agent_id"]=t.selectedFilter),t.saveRecord(a,(function(e){t.$router.push({name:t.routeName,params:{id:e.id}})}))},saveRecord:function(e,t){var a=this,n={urlCommand:a.apiPath+(0===e.id?"":"/"+e.id),data:e};a.loading=!0,a.$forceUpdate();var o=0===e.id?"AUTH_POST":"AUTH_PUT";a.$store.dispatch(o,n).then((function(n){a.loading=!1,e.id=n.id,"function"===typeof t&&t(e)}),(function(e){a.$toaster.error(a.$t("messages."+e.messageTag))}))}}},rw=sw,lw=(a("8ee3"),Object(g["a"])(rw,wt,xt,!1,null,null,null)),cw=lw.exports,dw={},uw=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid"},[a("title-row",{attrs:{record:e.record,titleField:e.titleField,loading:e.loading,buttons:["back","save"]},on:{onCommand:e.onCommandHandler}}),e.record?[a("div",{staticClass:"row mb-2"},[a("data-input",{attrs:{width:"6",id:"name",labelTag:"general.name"},model:{value:e.record.name,callback:function(t){e.$set(e.record,"name",t)},expression:"record.name"}}),a("data-input",{attrs:{width:"3",id:"alias",labelTag:"general.alias"},model:{value:e.record.alias,callback:function(t){e.$set(e.record,"alias",t)},expression:"record.alias"}}),a("data-input",{attrs:{width:"3",id:"contact",labelTag:"general.contact"},model:{value:e.record.contact,callback:function(t){e.$set(e.record,"contact",t)},expression:"record.contact"}}),a("data-input",{attrs:{width:"2",id:"tel_no",labelTag:"general.telNo"},model:{value:e.record.tel_no,callback:function(t){e.$set(e.record,"tel_no",t)},expression:"record.tel_no"}}),a("data-input",{attrs:{width:"2",id:"fax_no",labelTag:"general.faxNo"},model:{value:e.record.fax_no,callback:function(t){e.$set(e.record,"fax_no",t)},expression:"record.fax_no"}}),a("data-input",{attrs:{width:"4",id:"web_url",labelTag:"general.webUrl"},model:{value:e.record.web_url,callback:function(t){e.$set(e.record,"web_url",t)},expression:"record.web_url"}}),a("data-input",{attrs:{width:"4",id:"email",labelTag:"general.email"},model:{value:e.record.email,callback:function(t){e.$set(e.record,"email",t)},expression:"record.email"}})],1),a("div",{staticClass:"p-2 bg-tab"},[a("b-tabs",{staticClass:"bg-tab",attrs:{"content-class":"py-0"}},[a("smtp-server-tab",{ref:"smtpServerTab",attrs:{title:"SMTP Servers",record:e.record},on:{onCommand:e.onCommandHandler}})],1)],1)]:e._e(),a("b-modal",{attrs:{id:"errorDialog",title:"Errors"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100 text-right"},[a("div",{staticClass:"btn-toolbar justify-content-end"},[a("b-button",{staticClass:"min-width-80",attrs:{variant:"primary",size:"sm"},on:{click:function(t){e.showErrorDialog=!1}}},[e._v(" "+e._s(e.$t("buttons.close"))+" ")])],1)])]},proxy:!0}]),model:{value:e.showErrorDialog,callback:function(t){e.showErrorDialog=t},expression:"showErrorDialog"}},e._l(e.errorGroups,(function(t,n){return a("div",{key:n},[a("div",[e._v(e._s(t.field))]),a("div",e._l(t.errors,(function(t){return a("div",{key:t,staticClass:"text-gray pl-5"},[e._v(" "+e._s(t)+" ")])})),0)])})),0)],2)},mw=[],pw=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-tab",{staticClass:"bg-white py-2",scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.title)+" "),e.record&&e.record.smtp_servers&&e.record.smtp_servers.length>0?a("div",{staticClass:"badge badge-warning"},[e._v(" "+e._s(e.record.smtp_servers.length)+" ")]):e._e()]},proxy:!0}])},[a("div",{staticClass:"container-fluid",on:{click:function(t){e.sendingResult=""}}},[a("div",{staticClass:"d-flex flex-row align-items-start"},[a("div",{staticClass:"flex-grow-1"},[a("div",{staticClass:"d-flex flex-row align-items-start"},[a("div",{staticClass:"pr-2"},[a("button",{staticClass:"btn btn-circle btn-primary",on:{click:e.addSmtpServer}},[a("i",{staticClass:"fa fa-plus"})])]),a("div",{},e._l(e.record.smtp_servers,(function(t){return a("icon-item",{key:t.id,staticStyle:{"vertical-align":"top"},attrs:{iconKey:"smtp-server",selected:e.selectedServer===t,item:t,tag:0===t.id?"Unsaved":"",description:t.description},on:{click:e.onServerClicked}})})),1)])]),e.selectedServer?a("div",{staticClass:"border p-2 mb-3",staticStyle:{"background-color":"#fdf3ba","max-width":"50%"}},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"d-flex flex-row bg-gray align-items-center pr-1 pl-2"},[e.selectedServer.description&&""!==e.selectedServer.description?a("h4",{staticClass:"m-0 py-2 line-height-1 flex-grow-1"},[e._v(" "+e._s(e.selectedServer.description)+" ")]):a("h4",{staticClass:"m-0 p-2 line-height-1 bg-gray flex-grow-1"},[e._v(" (New) ")]),a("button",{staticClass:"btn btn-danger btn-sm",on:{click:e.removeSmtpServer}},[e._v("Delete")])])])]),a("div",{staticClass:"row"},[a("data-input",{attrs:{id:"description",width:"6",label:"Description"},model:{value:e.selectedServer.description,callback:function(t){e.$set(e.selectedServer,"description",t)},expression:"selectedServer.description"}}),a("data-input",{attrs:{id:"mailHost",width:"4",label:"Host"},model:{value:e.selectedServer.mail_host,callback:function(t){e.$set(e.selectedServer,"mail_host",t)},expression:"selectedServer.mail_host"}}),a("data-input",{attrs:{id:"mailPort",width:"2",label:"Port",type:"Number"},model:{value:e.selectedServer.mail_port,callback:function(t){e.$set(e.selectedServer,"mail_port",t)},expression:"selectedServer.mail_port"}}),a("data-input",{attrs:{id:"mailUsername",width:"4",label:"Username"},model:{value:e.selectedServer.mail_username,callback:function(t){e.$set(e.selectedServer,"mail_username",t)},expression:"selectedServer.mail_username"}}),a("data-input",{attrs:{id:"mailPassword",width:"4",type:"password",label:"Password"},model:{value:e.selectedServer.mail_password,callback:function(t){e.$set(e.selectedServer,"mail_password",t)},expression:"selectedServer.mail_password"}}),a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Encryption")]),a("data-radio-toggle",{staticClass:"d-block",attrs:{options:e.encryptionOptions},model:{value:e.selectedServer.mail_encryption,callback:function(t){e.$set(e.selectedServer,"mail_encryption",t)},expression:"selectedServer.mail_encryption"}})],1)]),a("data-input",{attrs:{id:"mailFromAddress",width:"4",label:"From Address"},model:{value:e.selectedServer.mail_from_address,callback:function(t){e.$set(e.selectedServer,"mail_from_address",t)},expression:"selectedServer.mail_from_address"}}),a("data-input",{attrs:{id:"mailFromName",width:"4",label:"From Name"},model:{value:e.selectedServer.mail_from_name,callback:function(t){e.$set(e.selectedServer,"mail_from_name",t)},expression:"selectedServer.mail_from_name"}}),a("div",{staticClass:"col-sm-12 d-flex flex-row align-items-center"},[a("div",{staticClass:"p-2 d-flex flex-row align-items-center",staticStyle:{"background-color":"#7fc9fd"}},[a("div",{staticClass:"pr-2 font-weight-bold"},[e._v("Test")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.receiverEmailAddress,expression:"receiverEmailAddress"}],staticClass:"form-control",staticStyle:{width:"320px"},attrs:{id:"receiverEmailAddress",type:"text"},domProps:{value:e.receiverEmailAddress},on:{keydown:function(t){e.sendingResult=""},input:function(t){t.target.composing||(e.receiverEmailAddress=t.target.value)}}}),a("button",{staticClass:"ml-1 min-width-100 btn btn-primary",attrs:{type:"button"},on:{click:e.sendTestEmail}},[e.sendingTestEmail?a("font-awesome-icon",{staticClass:"fa-spin mr-1 fa-fw",attrs:{icon:"spinner"}}):a("font-awesome-icon",{staticClass:"mr-1 fa-fw",attrs:{icon:"paper-plane"}}),e._v(" Send")],1)]),a("div",{staticClass:"ml-3"},[e._v(" "+e._s(e.sendingResult)+" ")]),a("div",{staticClass:"flex-grow-1"})])],1)]):e._e()])])])},fw=[],gw={components:Object(s["a"])(Object(s["a"])({},fC),{},{iconItem:Cy}),data:function(){return{sendingTestEmail:!1,sendingResult:"",encryptionOptions:[{name:"TLS",value:"tls"},{name:"SSL",value:"ssl"}],selectedServer:null,receiverEmailAddress:"",smtpServers:[]}},mounted:function(){},props:{title:{type:String,default:""},record:{type:Object,default:null}},watch:{"record.smtp_servers":{handler:function(){var e=this;e.record.smtp_servers.length>0?null===e.selectedServer&&(e.selectedServer=e.record.smtp_servers[0]):e.selectedServer=null},deep:!0}},methods:{onServerClicked:function(e){var t=this;t.selectedServer=e},sendTestEmail:function(){var e=this;if(""!==e.receiverEmailAddress.trim()){var t={urlCommand:"/smtp_server/check",data:{smtpServer:e.selectedServer,receiverEmailAddress:e.receiverEmailAddress}};e.sendingTestEmail=!0,e.$store.dispatch("AUTH_POST",t).then((function(t){e.sendingTestEmail=!1,e.sendingResult="Sent Successfully."}),(function(t){e.sendingTestEmail=!1,e.$dialog.alert(t.message)}))}else e.$dialog.alert("Receiver email address not specified!")},addSmtpServer:function(){var e=this;console.log("SmtpServerTab :: addSmtpServer"),e.$emit("onCommand",{command:"newSmtpServer",callback:function(t){e.selectedServer=t}})},removeSmtpServer:function(){var e=this;e.$dialog.confirm("Are you sure?").then((function(){e.doRemoveSmtpServer(e.selectedServer)}))},doRemoveSmtpServer:function(e){var t=this;if(0===e.id)t.$emit("onCommand",{command:"removeNewSmtpServer",smtpServer:e,callback:function(e){e>=t.record.smtp_servers.length&&e--,t.selectedServer=t.record.smtp_servers[e]}});else{var a={urlCommand:"/agents/"+t.record.id+"/smtp_servers/"+e.id};t.$store.dispatch("AUTH_DELETE",a).then((function(e){t.$emit("onCommand",{command:"refresh"})}))}}}},vw=gw,hw=Object(g["a"])(vw,pw,fw,!1,null,null,null),bw=hw.exports,Cw={mixins:[qu,wa],components:Object(s["a"])({titleRow:cu,smtpServerTab:bw},fC),data:function(){return{showErrorDialog:!1,apiPath:"/agents",titleField:"name",record:null,loading:!1,content:"",errorGroups:[],blankSmtpServer:{id:0,description:"",mail_driver:"smtp",mail_host:"",mail_port:587,mail_username:"",mail_password:"",mail_encryption:"tls",mail_from_address:"",mail_from_name:""}}},props:{recordId:{type:Number,default:0}},watch:{recordId:function(e){var t=this;t.refresh(e)}},mounted:function(){var e=this;e.refresh(e.recordId)},methods:{save:function(){var e=this,t={urlCommand:e.apiPath+(0===e.record.id?"":"/"+e.record.id),data:e.record};e.loading=!0;var a=0===e.record.id?"AUTH_POST":"AUTH_PUT";e.$store.dispatch(a,t).then((function(t){e.loading=!1,e.record.id=t.id,e.$store.dispatch("FETCH_AGENTS"),e.$toaster.success(e.$t("messages.saved_successfully")),e.refresh(e.record.id)}),(function(t){e.loading=!1,e.showErrors(t.data)}))},showErrors:function(e){var t=this;for(var a in t.errorGroups=[],e.errors)t.errorGroups.push({field:a,errors:e.errors[a]});t.showErrorDialog=!0},newSmtpServerDescription:function(){var e=this;console.log("AgentRecord :: newSmtpServerDescription");var t="SMTP Server",a=t,n=t,o=e.record.smtp_servers.find((function(e){return e.description==n}));if(o){var i=2;do{n=t+" #"+i,o=e.record.smtp_servers.find((function(e){return e.description==n})),console.log("newSmtpServerDescription :: found: ",o),i++}while(o);a=n}return a},onCommandHandler:function(e){var t=this;switch(e.command){case"refresh":t.refresh(t.record.id);break;case"newSmtpServer":var a=JSON.parse(JSON.stringify(t.blankSmtpServer));a.description=t.newSmtpServerDescription(),t.record.smtp_servers.push(a),"function"===typeof e.callback&&e.callback(t.record.smtp_servers[t.record.smtp_servers.length-1]);break;case"save":t.save();break;case"removeNewSmtpServer":for(var n=e.smtpServer,o=0;o<t.record.smtp_servers.length;o++)if(t.record.smtp_servers[o]===n){t.record.smtp_servers.splice(o,1),"function"===typeof e.callback&&e.callback(o);break}break}}}},_w=Cw,yw=Object(g["a"])(_w,uw,mw,!1,null,null,null),ww=yw.exports,xw={mixins:[sd],components:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Mc),dw),{},{dataRecord:ww}),data:function(){return{tableId:"agent-table",moduleNameTag:"menu.agents",apiPath:"/agents",routeName:"agents",columns:function(){var e=[{title:"general.number",thComp:"ThCommonHeader",tdComp:"TdCommonIndex",field:"id"},{title:"general.name",thComp:"ThCommonHeader",tdComp:"TdCommonClick",field:"name"},{title:"general.alias",thComp:"ThCommonHeader",tdComp:"TdCommon",field:"alias"},{title:"general.tel_no",thComp:"ThCommonHeader",tdComp:"TdCommon",field:"tel_no"},{title:"general.fax_no",thComp:"ThCommonHeader",tdComp:"TdCommon",field:"fax_no"},{title:"general.web_url",thComp:"ThCommonHeader",tdComp:"TdCommon",field:"web_url"},{title:"general.email",thComp:"ThCommonHeader",tdComp:"TdCommon",field:"email"},{title:"agents.smtp_servers",thComp:"ThCommonHeader",tdComp:"TdCommon",tdClass:"text-center",thClass:"text-center",field:"smtp_server_count"},{title:"agents.voucher_count",thComp:"ThCommonHeader",tdComp:"TdCommon",tdClass:"text-center",thClass:"text-center",field:"voucher_count"},{title:"general.action",thComp:"ThCommonHeader",tdComp:"TdCommonOpt",field:"id"}];return e}(),breadcrumb:[{labelTag:"general.home",routeName:"dashboard"},{labelTag:"menu.agents",routeName:""}]}},methods:{deletionAllowed:function(e){var t=this,a="";return console.log("Agent :: deletionAllowed :: voucher_count = "+e.voucher_count),e.voucher_count>0&&(a=t.$t("messages.this_agent_has_related_vouchers")),a},onMounting:function(){this.xprops.buttons=["edit","delete"]},confirmDialog:function(e,t){var a=this,n=!1,o=a.deletionAllowed(e);""!==o&&(a.selectedRow=e,a.forceDeleteMessage=o,a.$bvModal.show("forceDeleteDialog"),n=!0),n||a.confirmDelete(t)}}},Tw=xw,kw=(a("1fb5"),Object(g["a"])(Tw,Tt,kt,!1,null,null,null)),Sw=kw.exports,Ow=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"coupon"},[e.message?a("div",{staticClass:"info-message d-flex justify-content-center align-items-center",staticStyle:{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body bg-danger card-shadow"},[a("h3",{staticClass:"m-0 p-0 d-inline-block"},[e._v(e._s(e.message))])])])]):a("div",{domProps:{innerHTML:e._s(e.html)}})])},$w=[],jw={data:function(){return{html:"",message:""}},computed:{isTemp:function(){var e=this;return"TempCoupon"===e.$route.name}},mounted:function(){var e=this,t=e.$route.params.key,a={urlCommand:"/templates",data:{isTemp:e.isTemp,key:t}};e.$store.dispatch("COMMON_POST",a).then((function(t){e.html=t}),(function(t){e.message=e.$t("messages."+t.messageTag)}))}},Iw=jw,Ew=(a("5e87"),Object(g["a"])(Iw,Ow,$w,!1,null,null,null)),Fw=Ew.exports,Pw=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form-builder-panel",{on:{onCommand:e.onCommandHandler},model:{value:e.inputObjs,callback:function(t){e.inputObjs=t},expression:"inputObjs"}})},Aw=[],Dw={mixins:[Zy],components:{formBuilderPanel:Zh},data:function(){return{record:{inputObjs:[]}}},mounted:function(){var e=this;e.record.inputObjs=[{id:1,name:"Simple Text",order:1,fixed:!1,inputType:"simple-text",question:"簡單輸入",required:!0,options:[],notes:"simple text"},{id:2,name:"Name",order:2,fixed:!1,inputType:"name",question:"名字",required:!0,options:[],notes:"simple text"},{id:3,name:"Phone",order:3,fixed:!1,inputType:"phone",question:"電話號碼",required:!0,options:[],notes:"simple text"},{id:4,name:"Email",order:4,fixed:!1,inputType:"email",question:"Email",required:!0,options:[],notes:"simple text"},{id:5,name:"Address",order:5,fixed:!1,inputType:"text",question:"地址 (我哋會安排以郵寄方式將3天試用裝寄比你)",required:!0,options:[],notes:"simple text"},{id:6,name:"Remark",order:6,fixed:!1,inputType:"label",question:"* 試用裝將會於登記後一星期內以郵遞寄出",required:!0,options:[],notes:"simple text"},{id:7,name:"Do you know it?",order:7,fixed:!1,inputType:"single-choice",question:"你認唔認識UL·OS呢個品牌？ *",required:!0,options:["認識","不認識"],notes:"simple text"},{id:8,name:"Ever buy or use it?",order:8,fixed:!1,inputType:"single-choice",question:"你有無曾經用過或買過UL·OS嘅產品？",required:!0,options:["曾經使用","曾經購買","未曾使用","未曾購買"],notes:"simple text"},{id:9,name:"Seen in shops?",order:9,fixed:!1,inputType:"multiple-choice",question:"你有無喺以下店舖見過UL·OS嘅產品？（可多選） *",required:!0,options:["屈臣氏","百佳","惠康","7-11","Donki","YATA","AEON","APITA","HKTVmall","完全無見過認識","不認識"]},{id:10,name:"Remark",order:10,fixed:!1,inputType:"label",question:"* 每人只限登記乙次及換領乙份，換完即止。\n\n* 換領日期為2020年5月5日至5月11日，逾期無效。",required:!0,options:[],notes:"simple text"}]},methods:{onCommandHandler:function(e){}}},Hw=Dw,Nw=Object(g["a"])(Hw,Pw,Aw,!1,null,null,null),Rw=Nw.exports,Vw=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("Question Form")]),e._v(" "+e._s(e.formConfigs)+" ")])},Mw=[],Lw={data:function(){return{formConfigs:null}},mounted:function(){var e=this,t=e.$route.params.key,a={urlCommand:"/form_questions/"+t};e.$store.dispatch("USER_GET",a).then((function(t){e.formConfigs=t.formConfigs}))}},Uw=Lw,qw=Object(g["a"])(Uw,Vw,Mw,!1,null,null,null),Bw=qw.exports;r["default"].use(w["a"]);var Gw=function(e,t,a){var n=Ve.getters.accessToken;if(""===n||null===n)a("/login");else{var o=Ve.getters.user;null===o&&Ve.dispatch("FETCH_USER")}a()},Kw=function(e,t,a){var n=Ve.getters.user;null===n?Ve.dispatch("FETCH_TOKEN").then((function(e){""===e||null===e?a("/login"):(Ve.dispatch("FETCH_USER"),Ve.getters.agentsLoaded||Ve.dispatch("FETCH_AGENTS"),Ve.getters.inputObjsInfoLoaded||Ve.dispatch("FETCH_INPUT_OBJS_INFO").then((function(){}),(function(){})),Ve.getters.systemConfigsLoaded||Ve.dispatch("FETCH_SYSTEM_CONFIGS").then((function(){}),(function(){})),a())}),(function(e){alert("error"),a("/login")})):(Ve.getters.agentsLoaded||Ve.dispatch("FETCH_AGENTS"),Ve.getters.inputObjsInfoLoaded||Ve.dispatch("FETCH_INPUT_OBJS_INFO").then((function(){}),(function(){})),Ve.getters.sytemConfigsLoaded||Ve.dispatch("FETCH_SYSTEM_CONFIGS").then((function(){}),(function(){})),a())},zw=[{path:"/coupons/test/:id/:timestamp",name:"CouponLinkSharingTest",component:Fw},{path:"/f/:key",name:"QuestionFormPreview",component:Bw},{path:"/",redirect:"/home",component:Ye,beforeEnter:Gw,children:[{path:"/home",name:"Home",redirect:"/vouchers",component:lt},{path:"/profile",name:"Profile",component:An}]},{path:"/test",component:Rw},{path:"/auth",name:"AuthLayout",component:Jn,children:[{path:"/logout",name:"Logout",component:go,meta:{auth:!0}},{path:"/login",name:"Login",component:go,meta:{auth:!0}},{path:"/regiser",name:"Register",component:yo,meta:{auth:!0}},{path:"/forgot_password",name:"ForgotPassword",component:Po,meta:{auth:!0}},{path:"/message/:messageTag",name:"AuthMessage",component:Vo,meta:{auth:!0}},{path:"/verify/:code?",name:"VerifyEmail",component:Go,meta:{auth:!0}},{path:"/reset/:code?",name:"ResetPassword",component:Yo,meta:{auth:!0}}]},{path:"/error/:code",name:"/Error",component:jn},{path:"/app",name:"App",component:Ma,children:[{path:"/super_dashboard",name:"SuperDashboard",component:Nn},{path:"/vouchers/:id?",name:"vouchers",beforeEnter:Kw,component:cw},{path:"/agents/:id?",name:"agents",beforeEnter:Kw,component:Sw},{path:"/dashboard",name:"dashboard",redirect:"/vouchers",beforeEnter:Kw,component:Ga},{path:"/widgets",name:"widgets",component:Wa},{path:"/layout_options",name:"layout_options",component:tn},{path:"/top_navigation",name:"top_navigation",component:ni},{path:"/top_navigation_sidebar",name:"top_navigation_sidebar",component:ci},{path:"/boxed",name:"boxed",component:gi},{path:"/fixed_sidebar",name:"fixed_sidebar",component:yi},{path:"/fixed_navbar",name:"fixed_navbar",component:Oi},{path:"/fixed_footer",name:"fixed_footer",component:Pi},{path:"/collapsed_sidebar",name:"collapsed_sidebar",component:Vi},{path:"/charts",name:"charts",component:ln,children:[{path:"/charts_js",name:"charts_js",component:Bi},{path:"/flot",name:"charts_flot",component:Qi},{path:"/inline",name:"charts_inline",component:es}]},{path:"/ui_elements",name:"ui_elements",component:pn,children:[{path:"/ui_general",name:"ui_general",component:is},{path:"/ui_icons",name:"ui_icons",component:ds},{path:"/ui_buttons",name:"ui_buttons",component:gs},{path:"/ui_sliders",name:"ui_sliders",component:Is},{path:"/ui_modal_alerts",name:"ui_modals_alerts",component:_s},{path:"/ui_navbar_tabs",name:"ui_navbar_tabs",component:ks},{path:"/ui_timeline",name:"ui_timeline",component:Ds},{path:"/ui_ribbons",name:"ui_ribbons",component:Ms}]},{path:"/forms",name:"forms",component:bn,children:[{path:"general_elements",name:"forms_general",component:Gs},{path:"advanced_elements",name:"forms_advanced",component:Ws},{path:"editors",name:"forms_editors",component:tr},{path:"validation",name:"forms_validation",component:sr}]},{path:"/tables",name:"tables",component:xn,children:[{path:"simple_tables",name:"simple_tables",component:ur},{path:"datatables",name:"datatables",component:vr},{path:"js_grid",name:"js_grid",component:yr}]}]},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}}],Jw=new w["a"]({mode:"history",base:"/",routes:zw}),Qw=Jw,Ww=(a("4160"),a("466d"),a("159b"),a("a925"));function Yw(){var e=a("a7ba"),t={};return e.keys().forEach((function(a){var n=a.match(/([A-Za-z0-9-_]+)\./i);if(n&&n.length>1){var o=n[1];t[o]=e(a)}})),t}r["default"].use(Ww["a"]);var Xw=new Ww["a"]({locale:"en",fallbackLocale:"en",messages:Yw()}),Zw=a("bc3a"),ex=a.n(Zw),tx=a("a7fe"),ax=a.n(tx),nx=a("358c"),ox=a("03a5"),ix=a.n(ox),sx=a("1881"),rx=a.n(sx),lx=a("ee01"),cx=a.n(lx),dx=a("4eb5"),ux=a.n(dx),mx=a("0a63"),px=a.n(mx),fx=a("9062"),gx=a.n(fx),vx=(a("c5c5"),a("26ca"),a("e40d"),a("7bb1")),hx=a("4c93");b["b"].watch(),b["d"].add(_["a"]),b["d"].add(C["a"]),r["default"].use(l["a"]),r["default"].use(c["a"]),r["default"].use(ax.a,ex.a),r["default"].use(nx["a"]),r["default"].use(ix.a),r["default"].use(rx.a,"dialog"),r["default"].use(cx.a,{timeout:3e3}),ux.a.config.autoSetContainer=!0,r["default"].use(ux.a),r["default"].use(px.a),r["default"].use(gx.a),Object(vx["e"])({en:{names:{email:"Email Address"}}}),Object(vx["d"])("email",Object(s["a"])(Object(s["a"])({},hx["b"]),{},{message:"The email address is not valid."})),Object(vx["d"])("required",Object(s["a"])(Object(s["a"])({},hx["c"]),{},{message:"This field is required."})),Object(vx["d"])("confirmed",Object(s["a"])(Object(s["a"])({},hx["a"]),{},{message:"Password not matched."})),Object(vx["d"])("nonzero",(function(e){return 0!==e})),Object(vx["c"])({classes:{valid:"is-valid",invalid:"is-invalid"}}),r["default"].component("vue-loading",gx.a),r["default"].component("font-awesome-icon",y["a"]),r["default"].component("validationProvider",vx["b"]),r["default"].component("validationObserver",vx["a"]),r["default"].config.productionTip=!1,Ve.dispatch("FETCH_CONSTANTS"),new r["default"]({router:Qw,store:Ve,i18n:Xw,render:function(e){return e(h)}}).$mount("#app")},cead:function(e,t,a){},cf7b:function(e,t,a){"use strict";var n=a("bfc3"),o=a.n(n);o.a},d157:function(e,t,a){},d56e:function(e,t,a){"use strict";var n=a("1d7c"),o=a.n(n);o.a},d7bc:function(e,t,a){},d935:function(e,t,a){"use strict";var n=a("aba5"),o=a.n(n);o.a},de85:function(e,t,a){"use strict";var n=a("70e3"),o=a.n(n);o.a},e07d:function(e,t,a){},e401:function(e,t,a){},e462:function(e,t,a){"use strict";var n=a("0593"),o=a.n(n);o.a},e484:function(e,t,a){},e5cb:function(e,t,a){"use strict";var n=a("a682"),o=a.n(n);o.a},e908:function(e,t,a){},e93b:function(e,t,a){},eb99:function(e,t,a){"use strict";var n=a("634e"),o=a.n(n);o.a},ed45:function(e,t,a){"use strict";var n=a("9208"),o=a.n(n);o.a},f058:function(e,t,a){},f486:function(e,t,a){"use strict";var n=a("7f2e"),o=a.n(n);o.a},fb13:function(e,t,a){"use strict";var n=a("b959"),o=a.n(n);o.a},fe6c:function(e,t,a){},ff2a:function(e,t,a){}});
//# sourceMappingURL=app.2ab3b950.js.map